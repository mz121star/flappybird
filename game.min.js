// Made with Panda.js - http://www.pandajs.net
pandaConfig = {sourceFolder: "src", outputFile: "game.min.js", sitelock: "", analyticsId: "UA-42024756-5", storageId: "net.pandajs.flyingdog"}, "undefined" == typeof window && (window = {}), function (t) {
    "use strict";
    if ("undefined" == typeof global) {
        var e = {version: "1.1.0", config: t.pandaConfig || {sourceFolder: "src"}, scale: 1, scene: null, debug: null, system: null, sound: null, pool: null, storage: null, keyboard: null, device: {}, assets: {}, renderer: null, modules: {}, resources: [], ready: !1, nocache: "", _current: null, _loadQueue: [], _waitForLoad: 0, _DOMLoaded: !1, copy: function (t) {
            var e, i, r;
            if (!t || "object" != typeof t || t instanceof HTMLElement || t instanceof game.Class || game.Container && t instanceof game.Container)return t;
            if (t instanceof Array) {
                for (i = [], r = 0, e = t.length; e > r; r++)i[r] = game.copy(t[r]);
                return i
            }
            i = {};
            for (r in t)i[r] = game.copy(t[r]);
            return i
        }, merge: function (t, e) {
            for (var i in e) {
                var r = e[i];
                "object" != typeof r || r instanceof HTMLElement || r instanceof game.Class || r instanceof game.Container ? t[i] = r : (t[i] && "object" == typeof t[i] || (t[i] = r instanceof Array ? [] : {}), game.merge(t[i], r))
            }
            return t
        }, ksort: function (t) {
            if (!t || "object" != typeof t)return!1;
            var e, i = [], r = {};
            for (e in t)i.push(e);
            for (i.sort(), e = 0; e < i.length; e++)r[i[e]] = t[i[e]];
            return r
        }, setVendorAttribute: function (t, e, i) {
            var r = e.ucfirst();
            t[e] = t["ms" + r] = t["moz" + r] = t["webkit" + r] = t["o" + r] = i
        }, getVendorAttribute: function (t, e) {
            var i = e.ucfirst();
            return t[e] || t["ms" + i] || t["moz" + i] || t["webkit" + i] || t["o" + i]
        }, normalizeVendorAttribute: function (t, e) {
            var i = this.getVendorAttribute(t, e);
            t[e] || (t[e] = t[e] || i)
        }, fullscreen: function () {
            game.system.canvas.requestFullscreen && game.system.canvas.requestFullscreen(), game.system.canvas.requestFullScreen && game.system.canvas.requestFullScreen()
        }, fullscreenSupport: function () {
            return!(!game.system.canvas.requestFullscreen && !game.system.canvas.requestFullScreen)
        }, addAsset: function (t, e) {
            return e = e || t, this.assets[e] = t, this.resources.push(t), t
        }, addAudio: function (t, e) {
            return e = e || t, game.Audio.queue[t] = e, e
        }, setNocache: function () {
            this.nocache = "?" + Date.now()
        }, module: function (t, e) {
            if (this._current)throw"Module " + this._current.name + " has no body";
            if (this.modules[t] && this.modules[t].body)throw"Module " + t + " is already defined";
            return this._current = {name: t, requires: [], loaded: !1, body: null, version: e}, this.modules[t] = this._current, this._loadQueue.push(this._current), this
        }, require: function () {
            var t, e = Array.prototype.slice.call(arguments);
            for (t = 0; t < e.length; t++)e[t] && this._current.requires.push(e[t]);
            return this
        }, body: function (t) {
            this._current.body = t, this._current = null, this._initDOMReady && this._initDOMReady()
        }, start: function (t, e, i, r) {
            if (this._loadQueue.length > 0)throw"Core not ready.";
            e = e || (game.System.orientation === game.System.PORTRAIT ? 768 : 1024), i = i || (game.System.orientation === game.System.PORTRAIT ? 927 : 672), this.system = new game.System(e, i, r), game.Audio && (this.audio = new game.Audio), game.Pool && (this.pool = new game.Pool), game.Debug && game.Debug.enabled && !navigator.isCocoonJS && (this.debug = new game.Debug), game.DebugDraw && game.DebugDraw.enabled && (this.debugDraw = new game.DebugDraw), game.Storage && this.config.storageId && (this.storage = new game.Storage(this.config.storageId)), game.Analytics && this.config.analyticsId && (this.analytics = new game.Analytics(this.config.analyticsId)), this.ready = !0;
            var s = new game.Loader;
            s.start()
        }, Math: {distance: function (t, e, i, r) {
            return t = i - t, e = r - e, Math.sqrt(t * t + e * e)
        }, random: function (t, e) {
            return Math.random() * (e - t) + t
        }}, _loadScript: function (t, e) {
            this.modules[t] = !0, this._waitForLoad++;
            var i = this.config.sourceFolder + "/" + t.replace(/\./g, "/") + ".js" + this.nocache, r = document.createElement("script");
            r.type = "text/javascript", r.src = i, r.onload = function () {
                game._waitForLoad--, game._loadModules()
            }, r.onerror = function () {
                throw"Failed to load module " + t + " at " + i + " required from " + e
            }, document.getElementsByTagName("head")[0].appendChild(r)
        }, _loadModules: function () {
            var t, e, i, r, s, n;
            for (e = 0; e < game._loadQueue.length; e++) {
                for (r = game._loadQueue[e], n = !0, i = 0; i < r.requires.length; i++)s = r.requires[i], game.modules[s] ? game.modules[s].loaded || (n = !1) : (n = !1, game._loadScript(s, r.name));
                n && r.body && (game._loadQueue.splice(e, 1), r.loaded = !0, r.body(), t = !0, e--)
            }
            if (t && this._loadQueue.length > 0)game._loadModules(); else if (0 === game._waitForLoad && 0 !== game._loadQueue.length) {
                var a = [];
                for (e = 0; e < game._loadQueue.length; e++) {
                    var o = [], h = game._loadQueue[e].requires;
                    for (i = 0; i < h.length; i++)r = game.modules[h[i]], r && r.loaded || o.push(h[i]);
                    a.push(game._loadQueue[e].name + " (requires: " + o.join(", ") + ")")
                }
                throw"Unresolved modules:\n" + a.join("\n")
            }
        }, _boot: function () {
            document.location.href.match(/\?nocache/) && this.setNocache(), this.device.pixelRatio = t.devicePixelRatio || 1, this.device.screen = {width: t.screen.availWidth * this.device.pixelRatio, height: t.screen.availHeight * this.device.pixelRatio}, this.device.iPhone = /iPhone/i.test(navigator.userAgent), this.device.iPhone4 = this.device.iPhone && 2 === this.device.pixelRatio, this.device.iPhone5 = this.device.iPhone && 2 === this.device.pixelRatio && 1096 === this.device.screen.height, this.device.iPad = /iPad/i.test(navigator.userAgent), this.device.iPadRetina = this.device.iPad && 2 === this.device.pixelRatio, this.device.iOS = this.device.iPhone || this.device.iPad, this.device.iOS5 = this.device.iOS && /OS 5/i.test(navigator.userAgent), this.device.iOS6 = this.device.iOS && /OS 6/i.test(navigator.userAgent), this.device.iOS7 = this.device.iOS && /OS 7/i.test(navigator.userAgent), this.device.android = /android/i.test(navigator.userAgent), this.device.android2 = /android 2/i.test(navigator.userAgent), this.device.wp7 = /Windows Phone OS 7/i.test(navigator.userAgent), this.device.wp8 = /Windows Phone 8/i.test(navigator.userAgent), this.device.wp = this.device.wp7 || this.device.wp8, this.device.wpApp = this.device.wp && "undefined" != typeof t.external && "undefined" != typeof t.external.notify, this.device.ie9 = /MSIE 9/i.test(navigator.userAgent), this.device.ie10 = /MSIE 10/i.test(navigator.userAgent), this.device.ie11 = /rv:11.0/i.test(navigator.userAgent), this.device.ie = this.device.ie10 || this.device.ie11 || this.device.ie9, this.device.opera = /Opera/i.test(navigator.userAgent), this.device.crosswalk = /Crosswalk/i.test(navigator.userAgent), this.device.cocoonJS = !!navigator.isCocoonJS, this.device.mobile = this.device.iOS || this.device.android || this.device.wp, this.device.wp && "undefined" != typeof t.external.notify && (t.console.log = function (e) {
                t.external.notify(e)
            })
        }, _DOMReady: function () {
            if (!game._DOMLoaded) {
                if (!document.body)return setTimeout(game._DOMReady, 13);
                game._DOMLoaded = !0, game._loadModules()
            }
        }, _initDOMReady: function () {
            this._initDOMReady = null, this._boot(), "complete" === document.readyState ? this._DOMReady() : (document.addEventListener("DOMContentLoaded", this._DOMReady, !1), t.addEventListener("load", this._DOMReady, !1))
        }};
        if (t.game = e, Number.prototype.limit = function (t, e) {
            var i = this;
            return t > i && (i = t), i > e && (i = e), i
        }, Number.prototype.round = function (t) {
            return t = t ? Math.pow(10, t) : 1, Math.round(this * t) / t
        }, Array.prototype.erase = function (t) {
            for (var e = this.length; e--;)this[e] === t && this.splice(e, 1);
            return this
        }, Array.prototype.random = function () {
            return this[Math.floor(Math.random() * this.length)]
        }, Array.prototype.shuffle = function () {
            for (var t = this.length, e = t; e--;) {
                var i = parseInt(Math.random() * t), r = this[e];
                this[e] = this[i], this[i] = r
            }
            return this
        }, Function.prototype.bind = function (t) {
            var e = this, i = [];
            return Array.prototype.push.apply(i, arguments), i.shift(), function () {
                var r = [];
                return Array.prototype.push.apply(r, i), Array.prototype.push.apply(r, arguments), e.apply(t, r)
            }
        }, String.prototype.ucfirst = function () {
            return this.charAt(0).toUpperCase() + this.slice(1)
        }, game.normalizeVendorAttribute(t, "requestAnimationFrame"), t.requestAnimationFrame) {
            var i = 1, r = {};
            t.game.setGameLoop = function (e, s) {
                var n = i++;
                r[n] = !0;
                var a = function () {
                    r[n] && (t.requestAnimationFrame(a, s), e())
                };
                return t.requestAnimationFrame(a, s), n
            }, t.game.clearGameLoop = function (t) {
                delete r[t]
            }
        } else t.game.setGameLoop = function (e) {
            return t.setInterval(e, 1e3 / 60)
        }, t.game.clearGameLoop = function (e) {
            t.clearInterval(e)
        };
        var s = !1, n = /xyz/.test(function () {
            var t;
            return t
        }) ? /\bsuper\b/ : /[\D|\d]*/;
        e.Class = function () {
        }, e.Class.extend = function (e) {
            function i() {
                if (!s) {
                    if (this.staticInit) {
                        var t = this.staticInit.apply(this, arguments);
                        if (t)return t
                    }
                    for (var e in this)"object" == typeof this[e] && (this[e] = game.copy(this[e]));
                    this.init && this.init.apply(this, arguments)
                }
                return this
            }

            var r = this.prototype;
            s = !0;
            var a = new this;
            s = !1;
            var o = function (t, e) {
                return function () {
                    var i = this.super;
                    this.super = r[t];
                    var s = e.apply(this, arguments);
                    return this.super = i, s
                }
            };
            for (var h in e)a[h] = "function" == typeof e[h] && "function" == typeof r[h] && n.test(e[h]) ? o(h, e[h]) : e[h];
            return i.prototype = a, i.prototype.constructor = i, i.extend = t.game.Class.extend, i.inject = function (t) {
                var e = this.prototype, i = {}, r = function (t, e) {
                    return function () {
                        var r = this.super;
                        this.super = i[t];
                        var s = e.apply(this, arguments);
                        return this.super = r, s
                    }
                };
                for (var s in t)"function" == typeof t[s] && "function" == typeof e[s] && n.test(t[s]) ? (i[s] = e[s], e[s] = r(s, t[s])) : e[s] = t[s]
            }, i
        }
    }
}(window), game.module("engine.core").require("engine.loader", "engine.timer", "engine.system", "engine.audio", "engine.renderer", "engine.sprite", "engine.debug", "engine.storage", "engine.tween", "engine.scene", "engine.pool", "engine.analytics").body(function () {
}), game.module("engine.loader").body(function () {
    "use strict";
    game.Loader = game.Class.extend({scene: null, loaded: 0, percent: 0, backgroundColor: null, assets: [], sounds: [], init: function (t) {
        var e;
        for (this.scene = t || SceneGame, this.timer = new game.Timer, e = 0; e < game.resources.length; e++)game.TextureCache[game.resources[e]] || this.assets.push(game.Loader.getPath(game.resources[e]));
        for (var i in game.Audio.queue)this.sounds.push(i);
        this.assets.length > 0 && (this.loader = new game.AssetLoader(this.assets, !0), this.loader.onProgress = this.progress.bind(this), this.loader.onComplete = this.loadAudio.bind(this), this.loader.onError = this.error.bind(this)), 0 === this.assets.length && 0 === this.sounds.length && (this.percent = 100)
    }, initStage: function () {
        if (this.backgroundColor) {
            var t = new game.Graphics;
            t.beginFill(this.backgroundColor), t.drawRect(0, 0, game.system.width, game.system.height), game.system.stage.addChild(t)
        }
        this.text = new game.Text(this.percent + "%", {font: "30px Arial", fill: "#ffffff"}), this.text.position.x = game.system.width / 2 - this.text.width / 2, this.text.position.y = game.system.height / 2 + 80, game.system.stage.addChild(this.text);
        var e = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJMAAACDCAMAAAC+7dm8AAAAolBMVEUAAAAjHyAjHyAjHyAjHyAjHyAjHyAjHyAjHyAmIiMjHyAjHyAjHyAjHyAjHyAjHyAjHyAjHyAjHyD////m5+grKCn8/Pz3+PgzMDH09PVKR0jw8fGenp7t7u6ko6SqqapTUVLLy8zY2Nnq6uvj4+Q5NjhkYmNcWltAPT+Qj5CBf4B6eXqXlpfe3t9zcnPEw8RsamyHhoe8vL22tbbS0tKvr7CGaULPAAAAEnRSTlMAg3FU0uK/ChX+QzIj8LGdkWTaWSIZAAALGUlEQVR42r1c2ZaiMBBFRXFfIiAqsijI5or6/782rSyBVAJRu+c+zDndQ8dL1U1tAYVfQHfQajYmY7E9QilGbXE8bbYGkvBfIQ37CZMRqkB73GgNhT+HNJg1xiJ6A71x8w95dVtTEX2EdmMg/AGGTSYfRdNcLYWCGBCb0i97rNVBAK4VBebNPjryD3br5XKxWG52snPc3s/xwwjCk+eXKE6Hv8ioSSpZsa6PrZxit16ocxZ2thl6ObNJ97cYkfY5PRw5A+ZTAXWr71Nejd/wYL9dttDlJufYLObcWMSnF612/2sjTcsmCo4ydpk6fw9Lw3/J6jtTDdslRrqDGS3nH0C9rZ6mGnzjt5LXAsxIBoy4WRkaQmj2MaUZKuCyLehIrfeTs7VteyvDK3eX5wb8BUqaiRntqpV9vAWXlZZnltXJkIkrTAWhjvSusrtSmZLFZ6SFHew1BOHF5evubkJK4iLW7TcnSQ4pqjsqKGnNtE8Sg+iwtqVr5RVCopiUDs0+k5mUsoHo6XKtuO/XFaqE8ihdv8GXJ8QGkNCsU7GajLGgE/JRPQySFIHJsKzmUcUN3qopyYcVZx1VFpXjoiKIYCqNq1aqtJJ62/cQL7TNvAgbqA9vRqlTafEKSk7goncQzkvQEcA45TRFFbiy5X3GJuKEsimvsEcArRelAarAXsYoLbgwV+h96EREh7Fs9PJelef8YyF6FxPHwUWfwCKcb9ANNazcKTKGWsgNnIzggoT7VQvK/IdTA7ERUsW089DHsAlD2Qjgx3ntCs85wHNJrvocJqbDknlf6CI2QLDEUeVTBCAFIBINoVW552Di3WroG4TzWkONK+TUsykCX/voK5wAJ6CotjBm/znNTBf0LScAEOcEZr/du1PM9EBfIoKcTMCJmR4uFDMtXfQlQkrhrpGcEAtnipkCREPP905hcNANQ9eDa7RfVWyDQ6bLWxBe9fMr6EW8nCxKotspkI+n32FN5dwityo+rSMl//MNULnwTolyBYxCh9nGxRbV+i/KPsJQTlufj5MCQzh0vH8niICOCcB5ruOTHwY4cQcCg6S0m1fjDoSlqMDcEAJvWoGBRDnO63BXKLXKWvmMk0Zx3R1soXocKOHJRHWc+INTSNDmmWKoPtx2l1pO3LtOdUH0qwPU4LMZ9j/ktIUB0wbVWS2AeLSftRboM04rGWOHgxOxfB1gKbJ/tqj8nKojAdx1+zkfdHJbHEt3djoY+tUCnPjktO6BgpELNunvLcK4povbJa3Sy3FKNXcmAxjvWLVwL8qizCnEgax4x9TuTgNygpFmO+eET3R3Dv6YRBagVhSmnDXBCZXBPWP1Cq56iYBa38WFTlhocUrcIkw558WJ9LcC3F9iijrUNvhAaTU1IlrUk4ExRC47U6a7uEHtOcHECUY6r5YLDAYudiY0tVccGDS4tp0D+g9ePHASLefNFcPFEnXU48gYWasJan1exOSgx6Ca+orl9AORJxTYoMfmxRmbv/yLE93FM3Cmwsp2ZzDc4sWdnPNsqKY2setoQzGPEp5ichtwc9qCreriaAVl10jPwzgKuhikFl4cQYj0aO6P89FhglZ9yDyDnogXDhjZh3mRsH7oxrb0AS0hQ7NmOgc1fq9jYur643VDMvgTM5VkOrU3Ch8wFTCa1eNn2CAcawLlK89rdoGTohLli5E25co6l53IPIgOKJyOBKddta57aeT+yQI7MPJdp5xUDV2f5B/5B4jgEYKqdLchOFWfKkbICvx0K+zA1k83nnlE2kvwIZYdPPydsDmp5TKzV1czycnmjvDdmGRuM2O0euWUPZZdF5BK563U0zr3jVJlg5RUgaufH2ARGCaczJTTCjtiwM0Jtgh+TejWUoFoOSdFJZs+U0fuq6/xschakBPDd3A8u6pJu1oWv5cZJwukQPOA0Pk5RnZxMdR8i1MIZhFsPJ5c4nR/bmB2kxNOQbGuUnF84uak83R32DfB9pLOm9aUAwQlsVPGCf9uDDkx4hNMeCfeIcEx47QF4+dHxsnHnETASWLEcRg0o+ooDjhhiePO6ZFRX+GCfwQ5VZxGqUop/fDbaUMRYPDy3S0XJw42AgClLsD25uAEp/ByGsdDWCyZdkkILiNoUuonbG9+Trdia+pQasD7i9M6y2WFZm0IOI3odSZszkPOuYXyjFOwjlgmO9EqFjFKenhHop1ojsop5te4XIytNshFqaOM1J5eVizAQI5bGF+mHW/u3pg+aYWW7ka73ktqOdOzrHBT3NczwKmTGBxwAll4xTmcM5JNCGbEEfhdjBjJZQKnmeCDYLiBiAvPOFxpw08d9AhB1raQaNCOpDIEnOMnvEl7ZnoryoLSiIbAmzjhwbLcpD6icn6n54yDMDy8iGs0+cnkLzdpzTgBnFoVCW++/miusqXfgUbUYAfE4jRgBHIYyXsOmwbUCbzYK/t/87QmszCAs8McJxA1OQ83LPqkzFrnV+0Rk5NAG6zkMPlOpWA61hnpRwvjF62jh1ic8NwHHpnDcsVSedSkJE0lwA4/vXmyeqiK04Q2PMzh89dQeBYP3QzLjEpOTXYFBQ+4T4tqRnL4MoCyo2qfm1O/UuQxOTxjT1cWd91LXWKwYwTEBHKS4Am1XPggBRHwHsTsfn08m0Hk+Vgil/y/jOh0wDvD4+SUT6YZz4edEIBiRfojPsc380B92sHLSOvKS9MRa3qE8x0QeeXThmfEB6g59ZI7fEc/y8V1AcwusKwDu4Ub7o2yPVZLHCgBZgJEF9EjFA6b/PD13MQPWhBZRAigL1AgVqXhucptKC06q6xHd+65FsByAxqnBtN5/IpSvIOtVpyeXwrrXRTyoUOIAfvMBSqTug3NrUqrAlhV6jIO/cLZHQaMBhFwHqFMCP+CnzuqTiQbcoZueAoI49B5GniqNsXiQjXP9barOlesnagtbyclDU8QQ8akFePhk+axazKfo8Fn2yF8or0DDRVyycdoMNQ4slxF0Xwv0s87rgOOgvc0BqUdHhcAtKiG+hLqbZ/kFktnrfUA4yeochco6ktazt0+Lir7r0bl6z8w6f01NgqeqkBIo3QzgRj1lzgA1wFDwdLub7HUYAKGSQ9mve9R3Qc2Bhyv3Snn/+W9YxLH29M+k9QkK4C2hb33J6TgewndGpkjy/kvkgpf5Vx/OkKozXxlup1P5P4HKT0f1w8aMyqhhlgqdsCrd78OA0x86RXUuPPfLHUADQvEaDRpSYIk8rw3+T0WEax6IVIrdnNN+ec3d59qeq7i7m88QeC14zoIjbpCJUhSyns1wtLK3K7WkdeVpKubIiRK75FC3v0N/5m8j2vYq3xQ3+F7ZViafvgSdcw3Ht7uk9g9yO5/WEtp+BT5GLPyDe63loNech9mlY325XZ8INZTkn7WHfWFQbvQVRsOJytZjy6RyY4cayMthjvVkQnOx8Zd0oPudYtZLdUPy5Jb1mh2+sLs51+BHy3ay/k9zzi+9ZUKoJXLX7buDNKWpMVBBhYJI6L1vmNa/NZSt8Ypb8PEbJ8N3zIUNlNb6I9Bz3t2Mieua3ltbCO0FDy1nHWFdtaIN9//hgypncT9YaNNNr+rS2Dax5zYQiWpLZ37zbheLK3g++ycp5Es+xEaySLst1G1lXeJrgfdfNzi+Gyfz7ERRJe9tXKJ8ac4bra6UuazPsi7/Gj1sufuxgi1Pvp2nHZn2uxnOz4fVCBx9sVXKeW6ElOD9ZvTsdhGVRi1xc5k2pi1BkRubWerSML3EKEApC6GJGU/SZWf1km0/SvoJ0L4Gq1ZS/g9UmJX+C/4BxGsxy8xC3cVAAAAAElFTkSuQmCC";
        if (game.device.ie && (e += "?" + Date.now()), this.symbol = new game.Sprite(game.system.width / 2 - 8, game.system.height / 2 + 70, PIXI.Texture.fromImage(e, !0), {anchor: {x: .5, y: 1}, rotation: -.1}), game.system.stage.addChild(this.symbol), game.Tween) {
            new game.Tween(this.symbol).to({rotation: .1}, 500).easing(game.Tween.Easing.Cubic.InOut).repeat(1 / 0).yoyo(!0).start()
        }
    }, start: function () {
        if (game.scene) {
            for (var t = game.system.stage.children.length - 1; t >= 0; t--)game.system.stage.removeChild(game.system.stage.children[t]);
            game.system.stage.setBackgroundColor(this.backgroundColor), game.system.stage.interactive = !1, game.system.stage.mousemove = game.system.stage.touchmove = null, game.system.stage.click = game.system.stage.tap = null, game.system.stage.mousedown = game.system.stage.touchstart = null, game.system.stage.mouseup = game.system.stage.mouseupoutside = game.system.stage.touchend = game.system.stage.touchendoutside = null, game.system.stage.mouseout = null
        }
        game.sound && game.sound.stopAll(), this.initStage(), this.assets.length > 0 ? this.loader.load() : this.loadAudio(), game.scene ? game.scene = this : this.loopId = game.setGameLoop(this.run.bind(this), game.system.canvas)
    }, error: function (t) {
        if (this.text && (this.text.setText("ERR"), this.text.updateTransform(), this.text.position.x = game.system.width / 2 - this.text.width / 2, this.text = null), t)throw t
    }, progress: function () {
        this.loaded++, this.percent = Math.round(this.loaded / (this.assets.length + this.sounds.length) * 100), this.onPercentChange()
    }, onPercentChange: function () {
        this.text && (this.text.setText(this.percent + "%"), this.text.updateTransform(), this.text.position.x = game.system.width / 2 - this.text.width / 2)
    }, loadAudio: function () {
        for (var t = this.sounds.length - 1; t >= 0; t--)game.audio.load(this.sounds[t], this.progress.bind(this))
    }, ready: function () {
        this.setScene()
    }, setScene: function () {
        if (game.system.retina || game.system.hires)for (var t in game.TextureCache)-1 !== t.indexOf("@2x") && (game.TextureCache[t.replace("@2x", "")] = game.TextureCache[t], delete game.TextureCache[t]);
        game.resources.length = 0, game.Audio.resources = {}, game.Timer.time = Number.MIN_VALUE, game.clearGameLoop(this.loopId), game.system.setScene(this.scene)
    }, run: function () {
        game.Timer.update(), this.update(), this.render()
    }, update: function () {
        game.TweenEngine && game.TweenEngine.update(), this.loaded === this.assets.length + this.sounds.length && this.timer.time() >= game.Loader.timeout && (this.timer.reset(), this.timer.pause(), this.ready())
    }, render: function () {
        game.system.renderer.render(game.system.stage)
    }}), game.Loader.getPath = function (t) {
        return game.system.retina || game.system.hires ? t.replace(/\.(?=[^.]*$)/, "@2x.") : t
    }, game.Loader.timeout = 500
}), game.module("engine.timer").body(function () {
    "use strict";
    game.Timer = game.Class.extend({target: 0, base: 0, last: 0, pauseTime: 0, init: function (t) {
        this.last = game.Timer.time, this.set(t)
    }, set: function (t) {
        "number" != typeof t && (t = 0), this.target = t || 0, this.reset()
    }, reset: function () {
        this.base = game.Timer.time, this.pauseTime = 0
    }, delta: function () {
        var t = game.Timer.time - this.last;
        return this.last = game.Timer.time, this.pauseTime ? 0 : t
    }, time: function () {
        return(this.pauseTime || game.Timer.time) - this.base - this.target
    }, pause: function () {
        this.pauseTime || (this.pauseTime = game.Timer.time)
    }, unpause: function () {
        this.pauseTime && (this.base += game.Timer.time - this.pauseTime, this.pauseTime = 0)
    }}), game.Timer.last = 0, game.Timer.time = Number.MIN_VALUE, game.Timer.speedFactor = 1, game.Timer.maxStep = 50, game.Timer.update = function () {
        var t = Date.now();
        game.Timer.time += Math.min(t - game.Timer.last, game.Timer.maxStep) * game.Timer.speedFactor, game.Timer.last = t
    }
}), game.module("engine.system").body(function () {
    "use strict";
    game.System = game.Class.extend({width: null, height: null, delta: 0, timer: null, canvas: null, canvasId: "canvas", paused: !1, hires: !1, retina: !1, gameLoopId: 0, newSceneClass: null, running: !1, init: function (t, e, i) {
        if (game.System.hires && window.innerWidth >= t * game.System.hiresFactor && window.innerHeight >= e * game.System.hiresFactor && (this.hires = !0), game.System.retina && 2 === game.device.pixelRatio && (this.retina = !0), (this.hires || this.retina) && (t *= 2, e *= 2, game.scale = 2), this.width = t, this.height = e, this.canvasId = i || this.canvasId, this.timer = new game.Timer, !document.getElementById(this.canvasId)) {
            var r = document.createElement(navigator.isCocoonJS && game.System.screenCanvas ? "screencanvas" : "canvas");
            r.id = this.canvasId, document.body.appendChild(r)
        }
        if (this.renderer = game.System.canvas ? new PIXI.CanvasRenderer(t, e, document.getElementById(this.canvasId), game.System.transparent) : new PIXI.autoDetectRenderer(t, e, document.getElementById(this.canvasId), game.System.transparent, game.System.antialias), this.canvas = this.renderer.view, this.stage = new PIXI.Stage(t, e), game.normalizeVendorAttribute(this.canvas, "requestFullscreen"), game.normalizeVendorAttribute(this.canvas, "requestFullScreen"), game.normalizeVendorAttribute(navigator, "vibrate"), document.body.style.margin = 0, this.retina ? (this.canvas.style.width = t / 2 + "px", this.canvas.style.height = e / 2 + "px") : (this.canvas.style.width = t + "px", this.canvas.style.height = e + "px"), !navigator.isCocoonJS) {
            var s;
            "undefined" != typeof document.hidden ? s = "visibilitychange" : "undefined" != typeof document.mozHidden ? s = "mozvisibilitychange" : "undefined" != typeof document.msHidden ? s = "msvisibilitychange" : "undefined" != typeof document.webkitHidden && (s = "webkitvisibilitychange"), document.addEventListener(s, function () {
                var t = !!game.getVendorAttribute(document, "hidden");
                t && game.System.pauseOnHide && game.system.pause(), !t && game.System.pauseOnHide && game.system.resume()
            }, !1)
        }
        window.addEventListener("devicemotion", function (t) {
            game.accelerometer = game.accel = t.accelerationIncludingGravity
        }, !1), navigator.isCocoonJS && (this.canvas.style.cssText = "idtkscale:" + game.System.idtkScale + ";"), game.renderer = this.renderer, navigator.isCocoonJS || this.initResize()
    }, vibrate: function (t) {
        return navigator.vibrate ? navigator.vibrate(t) : !1
    }, pause: function () {
        this.paused || (this.paused = !0, game.scene && game.scene.pause())
    }, resume: function () {
        this.paused && (this.paused = !1, game.scene && game.scene.resume())
    }, setScene: function (t) {
        this.running ? this.newSceneClass = t : this.setSceneNow(t)
    }, setSceneNow: function (t) {
        game.scene = new t, this.startRunLoop()
    }, startRunLoop: function () {
        this.gameLoopId && this.stopRunLoop(), this.gameLoopId = game.setGameLoop(this.run.bind(this), this.canvas), this.running = !0
    }, stopRunLoop: function () {
        game.clearGameLoop(this.gameLoopId), this.running = !1
    }, run: function () {
        this.paused || (game.debug && game.debug.stats.begin(), game.Timer.update(), this.delta = this.timer.delta() / 1e3, game.scene.run(), game.debug && game.debug.stats.end(), this.newSceneClass && (this.setSceneNow(this.newSceneClass), this.newSceneClass = null))
    }, initResize: function () {
        if (this.ratio = game.System.orientation === game.System.LANDSCAPE ? this.width / this.height : this.height / this.width, game.System.center && (this.canvas.style.margin = "auto"), game.device.mobile) {
            document.addEventListener("touchstart", function (t) {
                t.preventDefault()
            }, !1);
            var t = document.createElement("div");
            if (t.innerHTML = game.System.rotateImg ? "" : game.System.rotateMsg, t.id = "ig_rotateMsg", t.style.position = "absolute", t.style.height = "12px", t.style.textAlign = "center", t.style.left = 0, t.style.right = 0, t.style.top = 0, t.style.bottom = 0, t.style.margin = "auto", t.style.display = "none", game.System.rotateDiv = t, document.body.appendChild(game.System.rotateDiv), game.System.rotateImg) {
                var e = new Image, i = this;
                e.onload = function (e) {
                    t.image = e.target, t.appendChild(e.target), t.style.height = e.target.height + "px", i.resizeRotateImage()
                }, e.src = game.System.rotateImg, e.style.position = "relative"
            }
        } else if (this.canvas.style.position = "absolute", game.System.center ? (this.canvas.style.top = 0, this.canvas.style.left = 0, this.canvas.style.bottom = 0, this.canvas.style.right = 0) : (this.canvas.style.left = game.System.left + "px", this.canvas.style.top = game.System.top + "px"), game.System.resize) {
            var r = "auto" === game.System.minWidth ? this.retina ? this.width / 4 : this.width / 2 : game.System.minWidth, s = "auto" === game.System.minHeight ? this.retina ? this.height / 4 : this.height / 2 : game.System.minHeight, n = "auto" === game.System.maxWidth ? this.retina ? this.width / 2 : this.width : game.System.maxWidth, a = "auto" === game.System.maxHeight ? this.retina ? this.height / 2 : this.height : game.System.maxHeight;
            game.System.minWidth && (this.canvas.style.minWidth = r + "px"), game.System.minHeight && (this.canvas.style.minHeight = s + "px"), game.System.maxWidth && (this.canvas.style.maxWidth = n + "px"), game.System.maxHeight && (this.canvas.style.maxHeight = a + "px")
        }
        game.System.resize && (window.onresize = this.onResize.bind(this), this.onResize())
    }, checkOrientation: function () {
        this.orientation = window.innerWidth < window.innerHeight ? game.System.PORTRAIT : game.System.LANDSCAPE, game.System.rotateScreen = game.System.orientation !== this.orientation ? !0 : !1, this.canvas.style.display = game.System.rotateScreen ? "none" : "block", game.System.rotateDiv.style.display = game.System.rotateScreen ? "block" : "none", game.System.rotateScreen && game.System.backgroundColor.rotate && (document.body.style.backgroundColor = game.System.backgroundColor.rotate), !game.System.rotateScreen && game.System.backgroundColor.game && (document.body.style.backgroundColor = game.System.backgroundColor.game), game.System.rotateScreen && (document.body.style.backgroundImage = game.System.backgroundImage.rotate ? "url(" + game.System.backgroundImage.rotate + ")" : "none"), game.System.rotateScreen || (document.body.style.backgroundImage = game.System.backgroundImage.game ? "url(" + game.System.backgroundImage.game + ")" : "none"), game.System.rotateScreen && game.system && "function" == typeof game.system.pause && game.system.pause(), !game.System.rotateScreen && game.system && "function" == typeof game.system.resume && game.system.resume(), game.System.rotateScreen && this.resizeRotateImage()
    }, resizeRotateImage: function () {
        game.System.rotateScreen && game.System.rotateDiv.image && window.innerHeight < game.System.rotateDiv.image.height && (game.System.rotateDiv.image.style.height = window.innerHeight + "px", game.System.rotateDiv.image.style.width = "auto", game.System.rotateDiv.style.height = window.innerHeight + "px", game.System.rotateDiv.style.bottom = "auto")
    }, onResize: function () {
        if (game.device.mobile) {
            this.checkOrientation();
            var t = window.innerWidth, e = window.innerHeight;
            game.device.iPad && 671 === e && this.orientation === game.System.LANDSCAPE && (e = 672), game.System.orientation === game.System.LANDSCAPE ? (this.canvas.style.height = e + "px", this.canvas.style.width = e * this.ratio + "px") : (this.canvas.style.width = t + "px", this.canvas.style.height = t * this.ratio + "px"), window.scroll(0, 1)
        } else {
            if (0 === window.innerWidth)return;
            (window.innerWidth < this.width || window.innerHeight < this.height) && (window.innerWidth / this.width < window.innerHeight / this.height ? (this.canvas.style.width = window.innerWidth + "px", this.canvas.style.height = window.innerWidth * (this.height / this.width) + "px") : (this.canvas.style.height = window.innerHeight + "px", this.canvas.style.width = window.innerHeight * (this.width / this.height) + "px"))
        }
    }}), game.System.rotateScreen = !1, game.System.PORTRAIT = 0, game.System.LANDSCAPE = 1, game.System.center = !0, game.System.left = 0, game.System.top = 0, game.System.resize = !0, game.System.minWidth = "auto", game.System.minHeight = "auto", game.System.maxWidth = "auto", game.System.maxHeight = "auto", game.System.idtkScale = "ScaleAspectFit", game.System.screenCanvas = !0, game.System.hires = !1, game.System.hiresFactor = 1.5, game.System.retina = !1, game.System.pauseOnHide = !0, game.System.orientation = game.System.PORTRAIT, game.System.backgroundColor = {game: null, rotate: null}, game.System.backgroundImage = {game: null, rotate: null}, game.System.rotateMsg = "Please rotate your device", game.System.rotateImg = null, game.System.canvas = !0, game.System.transparent = !1, game.System.antialias = !1
}), game.module("engine.audio").body(function () {
    "use strict";
    game.Audio = game.Class.extend({format: null, sources: {}, context: null, gainNode: null, soundMuted: !1, soundVolume: 1, currentMusic: null, musicMuted: !1, musicVolume: 1, init: function () {
        if (game.normalizeVendorAttribute(window, "AudioContext"), game.device.wp && (game.Audio.enabled = !1), game.Audio.enabled || (game.Audio.webAudio = !1), game.Audio.webAudio && !window.AudioContext && (game.Audio.webAudio = !1), game.Audio.enabled)for (var t = new Audio, e = 0; e < game.Audio.formats.length; e++)if (t.canPlayType(game.Audio.formats[e].type)) {
            this.format = game.Audio.formats[e].ext;
            break
        }
        this.format || (game.Audio.enabled = !1), game.Audio.enabled && game.Audio.webAudio && (this.context = new AudioContext, this.context.createGain ? this.gainNode = this.context.createGain() : this.context.createGainNode && (this.gainNode = this.context.createGainNode()), this.gainNode.connect(this.context.destination))
    }, decode: function (t, e, i) {
        if (this.context) {
            if (!t.response)throw"Error loading audio: " + e;
            this.context.decodeAudioData(t.response, this.loaded.bind(this, e, i), this.loadError.bind(this, e))
        }
    }, load: function (t, e) {
        if (!game.Audio.enabled)return e ? e() : !1;
        var i = this.getPath(t);
        if (this.context) {
            var r = new XMLHttpRequest;
            r.open("GET", i, !0), r.responseType = "arraybuffer", r.onload = this.decode.bind(this, r, t, e), r.send()
        } else {
            var s = new Audio(i);
            s.loadCallback = this.loaded.bind(this, t, e, s), s.addEventListener("canplaythrough", s.loadCallback, !1), s.addEventListener("error", this.loadError.bind(this, t), !1), s.preload = "auto", s.load()
        }
    }, loaded: function (t, e, i) {
        if (this.sources[game.Audio.queue[t]])throw"Duplicate audio source: " + game.Audio.queue[t];
        if (!game.Audio.queue[t])throw"Cannot find audio resource: " + t;
        var r = game.Audio.queue[t];
        this.sources[r] = {clips: [], audio: i}, i instanceof Audio && (i.removeEventListener("canplaythrough", i.loadCallback, !1), i.addEventListener("ended", function () {
            this.playing = !1
        }, !1)), e && e(t)
    }, loadError: function (t) {
        throw"Error loading: " + t
    }, getPath: function (t) {
        return t.replace(/[^\.]+$/, this.format)
    }, play: function (t, e, i, r, s) {
        if (!this.sources[t])throw"Cannot find source: " + t;
        if (this.context) {
            var n = this.context.createBufferSource();
            n.buffer = this.sources[t].audio, n.loop = !!i, n.playbackRate.value = s || 1, n.onended = "function" == typeof r ? r.bind(this) : null;
            var a;
            this.context.createGain ? a = this.context.createGain() : this.context.createGainNode && (a = this.context.createGainNode()), a.gain.value = e || 1, a.connect(this.gainNode), n.connect(a), n.start ? n.start(0, this.sources[t].audio.pauseTime) : n.noteOn && n.noteOn(0, this.sources[t].audio.pauseTime), this.sources[t].clips.push(n), this.sources[t].audio.volume = a.gain.value, this.sources[t].audio.loop = n.loop, this.sources[t].audio.startTime = this.context.currentTime - this.sources[t].audio.pauseTime || 0
        } else this.sources[t].audio.volume = e || 1, this.sources[t].audio.loop = i, this.sources[t].audio.playing = !0, this.sources[t].audio.onended = "function" == typeof r ? r.bind(this) : null, this.sources[t].audio.play()
    }, stop: function (t) {
        if (!this.sources[t])throw"Cannot find source: " + t;
        if (this.context) {
            for (var e = 0; e < this.sources[t].clips.length; e++)this.sources[t].clips[e].stop ? this.sources[t].clips[e].stop(!0) : this.sources[t].clips[e].noteOff && this.sources[t].clips[e].noteOff(!0);
            this.sources[t].clips.length = 0, this.sources[t].audio.pauseTime = 0
        } else this.sources[t].audio.pause(), this.sources[t].audio.playing = !1, this.sources[t].audio.currentTime = 0
    }, pause: function (t) {
        if (!this.sources[t])throw"Cannot find source: " + t;
        if (this.context) {
            if (0 === this.sources[t].clips.length)return;
            for (var e = 0; e < this.sources[t].clips.length; e++)this.sources[t].clips[e].stop ? this.sources[t].clips[e].stop(!0) : this.sources[t].clips[e].noteOff && this.sources[t].clips[e].noteOff(!0);
            this.sources[t].clips.length = 0, this.sources[t].audio.pauseTime = this.context.currentTime - this.sources[t].audio.startTime, this.sources[t].audio.pauseTime > this.sources[t].audio.duration && !this.sources[t].audio.loop && (this.sources[t].audio.pauseTime = 0)
        } else(this.sources[t].audio.currentTime > 0 && this.sources[t].audio.currentTime < this.sources[t].audio.duration || this.sources[t].audio.loop) && this.sources[t].audio.pause()
    }, playSound: function (t, e, i, r, s) {
        game.Audio.enabled && (this.soundMuted || (i = i || 1, this.play(t, i * this.soundVolume, e, r, s)))
    }, stopSound: function (t) {
        if (game.Audio.enabled)if (t)this.stop(t); else for (var e in this.sources)this.stop(e)
    }, playMusic: function (t, e) {
        game.Audio.enabled && (this.musicMuted || (this.currentMusic && this.stop(this.currentMusic), this.currentMusic = t, e = e || 1, this.play(t, e * this.musicVolume, !0)))
    }, stopMusic: function () {
        game.Audio.enabled && (this.currentMusic && this.stop(this.currentMusic), this.currentMusic = null)
    }, pauseSound: function (t) {
        game.Audio.enabled && this.pause(t)
    }, pauseAll: function () {
        if (game.Audio.enabled)for (var t in this.sources)this.pause(t)
    }, resumeAll: function () {
        if (game.Audio.enabled)for (var t in this.sources)this.context ? this.sources[t].audio.pauseTime && this.play(t, this.sources[t].audio.volume, this.sources[t].audio.loop) : this.sources[t].audio.playing && this.sources[t].audio.play()
    }}), game.Audio.enabled = !0, game.Audio.webAudio = !0, game.Audio.formats = [
        {ext: "m4a", type: 'audio/mp4; codecs="mp4a.40.5"'},
        {ext: "ogg", type: 'audio/ogg; codecs="vorbis"'}
    ], game.Audio.queue = {}
}), game.module("engine.renderer").body(function () {
    "use strict";
    (function () {
        var t = window, e = e || {};
        e.WEBGL_RENDERER = 0, e.CANVAS_RENDERER = 1, e.VERSION = "v1.4.4", e.blendModes = {NORMAL: 0, ADD: 1, MULTIPLY: 2, SCREEN: 3, OVERLAY: 4, DARKEN: 5, LIGHTEN: 6, COLOR_DODGE: 7, COLOR_BURN: 8, HARD_LIGHT: 9, SOFT_LIGHT: 10, DIFFERENCE: 11, EXCLUSION: 12, HUE: 13, SATURATION: 14, COLOR: 15, LUMINOSITY: 16}, e.scaleModes = {DEFAULT: 0, LINEAR: 0, NEAREST: 1}, e.INTERACTION_FREQUENCY = 30, e.AUTO_PREVENT_DEFAULT = !0, e.RAD_TO_DEG = 180 / Math.PI, e.DEG_TO_RAD = Math.PI / 180, e.Point = function (t, e) {
            this.x = t || 0, this.y = e || 0
        }, e.Point.prototype.clone = function () {
            return new e.Point(this.x, this.y)
        }, e.Point.prototype.constructor = e.Point, e.Point.prototype.set = function (t, e) {
            this.x = t || 0, this.y = e || (0 !== e ? this.x : 0)
        }, e.Rectangle = function (t, e, i, r) {
            this.x = t || 0, this.y = e || 0, this.width = i || 0, this.height = r || 0
        }, e.Rectangle.prototype.clone = function () {
            return new e.Rectangle(this.x, this.y, this.width, this.height)
        }, e.Rectangle.prototype.contains = function (t, e) {
            if (this.width <= 0 || this.height <= 0)return!1;
            var i = this.x;
            if (t >= i && t <= i + this.width) {
                var r = this.y;
                if (e >= r && e <= r + this.height)return!0
            }
            return!1
        }, e.Rectangle.prototype.constructor = e.Rectangle, e.EmptyRectangle = new e.Rectangle(0, 0, 0, 0), e.Polygon = function (t) {
            if (t instanceof Array || (t = Array.prototype.slice.call(arguments)), "number" == typeof t[0]) {
                for (var i = [], r = 0, s = t.length; s > r; r += 2)i.push(new e.Point(t[r], t[r + 1]));
                t = i
            }
            this.points = t
        }, e.Polygon.prototype.clone = function () {
            for (var t = [], i = 0; i < this.points.length; i++)t.push(this.points[i].clone());
            return new e.Polygon(t)
        }, e.Polygon.prototype.contains = function (t, e) {
            for (var i = !1, r = 0, s = this.points.length - 1; r < this.points.length; s = r++) {
                var n = this.points[r].x, a = this.points[r].y, o = this.points[s].x, h = this.points[s].y, l = a > e != h > e && (o - n) * (e - a) / (h - a) + n > t;
                l && (i = !i)
            }
            return i
        }, e.Polygon.prototype.constructor = e.Polygon, e.Circle = function (t, e, i) {
            this.x = t || 0, this.y = e || 0, this.radius = i || 0
        }, e.Circle.prototype.clone = function () {
            return new e.Circle(this.x, this.y, this.radius)
        }, e.Circle.prototype.contains = function (t, e) {
            if (this.radius <= 0)return!1;
            var i = this.x - t, r = this.y - e, s = this.radius * this.radius;
            return i *= i, r *= r, s >= i + r
        }, e.Circle.prototype.constructor = e.Circle, e.Ellipse = function (t, e, i, r) {
            this.x = t || 0, this.y = e || 0, this.width = i || 0, this.height = r || 0
        }, e.Ellipse.prototype.clone = function () {
            return new e.Ellipse(this.x, this.y, this.width, this.height)
        }, e.Ellipse.prototype.contains = function (t, e) {
            if (this.width <= 0 || this.height <= 0)return!1;
            var i = (t - this.x) / this.width, r = (e - this.y) / this.height;
            return i *= i, r *= r, 1 >= i + r
        }, e.Ellipse.prototype.getBounds = function () {
            return new e.Rectangle(this.x, this.y, this.width, this.height)
        }, e.Ellipse.prototype.constructor = e.Ellipse, e.determineMatrixArrayType = function () {
            return"undefined" != typeof Float32Array ? Float32Array : Array
        }, e.Matrix2 = e.determineMatrixArrayType(), e.Matrix = function () {
            this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.tx = 0, this.ty = 0
        }, e.Matrix.prototype.fromArray = function (t) {
            this.a = t[0], this.b = t[1], this.c = t[3], this.d = t[4], this.tx = t[2], this.ty = t[5]
        }, e.Matrix.prototype.toArray = function (t) {
            this.array || (this.array = new Float32Array(9));
            var e = this.array;
            return t ? (this.array[0] = this.a, this.array[1] = this.c, this.array[2] = 0, this.array[3] = this.b, this.array[4] = this.d, this.array[5] = 0, this.array[6] = this.tx, this.array[7] = this.ty, this.array[8] = 1) : (this.array[0] = this.a, this.array[1] = this.b, this.array[2] = this.tx, this.array[3] = this.c, this.array[4] = this.d, this.array[5] = this.ty, this.array[6] = 0, this.array[7] = 0, this.array[8] = 1), e
        }, e.identityMatrix = new e.Matrix, e.DisplayObject = function () {
            this.position = new e.Point, this.scale = new e.Point(1, 1), this.pivot = new e.Point(0, 0), this.rotation = 0, this.alpha = 1, this.visible = !0, this.hitArea = null, this.buttonMode = !1, this.renderable = !1, this.parent = null, this.stage = null, this.worldAlpha = 1, this._interactive = !1, this.defaultCursor = "pointer", this.worldTransform = new e.Matrix, this.color = [], this.dynamic = !0, this._sr = 0, this._cr = 1, this.filterArea = new e.Rectangle(0, 0, 1, 1), this._bounds = new e.Rectangle(0, 0, 1, 1), this._currentBounds = null, this._mask = null
        }, e.DisplayObject.prototype.constructor = e.DisplayObject, e.DisplayObject.prototype.setInteractive = function (t) {
            this.interactive = t
        }, Object.defineProperty(e.DisplayObject.prototype, "interactive", {get: function () {
            return this._interactive
        }, set: function (t) {
            this._interactive = t, this.stage && (this.stage.dirty = !0)
        }}), Object.defineProperty(e.DisplayObject.prototype, "worldVisible", {get: function () {
            var t = this;
            do {
                if (!t.visible)return!1;
                t = t.parent
            } while (t);
            return!0
        }}), Object.defineProperty(e.DisplayObject.prototype, "mask", {get: function () {
            return this._mask
        }, set: function (t) {
            this._mask && (this._mask.isMask = !1), this._mask = t, this._mask && (this._mask.isMask = !0)
        }}), Object.defineProperty(e.DisplayObject.prototype, "filters", {get: function () {
            return this._filters
        }, set: function (t) {
            if (t) {
                for (var e = [], i = 0; i < t.length; i++)for (var r = t[i].passes, s = 0; s < r.length; s++)e.push(r[s]);
                this._filterBlock = {target: this, filterPasses: e}
            }
            this._filters = t
        }}), e.DisplayObject.prototype.updateTransform = function () {
            this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation));
            var t = this.parent.worldTransform, e = this.worldTransform, i = this.pivot.x, r = this.pivot.y, s = this._cr * this.scale.x, n = -this._sr * this.scale.y, a = this._sr * this.scale.x, o = this._cr * this.scale.y, h = this.position.x + s * i - r * n, l = this.position.y + o * r - i * a, u = t.a, c = t.b, d = t.c, p = t.d;
            e.a = u * s + c * a, e.b = u * n + c * o, e.tx = u * h + c * l + t.tx, e.c = d * s + p * a, e.d = d * n + p * o, e.ty = d * h + p * l + t.ty, this.worldAlpha = this.alpha * this.parent.worldAlpha
        }, e.DisplayObject.prototype.getBounds = function (t) {
            return t = t, e.EmptyRectangle
        }, e.DisplayObject.prototype.getLocalBounds = function () {
            return this.getBounds(e.identityMatrix)
        }, e.DisplayObject.prototype.setStageReference = function (t) {
            this.stage = t, this._interactive && (this.stage.dirty = !0)
        }, e.DisplayObject.prototype._renderWebGL = function (t) {
            t = t
        }, e.DisplayObject.prototype._renderCanvas = function (t) {
            t = t
        }, Object.defineProperty(e.DisplayObject.prototype, "x", {get: function () {
            return this.position.x
        }, set: function (t) {
            this.position.x = t
        }}), Object.defineProperty(e.DisplayObject.prototype, "y", {get: function () {
            return this.position.y
        }, set: function (t) {
            this.position.y = t
        }}), e.DisplayObjectContainer = function () {
            e.DisplayObject.call(this), this.children = []
        }, e.DisplayObjectContainer.prototype = Object.create(e.DisplayObject.prototype), e.DisplayObjectContainer.prototype.constructor = e.DisplayObjectContainer, e.DisplayObjectContainer.prototype.addChild = function (t) {
            this.addChildAt(t, this.children.length)
        }, e.DisplayObjectContainer.prototype.addChildAt = function (t, e) {
            if (!(e >= 0 && e <= this.children.length))throw new Error(t + " The index " + e + " supplied is out of bounds " + this.children.length);
            t.parent && t.parent.removeChild(t), t.parent = this, this.children.splice(e, 0, t), this.stage && t.setStageReference(this.stage)
        }, e.DisplayObjectContainer.prototype.swapChildren = function (t, e) {
            if (t !== e) {
                var i = this.children.indexOf(t), r = this.children.indexOf(e);
                if (0 > i || 0 > r)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
                this.children[i] = e, this.children[r] = t
            }
        }, e.DisplayObjectContainer.prototype.getChildAt = function (t) {
            if (t >= 0 && t < this.children.length)return this.children[t];
            throw new Error("The supplied DisplayObjects must be a child of the caller " + this)
        }, e.DisplayObjectContainer.prototype.removeChild = function (t) {
            var e = this.children.indexOf(t);
            if (-1 === e)throw new Error(t + " The supplied DisplayObject must be a child of the caller " + this);
            this.stage && t.removeStageReference(), t.parent = void 0, this.children.splice(e, 1)
        }, e.DisplayObjectContainer.prototype.removeAll = function () {
            for (var t = this.children.length - 1; t >= 0; t--)this.removeChild(this.children[t])
        }, e.DisplayObjectContainer.prototype.updateTransform = function () {
            if (this.visible) {
                e.DisplayObject.prototype.updateTransform.call(this);
                for (var t = 0, i = this.children.length; i > t; t++)this.children[t].updateTransform()
            }
        }, e.DisplayObjectContainer.prototype.getBounds = function (t) {
            if (0 === this.children.length)return e.EmptyRectangle;
            if (t) {
                var i = this.worldTransform;
                this.worldTransform = t, this.updateTransform(), this.worldTransform = i
            }
            for (var r, s, n, a = 1 / 0, o = 1 / 0, h = -1 / 0, l = -1 / 0, u = !1, c = 0, d = this.children.length; d > c; c++) {
                var p = this.children[c];
                p.visible && (u = !0, r = this.children[c].getBounds(t), a = a < r.x ? a : r.x, o = o < r.y ? o : r.y, s = r.width + r.x, n = r.height + r.y, h = h > s ? h : s, l = l > n ? l : n)
            }
            if (!u)return e.EmptyRectangle;
            var m = this._bounds;
            return m.x = a, m.y = o, m.width = h - a, m.height = l - o, m
        }, e.DisplayObjectContainer.prototype.getLocalBounds = function () {
            var t = this.worldTransform;
            this.worldTransform = e.identityMatrix;
            for (var i = 0, r = this.children.length; r > i; i++)this.children[i].updateTransform();
            var s = this.getBounds();
            return this.worldTransform = t, s
        }, e.DisplayObjectContainer.prototype.setStageReference = function (t) {
            this.stage = t, this._interactive && (this.stage.dirty = !0);
            for (var e = 0, i = this.children.length; i > e; e++) {
                var r = this.children[e];
                r.setStageReference(t)
            }
        }, e.DisplayObjectContainer.prototype.removeStageReference = function () {
            for (var t = 0, e = this.children.length; e > t; t++) {
                var i = this.children[t];
                i.removeStageReference()
            }
            this._interactive && (this.stage.dirty = !0), this.stage = null
        }, e.DisplayObjectContainer.prototype._renderWebGL = function (t) {
            if (this.visible && !(this.alpha <= 0)) {
                var e, i;
                if (this._mask || this._filters) {
                    for (this._mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), this._filters && (t.spriteBatch.flush(), t.filterManager.pushFilter(this._filterBlock)), e = 0, i = this.children.length; i > e; e++)this.children[e]._renderWebGL(t);
                    t.spriteBatch.stop(), this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(t), t.spriteBatch.start()
                } else for (e = 0, i = this.children.length; i > e; e++)this.children[e]._renderWebGL(t)
            }
        }, e.DisplayObjectContainer.prototype._renderCanvas = function (t) {
            if (this.visible !== !1 && 0 !== this.alpha) {
                this._mask && t.maskManager.pushMask(this._mask, t.context);
                for (var e = 0, i = this.children.length; i > e; e++) {
                    var r = this.children[e];
                    r._renderCanvas(t)
                }
                this._mask && t.maskManager.popMask(t.context)
            }
        }, e.Sprite = function (t) {
            e.DisplayObjectContainer.call(this), this.anchor = new e.Point, this.texture = t, this._width = 0, this._height = 0, this.tint = 16777215, this.blendMode = e.blendModes.NORMAL, t.baseTexture.hasLoaded ? this.onTextureUpdate() : (this.onTextureUpdateBind = this.onTextureUpdate.bind(this), this.texture.addEventListener("update", this.onTextureUpdateBind)), this.renderable = !0
        }, e.Sprite.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Sprite.prototype.constructor = e.Sprite, Object.defineProperty(e.Sprite.prototype, "width", {get: function () {
            return this.scale.x * this.texture.frame.width
        }, set: function (t) {
            this.scale.x = t / this.texture.frame.width, this._width = t
        }}), Object.defineProperty(e.Sprite.prototype, "height", {get: function () {
            return this.scale.y * this.texture.frame.height
        }, set: function (t) {
            this.scale.y = t / this.texture.frame.height, this._height = t
        }}), e.Sprite.prototype.setTexture = function (t) {
            this.texture.baseTexture !== t.baseTexture ? (this.textureChange = !0, this.texture = t) : this.texture = t, this.cachedTint = 16777215, this.updateFrame = !0
        }, e.Sprite.prototype.onTextureUpdate = function () {
            this._width && (this.scale.x = this._width / this.texture.frame.width), this._height && (this.scale.y = this._height / this.texture.frame.height), this.updateFrame = !0
        }, e.Sprite.prototype.getBounds = function (t) {
            var e = this.texture.frame.width, i = this.texture.frame.height, r = e * (1 - this.anchor.x), s = e * -this.anchor.x, n = i * (1 - this.anchor.y), a = i * -this.anchor.y, o = t || this.worldTransform, h = o.a, l = o.c, u = o.b, c = o.d, d = o.tx, p = o.ty, m = h * s + u * a + d, g = c * a + l * s + p, f = h * r + u * a + d, v = c * a + l * r + p, y = h * r + u * n + d, x = c * n + l * r + p, b = h * s + u * n + d, T = c * n + l * s + p, w = -1 / 0, S = -1 / 0, C = 1 / 0, A = 1 / 0;
            C = C > m ? m : C, C = C > f ? f : C, C = C > y ? y : C, C = C > b ? b : C, A = A > g ? g : A, A = A > v ? v : A, A = A > x ? x : A, A = A > T ? T : A, w = m > w ? m : w, w = f > w ? f : w, w = y > w ? y : w, w = b > w ? b : w, S = g > S ? g : S, S = v > S ? v : S, S = x > S ? x : S, S = T > S ? T : S;
            var E = this._bounds;
            return E.x = C, E.width = w - C, E.y = A, E.height = S - A, this._currentBounds = E, E
        }, e.Sprite.prototype._renderWebGL = function (t) {
            if (this.visible && !(this.alpha <= 0)) {
                var e, i;
                if (this._mask || this._filters) {
                    var r = t.spriteBatch;
                    for (this._mask && (r.stop(), t.maskManager.pushMask(this.mask, t), r.start()), this._filters && (r.flush(), t.filterManager.pushFilter(this._filterBlock)), r.render(this), e = 0, i = this.children.length; i > e; e++)this.children[e]._renderWebGL(t);
                    r.stop(), this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(t), r.start()
                } else for (t.spriteBatch.render(this), e = 0, i = this.children.length; i > e; e++)this.children[e]._renderWebGL(t)
            }
        }, e.Sprite.prototype._renderCanvas = function (t) {
            if (this.visible !== !1 && 0 !== this.alpha) {
                var i = this.texture.frame, r = t.context, s = this.texture;
                if (this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, r.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]), this._mask && t.maskManager.pushMask(this._mask, t.context), i && i.width && i.height && s.baseTexture.source) {
                    r.globalAlpha = this.worldAlpha;
                    var n = this.worldTransform;
                    if (t.roundPixels ? r.setTransform(n.a, n.c, n.b, n.d, n.tx || 0, n.ty || 0) : r.setTransform(n.a, n.c, n.b, n.d, n.tx, n.ty), t.smoothProperty && t.scaleMode !== this.texture.baseTexture.scaleMode && (t.scaleMode = this.texture.baseTexture.scaleMode, r[t.smoothProperty] = t.scaleMode === e.scaleModes.LINEAR), 16777215 !== this.tint) {
                        if (this.cachedTint !== this.tint) {
                            if (!s.baseTexture.hasLoaded)return;
                            this.cachedTint = this.tint, this.tintedTexture = e.CanvasTinter.getTintedTexture(this, this.tint)
                        }
                        r.drawImage(this.tintedTexture, 0, 0, i.width, i.height, this.anchor.x * -i.width, this.anchor.y * -i.height, i.width, i.height)
                    } else if (s.trim) {
                        var a = s.trim;
                        r.drawImage(this.texture.baseTexture.source, i.x, i.y, i.width, i.height, a.x - this.anchor.x * a.width, a.y - this.anchor.y * a.height, i.width, i.height)
                    } else r.drawImage(this.texture.baseTexture.source, i.x, i.y, i.width, i.height, this.anchor.x * -i.width, this.anchor.y * -i.height, i.width, i.height)
                }
                for (var o = 0, h = this.children.length; h > o; o++) {
                    var l = this.children[o];
                    l._renderCanvas(t)
                }
                this._mask && t.maskManager.popMask(t.context)
            }
        }, e.Sprite.fromFrame = function (t) {
            var i = e.TextureCache[t];
            if (!i)throw new Error('The frameId "' + t + '" does not exist in the texture cache' + this);
            return new e.Sprite(i)
        }, e.Sprite.fromImage = function (t) {
            var i = e.Texture.fromImage(t);
            return new e.Sprite(i)
        }, e.SpriteBatch = function (t) {
            e.DisplayObjectContainer.call(this), this.textureThing = t, this.ready = !1
        }, e.SpriteBatch.prototype = Object.create(e.DisplayObjectContainer.prototype), e.SpriteBatch.constructor = e.SpriteBatch, e.SpriteBatch.prototype.initWebGL = function (t) {
            this.fastSpriteBatch = new e.WebGLFastSpriteBatch(t), this.ready = !0
        }, e.SpriteBatch.prototype.updateTransform = function () {
            e.DisplayObject.prototype.updateTransform.call(this)
        }, e.SpriteBatch.prototype._renderWebGL = function (t) {
            !this.visible || this.alpha <= 0 || !this.children.length || (this.ready || this.initWebGL(t.gl), t.spriteBatch.stop(), t.shaderManager.activateShader(t.shaderManager.fastShader), this.fastSpriteBatch.begin(this, t), this.fastSpriteBatch.render(this), t.shaderManager.activateShader(t.shaderManager.defaultShader), t.spriteBatch.start())
        }, e.SpriteBatch.prototype._renderCanvas = function (t) {
            var i = t.context;
            i.globalAlpha = this.worldAlpha;
            var r = this.worldTransform;
            t.roundPixels ? i.setTransform(r.a, r.c, r.b, r.d, Math.floor(r.tx), Math.floor(r.ty)) : i.setTransform(r.a, r.c, r.b, r.d, r.tx, r.ty), i.save();
            for (var s = 0; s < this.children.length; s++) {
                var n = this.children[s], a = n.texture, o = a.frame;
                if (i.globalAlpha = this.worldAlpha * n.alpha, n.rotation % (2 * Math.PI) === 0)i.drawImage(a.baseTexture.source, o.x, o.y, o.width, o.height, n.anchor.x * -o.width * n.scale.x + n.position.x + .5 | 0, n.anchor.y * -o.height * n.scale.y + n.position.y + .5 | 0, o.width * n.scale.x, o.height * n.scale.y); else {
                    e.DisplayObject.prototype.updateTransform.call(n), r = n.localTransform, this.rotation !== this.rotationCache && (this.rotationCache = this.rotation, this._sr = Math.sin(this.rotation), this._cr = Math.cos(this.rotation));
                    var h = n._cr * n.scale.x, l = -n._sr * n.scale.y, u = n._sr * n.scale.x, c = n._cr * n.scale.y;
                    i.setTransform(h, u, l, c, n.position.x, n.position.y), i.drawImage(a.baseTexture.source, o.x, o.y, o.width, o.height, n.anchor.x * -o.width + .5 | 0, n.anchor.y * -o.height + .5 | 0, o.width, o.height)
                }
            }
            i.restore()
        }, e.MovieClip = function (t) {
            e.Sprite.call(this, t[0]), this.textures = t, this.animationSpeed = 1, this.loop = !0, this.onComplete = null, this.currentFrame = 0, this.playing = !1
        }, e.MovieClip.prototype = Object.create(e.Sprite.prototype), e.MovieClip.prototype.constructor = e.MovieClip, Object.defineProperty(e.MovieClip.prototype, "totalFrames", {get: function () {
            return this.textures.length
        }}), e.MovieClip.prototype.stop = function () {
            this.playing = !1
        }, e.MovieClip.prototype.play = function () {
            this.playing = !0
        }, e.MovieClip.prototype.gotoAndStop = function (t) {
            this.playing = !1, this.currentFrame = t;
            var e = this.currentFrame + .5 | 0;
            this.setTexture(this.textures[e % this.textures.length])
        }, e.MovieClip.prototype.gotoAndPlay = function (t) {
            this.currentFrame = t, this.playing = !0
        }, e.MovieClip.prototype.updateTransform = function () {
            if (e.Sprite.prototype.updateTransform.call(this), this.playing) {
                this.currentFrame += this.animationSpeed;
                var t = this.currentFrame + .5 | 0;
                this.loop || t < this.textures.length ? this.setTexture(this.textures[t % this.textures.length]) : t >= this.textures.length && (this.gotoAndStop(this.textures.length - 1), this.onComplete && this.onComplete())
            }
        }, e.FilterBlock = function () {
            this.visible = !0, this.renderable = !0
        }, e.Text = function (t, i) {
            this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), e.Sprite.call(this, e.Texture.fromCanvas(this.canvas)), this.setText(t), this.setStyle(i), this.updateText(), this.dirty = !1
        }, e.Text.prototype = Object.create(e.Sprite.prototype), e.Text.prototype.constructor = e.Text, e.Text.prototype.setStyle = function (t) {
            t = t || {}, t.font = t.font || "bold 20pt Arial", t.fill = t.fill || "black", t.align = t.align || "left", t.stroke = t.stroke || "black", t.strokeThickness = t.strokeThickness || 0, t.wordWrap = t.wordWrap || !1, t.wordWrapWidth = t.wordWrapWidth || 100, this.style = t, this.dirty = !0
        }, e.Text.prototype.setText = function (t) {
            this.text = t.toString() || " ", this.dirty = !0
        }, e.Text.prototype.updateText = function () {
            this.context.font = this.style.font;
            var t = this.text;
            this.style.wordWrap && (t = this.wordWrap(this.text));
            for (var i = t.split(/(?:\r\n|\r|\n)/), r = [], s = 0, n = 0; n < i.length; n++) {
                var a = this.context.measureText(i[n]).width;
                r[n] = a, s = Math.max(s, a)
            }
            this.canvas.width = s + this.style.strokeThickness;
            var o = this.determineFontHeight("font: " + this.style.font + ";") + this.style.strokeThickness;
            for (this.canvas.height = o * i.length, navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height), this.context.fillStyle = this.style.fill, this.context.font = this.style.font, this.context.strokeStyle = this.style.stroke, this.context.lineWidth = this.style.strokeThickness, this.context.textBaseline = "top", n = 0; n < i.length; n++) {
                var h = new e.Point(this.style.strokeThickness / 2, this.style.strokeThickness / 2 + n * o);
                "right" === this.style.align ? h.x += s - r[n] : "center" === this.style.align && (h.x += (s - r[n]) / 2), this.style.stroke && this.style.strokeThickness && this.context.strokeText(i[n], h.x, h.y), this.style.fill && this.context.fillText(i[n], h.x, h.y)
            }
            this.updateTexture()
        }, e.Text.prototype.updateTexture = function () {
            this.texture.baseTexture.width = this.canvas.width, this.texture.baseTexture.height = this.canvas.height, this.texture.frame.width = this.canvas.width, this.texture.frame.height = this.canvas.height, this._width = this.canvas.width, this._height = this.canvas.height, this.requiresUpdate = !0
        }, e.Text.prototype._renderWebGL = function (t) {
            this.requiresUpdate && (this.requiresUpdate = !1, e.updateWebGLTexture(this.texture.baseTexture, t.gl)), e.Sprite.prototype._renderWebGL.call(this, t)
        }, e.Text.prototype.updateTransform = function () {
            this.dirty && (this.updateText(), this.dirty = !1), e.Sprite.prototype.updateTransform.call(this)
        }, e.Text.prototype.determineFontHeight = function (t) {
            var i = e.Text.heightCache[t];
            if (!i) {
                var r = document.getElementsByTagName("body")[0], s = document.createElement("div"), n = document.createTextNode("M");
                s.appendChild(n), s.setAttribute("style", t + ";position:absolute;top:0;left:0"), r.appendChild(s), i = s.offsetHeight, e.Text.heightCache[t] = i, r.removeChild(s)
            }
            return i
        }, e.Text.prototype.wordWrap = function (t) {
            for (var e = "", i = t.split("\n"), r = 0; r < i.length; r++) {
                for (var s = this.style.wordWrapWidth, n = i[r].split(" "), a = 0; a < n.length; a++) {
                    var o = this.context.measureText(n[a]).width, h = o + this.context.measureText(" ").width;
                    h > s ? (a > 0 && (e += "\n"), e += n[a] + " ", s = this.style.wordWrapWidth - o) : (s -= h, e += n[a] + " ")
                }
                r < i.length - 1 && (e += "\n")
            }
            return e
        }, e.Text.prototype.destroy = function (t) {
            t && this.texture.destroy()
        }, e.Text.heightCache = {}, e.BitmapText = function (t, i) {
            e.DisplayObjectContainer.call(this), this._pool = [], this.setText(t), this.setStyle(i), this.updateText(), this.dirty = !1
        }, e.BitmapText.prototype = Object.create(e.DisplayObjectContainer.prototype), e.BitmapText.prototype.constructor = e.BitmapText, e.BitmapText.prototype.setText = function (t) {
            this.text = t || " ", this.dirty = !0
        }, e.BitmapText.prototype.setStyle = function (t) {
            t = t || {}, t.align = t.align || "left", this.style = t;
            var i = t.font.split(" ");
            this.fontName = i[i.length - 1], this.fontSize = i.length >= 2 ? parseInt(i[i.length - 2], 10) : e.BitmapText.fonts[this.fontName].size, this.dirty = !0, this.tint = t.tint
        }, e.BitmapText.prototype.updateText = function () {
            for (var t = e.BitmapText.fonts[this.fontName], i = new e.Point, r = null, s = [], n = 0, a = [], o = 0, h = this.fontSize / t.size, l = 0; l < this.text.length; l++) {
                var u = this.text.charCodeAt(l);
                if (/(?:\r\n|\r|\n)/.test(this.text.charAt(l)))a.push(i.x), n = Math.max(n, i.x), o++, i.x = 0, i.y += t.lineHeight, r = null; else {
                    var c = t.chars[u];
                    c && (r && c[r] && (i.x += c.kerning[r]), s.push({texture: c.texture, line: o, charCode: u, position: new e.Point(i.x + c.xOffset, i.y + c.yOffset)}), i.x += c.xAdvance, r = u)
                }
            }
            a.push(i.x), n = Math.max(n, i.x);
            var d = [];
            for (l = 0; o >= l; l++) {
                var p = 0;
                "right" === this.style.align ? p = n - a[l] : "center" === this.style.align && (p = (n - a[l]) / 2), d.push(p)
            }
            var m = this.children.length, g = s.length, f = this.tint || 16777215;
            for (l = 0; g > l; l++) {
                var v = m > l ? this.children[l] : this._pool.pop();
                v ? v.setTexture(s[l].texture) : v = new e.Sprite(s[l].texture), v.position.x = (s[l].position.x + d[s[l].line]) * h, v.position.y = s[l].position.y * h, v.scale.x = v.scale.y = h, v.tint = f, v.parent || this.addChild(v)
            }
            for (; this.children.length > g;) {
                var y = this.getChildAt(this.children.length - 1);
                this._pool.push(y), this.removeChild(y)
            }
            this.textWidth = n * h, this.textHeight = (i.y + t.lineHeight) * h
        }, e.BitmapText.prototype.updateTransform = function () {
            this.dirty && (this.updateText(), this.dirty = !1), e.DisplayObjectContainer.prototype.updateTransform.call(this)
        }, e.BitmapText.fonts = {}, e.InteractionData = function () {
            this.global = new e.Point, this.local = new e.Point, this.target = null, this.originalEvent = null
        }, e.InteractionData.prototype.getLocalPosition = function (t) {
            var i = t.worldTransform, r = this.global, s = i.a, n = i.b, a = i.tx, o = i.c, h = i.d, l = i.ty, u = 1 / (s * h + n * -o);
            return new e.Point(h * u * r.x + -n * u * r.y + (l * n - a * h) * u, s * u * r.y + -o * u * r.x + (-l * s + a * o) * u)
        }, e.InteractionData.prototype.constructor = e.InteractionData, e.InteractionManager = function (t) {
            this.stage = t, this.mouse = new e.InteractionData, this.touchs = {}, this.tempPoint = new e.Point, this.mouseoverEnabled = !0, this.pool = [], this.interactiveItems = [], this.interactionDOMElement = null, this.onMouseMove = this.onMouseMove.bind(this), this.onMouseDown = this.onMouseDown.bind(this), this.onMouseOut = this.onMouseOut.bind(this), this.onMouseUp = this.onMouseUp.bind(this), this.onTouchStart = this.onTouchStart.bind(this), this.onTouchEnd = this.onTouchEnd.bind(this), this.onTouchMove = this.onTouchMove.bind(this), this.last = 0, this.currentCursorStyle = "inherit", this.mouseOut = !1
        }, e.InteractionManager.prototype.constructor = e.InteractionManager, e.InteractionManager.prototype.collectInteractiveSprite = function (t, e) {
            for (var i = t.children, r = i.length, s = r - 1; s >= 0; s--) {
                var n = i[s];
                n.interactive ? (e.interactiveChildren = !0, this.interactiveItems.push(n), n.children.length > 0 && this.collectInteractiveSprite(n, n)) : (n.__iParent = null, n.children.length > 0 && this.collectInteractiveSprite(n, e))
            }
        }, e.InteractionManager.prototype.setTarget = function (t) {
            this.target = t, null === this.interactionDOMElement && this.setTargetDomElement(t.view)
        }, e.InteractionManager.prototype.setTargetDomElement = function (t) {
            this.removeEvents(), window.navigator.msPointerEnabled && (t.style["-ms-content-zooming"] = "none", t.style["-ms-touch-action"] = "none"), this.interactionDOMElement = t, t.addEventListener("mousemove", this.onMouseMove, !0), t.addEventListener("mousedown", this.onMouseDown, !0), t.addEventListener("mouseout", this.onMouseOut, !0), t.addEventListener("touchstart", this.onTouchStart, !0), t.addEventListener("touchend", this.onTouchEnd, !0), t.addEventListener("touchmove", this.onTouchMove, !0), window.addEventListener("mouseup", this.onMouseUp, !0)
        }, e.InteractionManager.prototype.removeEvents = function () {
            this.interactionDOMElement && (this.interactionDOMElement.style["-ms-content-zooming"] = "", this.interactionDOMElement.style["-ms-touch-action"] = "", this.interactionDOMElement.removeEventListener("mousemove", this.onMouseMove, !0), this.interactionDOMElement.removeEventListener("mousedown", this.onMouseDown, !0), this.interactionDOMElement.removeEventListener("mouseout", this.onMouseOut, !0), this.interactionDOMElement.removeEventListener("touchstart", this.onTouchStart, !0), this.interactionDOMElement.removeEventListener("touchend", this.onTouchEnd, !0), this.interactionDOMElement.removeEventListener("touchmove", this.onTouchMove, !0), this.interactionDOMElement = null, window.removeEventListener("mouseup", this.onMouseUp, !0))
        }, e.InteractionManager.prototype.update = function () {
            if (this.target) {
                var t = Date.now(), i = t - this.last;
                if (i = i * e.INTERACTION_FREQUENCY / 1e3, !(1 > i)) {
                    this.last = t;
                    var r = 0;
                    if (this.dirty) {
                        this.dirty = !1;
                        var s = this.interactiveItems.length;
                        for (r = 0; s > r; r++)this.interactiveItems[r].interactiveChildren = !1;
                        this.interactiveItems = [], this.stage.interactive && this.interactiveItems.push(this.stage), this.collectInteractiveSprite(this.stage, this.stage)
                    }
                    var n = this.interactiveItems.length, a = "inherit", o = !1;
                    for (r = 0; n > r; r++) {
                        var h = this.interactiveItems[r];
                        h.__hit = this.hitTest(h, this.mouse), this.mouse.target = h, h.__hit && !o ? (h.buttonMode && (a = h.defaultCursor), h.interactiveChildren || (o = !0), h.__isOver || (h.mouseover && h.mouseover(this.mouse), h.__isOver = !0)) : h.__isOver && (h.mouseout && h.mouseout(this.mouse), h.__isOver = !1)
                    }
                    this.currentCursorStyle !== a && (this.currentCursorStyle = a, this.interactionDOMElement.style.cursor = a)
                }
            }
        }, e.InteractionManager.prototype.onMouseMove = function (t) {
            this.mouse.originalEvent = t || window.event;
            var e = this.interactionDOMElement.getBoundingClientRect();
            this.mouse.global.x = (t.clientX - e.left) * (this.target.width / e.width), this.mouse.global.y = (t.clientY - e.top) * (this.target.height / e.height);
            for (var i = this.interactiveItems.length, r = 0; i > r; r++) {
                var s = this.interactiveItems[r];
                s.mousemove && s.mousemove(this.mouse)
            }
        }, e.InteractionManager.prototype.onMouseDown = function (t) {
            this.mouse.originalEvent = t || window.event, e.AUTO_PREVENT_DEFAULT && this.mouse.originalEvent.preventDefault();
            for (var i = this.interactiveItems.length, r = 0; i > r; r++) {
                var s = this.interactiveItems[r];
                if ((s.mousedown || s.click) && (s.__mouseIsDown = !0, s.__hit = this.hitTest(s, this.mouse), s.__hit && (s.mousedown && s.mousedown(this.mouse), s.__isDown = !0, !s.interactiveChildren)))break
            }
        }, e.InteractionManager.prototype.onMouseOut = function () {
            var t = this.interactiveItems.length;
            this.interactionDOMElement.style.cursor = "inherit";
            for (var e = 0; t > e; e++) {
                var i = this.interactiveItems[e];
                i.__isOver && (this.mouse.target = i, i.mouseout && i.mouseout(this.mouse), i.__isOver = !1)
            }
            this.mouseOut = !0, this.mouse.global.x = -1e4, this.mouse.global.y = -1e4
        }, e.InteractionManager.prototype.onMouseUp = function (t) {
            this.mouse.originalEvent = t || window.event;
            for (var e = this.interactiveItems.length, i = !1, r = 0; e > r; r++) {
                var s = this.interactiveItems[r];
                s.__hit = this.hitTest(s, this.mouse), s.__hit && !i ? (s.mouseup && s.mouseup(this.mouse), s.__isDown && s.click && s.click(this.mouse), s.interactiveChildren || (i = !0)) : s.__isDown && s.mouseupoutside && s.mouseupoutside(this.mouse), s.__isDown = !1
            }
        }, e.InteractionManager.prototype.hitTest = function (t, i) {
            var r = i.global;
            if (!t.worldVisible)return!1;
            var s = t instanceof e.Sprite, n = t.worldTransform, a = n.a, o = n.b, h = n.tx, l = n.c, u = n.d, c = n.ty, d = 1 / (a * u + o * -l), p = u * d * r.x + -o * d * r.y + (c * o - h * u) * d, m = a * d * r.y + -l * d * r.x + (-c * a + h * l) * d;
            if (i.target = t, t.hitArea && t.hitArea.contains)return t.hitArea.contains(p, m) ? (i.target = t, !0) : !1;
            if (s) {
                var g, f = t.texture.frame.width, v = t.texture.frame.height, y = -f * t.anchor.x;
                if (p > y && y + f > p && (g = -v * t.anchor.y, m > g && g + v > m))return i.target = t, !0
            }
            for (var x = t.children.length, b = 0; x > b; b++) {
                var T = t.children[b], w = this.hitTest(T, i);
                if (w)return i.target = t, !0
            }
            return!1
        }, e.InteractionManager.prototype.onTouchMove = function (t) {
            var e, i = this.interactionDOMElement.getBoundingClientRect(), r = t.changedTouches, s = 0;
            for (s = 0; s < r.length; s++) {
                var n = r[s];
                e = this.touchs[n.identifier], e.originalEvent = t || window.event, e.global.x = (n.clientX - i.left) * (this.target.width / i.width), e.global.y = (n.clientY - i.top) * (this.target.height / i.height), navigator.isCocoonJS && (e.global.x = n.clientX, e.global.y = n.clientY)
            }
            var a = this.interactiveItems.length;
            for (s = 0; a > s; s++) {
                var o = this.interactiveItems[s];
                o.touchmove && o.touchmove(e)
            }
        }, e.InteractionManager.prototype.onTouchStart = function (t) {
            var i = this.interactionDOMElement.getBoundingClientRect();
            e.AUTO_PREVENT_DEFAULT && t.preventDefault();
            for (var r = t.changedTouches, s = 0; s < r.length; s++) {
                var n = r[s], a = this.pool.pop();
                a || (a = new e.InteractionData), a.originalEvent = t || window.event, this.touchs[n.identifier] = a, a.global.x = (n.clientX - i.left) * (this.target.width / i.width), a.global.y = (n.clientY - i.top) * (this.target.height / i.height), navigator.isCocoonJS && (a.global.x = n.clientX, a.global.y = n.clientY);
                for (var o = this.interactiveItems.length, h = 0; o > h; h++) {
                    var l = this.interactiveItems[h];
                    if ((l.touchstart || l.tap) && (l.__hit = this.hitTest(l, a), l.__hit && (l.touchstart && l.touchstart(a), l.__isDown = !0, l.__touchData = a, !l.interactiveChildren)))break
                }
            }
        }, e.InteractionManager.prototype.onTouchEnd = function (t) {
            for (var e = this.interactionDOMElement.getBoundingClientRect(), i = t.changedTouches, r = 0; r < i.length; r++) {
                var s = i[r], n = this.touchs[s.identifier], a = !1;
                n.global.x = (s.clientX - e.left) * (this.target.width / e.width), n.global.y = (s.clientY - e.top) * (this.target.height / e.height), navigator.isCocoonJS && (n.global.x = s.clientX, n.global.y = s.clientY);
                for (var o = this.interactiveItems.length, h = 0; o > h; h++) {
                    var l = this.interactiveItems[h], u = l.__touchData;
                    l.__hit = this.hitTest(l, n), u === n && (n.originalEvent = t || window.event, (l.touchend || l.tap) && (l.__hit && !a ? (l.touchend && l.touchend(n), l.__isDown && l.tap && l.tap(n), l.interactiveChildren || (a = !0)) : l.__isDown && l.touchendoutside && l.touchendoutside(n), l.__isDown = !1), l.__touchData = null)
                }
                this.pool.push(n), this.touchs[s.identifier] = null
            }
        }, e.Stage = function (t) {
            e.DisplayObjectContainer.call(this), this.worldTransform = new e.Matrix, this.interactive = !0, this.interactionManager = new e.InteractionManager(this), this.dirty = !0, this.stage = this, this.stage.hitArea = new e.Rectangle(0, 0, 1e5, 1e5), this.setBackgroundColor(t)
        }, e.Stage.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Stage.prototype.constructor = e.Stage, e.Stage.prototype.setInteractionDelegate = function (t) {
            this.interactionManager.setTargetDomElement(t)
        }, e.Stage.prototype.updateTransform = function () {
            this.worldAlpha = 1;
            for (var t = 0, e = this.children.length; e > t; t++)this.children[t].updateTransform();
            this.dirty && (this.dirty = !1, this.interactionManager.dirty = !0), this.interactive && this.interactionManager.update()
        }, e.Stage.prototype.setBackgroundColor = function (t) {
            this.backgroundColor = t || 0, this.backgroundColorSplit = e.hex2rgb(this.backgroundColor);
            var i = this.backgroundColor.toString(16);
            i = "000000".substr(0, 6 - i.length) + i, this.backgroundColorString = "#" + i
        }, e.Stage.prototype.getMousePosition = function () {
            return this.interactionManager.mouse.global
        };
        for (var i = 0, s = ["ms", "moz", "webkit", "o"], n = 0; n < s.length && !window.requestAnimationFrame; ++n)window.requestAnimationFrame = window[s[n] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[s[n] + "CancelAnimationFrame"] || window[s[n] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function (t) {
            var e = (new Date).getTime(), r = Math.max(0, 16 - (e - i)), s = window.setTimeout(function () {
                t(e + r)
            }, r);
            return i = e + r, s
        }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function (t) {
            clearTimeout(t)
        }), window.requestAnimFrame = window.requestAnimationFrame, e.hex2rgb = function (t) {
            return[(t >> 16 & 255) / 255, (t >> 8 & 255) / 255, (255 & t) / 255]
        }, e.rgb2hex = function (t) {
            return(255 * t[0] << 16) + (255 * t[1] << 8) + 255 * t[2]
        }, "function" != typeof Function.prototype.bind && (Function.prototype.bind = function () {
            var t = Array.prototype.slice;
            return function (e) {
                function i() {
                    var n = s.concat(t.call(arguments));
                    r.apply(this instanceof i ? this : e, n)
                }

                var r = this, s = t.call(arguments, 1);
                if ("function" != typeof r)throw new TypeError;
                return i.prototype = function n(t) {
                    return t && (n.prototype = t), this instanceof n ? void 0 : new n
                }(r.prototype), i
            }
        }()), e.AjaxRequest = function () {
            var t = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.3.0", "Microsoft.XMLHTTP"];
            if (!window.ActiveXObject)return window.XMLHttpRequest ? new window.XMLHttpRequest : !1;
            for (var e = 0; e < t.length; e++)try {
                return new window.ActiveXObject(t[e])
            } catch (i) {
            }
        }, e.canUseNewCanvasBlendModes = function () {
            var t = document.createElement("canvas");
            t.width = 1, t.height = 1;
            var e = t.getContext("2d");
            return e.fillStyle = "#000", e.fillRect(0, 0, 1, 1), e.globalCompositeOperation = "multiply", e.fillStyle = "#fff", e.fillRect(0, 0, 1, 1), 0 === e.getImageData(0, 0, 1, 1).data[0]
        }, e.getNextPowerOfTwo = function (t) {
            if (t > 0 && 0 === (t & t - 1))return t;
            for (var e = 1; t > e;)e <<= 1;
            return e
        }, e.EventTarget = function () {
            var t = {};
            this.addEventListener = this.on = function (e, i) {
                void 0 === t[e] && (t[e] = []), -1 === t[e].indexOf(i) && t[e].push(i)
            }, this.dispatchEvent = this.emit = function (e) {
                if (t[e.type] && t[e.type].length)for (var i = 0, r = t[e.type].length; r > i; i++)t[e.type][i](e)
            }, this.removeEventListener = this.off = function (e, i) {
                var r = t[e].indexOf(i);
                -1 !== r && t[e].splice(r, 1)
            }, this.removeAllEventListeners = function (e) {
                var i = t[e];
                i && (i.length = 0)
            }
        }, e.autoDetectRenderer = function (t, i, r, s, n) {
            t || (t = 800), i || (i = 600);
            var a = function () {
                try {
                    var t = document.createElement("canvas");
                    return!!window.WebGLRenderingContext && (t.getContext("webgl") || t.getContext("experimental-webgl"))
                } catch (e) {
                    return!1
                }
            }();
            return a ? new e.WebGLRenderer(t, i, r, n, s) : new e.CanvasRenderer(t, i, r, n)
        }, e.PolyK = {}, e.PolyK.Triangulate = function (t) {
            var i = !0, r = t.length >> 1;
            if (3 > r)return[];
            for (var s = [], n = [], a = 0; r > a; a++)n.push(a);
            a = 0;
            for (var o = r; o > 3;) {
                var h = n[(a + 0) % o], l = n[(a + 1) % o], u = n[(a + 2) % o], c = t[2 * h], d = t[2 * h + 1], p = t[2 * l], m = t[2 * l + 1], g = t[2 * u], f = t[2 * u + 1], v = !1;
                if (e.PolyK._convex(c, d, p, m, g, f, i)) {
                    v = !0;
                    for (var y = 0; o > y; y++) {
                        var x = n[y];
                        if (x !== h && x !== l && x !== u && e.PolyK._PointInTriangle(t[2 * x], t[2 * x + 1], c, d, p, m, g, f)) {
                            v = !1;
                            break
                        }
                    }
                }
                if (v)s.push(h, l, u), n.splice((a + 1) % o, 1), o--, a = 0; else if (a++ > 3 * o) {
                    if (!i)return window.console.log("PIXI Warning: shape too complex to fill"), [];
                    for (s = [], n = [], a = 0; r > a; a++)n.push(a);
                    a = 0, o = r, i = !1
                }
            }
            return s.push(n[0], n[1], n[2]), s
        }, e.PolyK._PointInTriangle = function (t, e, i, r, s, n, a, o) {
            var h = a - i, l = o - r, u = s - i, c = n - r, d = t - i, p = e - r, m = h * h + l * l, g = h * u + l * c, f = h * d + l * p, v = u * u + c * c, y = u * d + c * p, x = 1 / (m * v - g * g), b = (v * f - g * y) * x, T = (m * y - g * f) * x;
            return b >= 0 && T >= 0 && 1 > b + T
        }, e.PolyK._convex = function (t, e, i, r, s, n, a) {
            return(e - r) * (s - i) + (i - t) * (n - r) >= 0 === a
        }, e.initDefaultShaders = function () {
        }, e.CompileVertexShader = function (t, i) {
            return e._CompileShader(t, i, t.VERTEX_SHADER)
        }, e.CompileFragmentShader = function (t, i) {
            return e._CompileShader(t, i, t.FRAGMENT_SHADER)
        }, e._CompileShader = function (t, e, i) {
            var r = e.join("\n"), s = t.createShader(i);
            return t.shaderSource(s, r), t.compileShader(s), t.getShaderParameter(s, t.COMPILE_STATUS) ? s : (window.console.log(t.getShaderInfoLog(s)), null)
        }, e.compileProgram = function (t, i, r) {
            var s = e.CompileFragmentShader(t, r), n = e.CompileVertexShader(t, i), a = t.createProgram();
            return t.attachShader(a, n), t.attachShader(a, s), t.linkProgram(a), t.getProgramParameter(a, t.LINK_STATUS) || window.console.log("Could not initialise shaders"), a
        }, e.PixiShader = function (t) {
            this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.textureCount = 0, this.attributes = [], this.init()
        }, e.PixiShader.prototype.init = function () {
            var t = this.gl, i = e.compileProgram(t, this.vertexSrc || e.PixiShader.defaultVertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute];
            for (var r in this.uniforms)this.uniforms[r].uniformLocation = t.getUniformLocation(i, r);
            this.initUniforms(), this.program = i
        }, e.PixiShader.prototype.initUniforms = function () {
            this.textureCount = 1;
            var t, e = this.gl;
            for (var i in this.uniforms) {
                t = this.uniforms[i];
                var r = t.type;
                "sampler2D" === r ? (t._init = !1, null !== t.value && this.initSampler2D(t)) : "mat2" === r || "mat3" === r || "mat4" === r ? (t.glMatrix = !0, t.glValueLength = 1, "mat2" === r ? t.glFunc = e.uniformMatrix2fv : "mat3" === r ? t.glFunc = e.uniformMatrix3fv : "mat4" === r && (t.glFunc = e.uniformMatrix4fv)) : (t.glFunc = e["uniform" + r], t.glValueLength = "2f" === r || "2i" === r ? 2 : "3f" === r || "3i" === r ? 3 : "4f" === r || "4i" === r ? 4 : 1)
            }
        }, e.PixiShader.prototype.initSampler2D = function (t) {
            if (t.value && t.value.baseTexture && t.value.baseTexture.hasLoaded) {
                var e = this.gl;
                if (e.activeTexture(e["TEXTURE" + this.textureCount]), e.bindTexture(e.TEXTURE_2D, t.value.baseTexture._glTexture), t.textureData) {
                    var i = t.textureData, r = i.magFilter ? i.magFilter : e.LINEAR, s = i.minFilter ? i.minFilter : e.LINEAR, n = i.wrapS ? i.wrapS : e.CLAMP_TO_EDGE, a = i.wrapT ? i.wrapT : e.CLAMP_TO_EDGE, o = i.luminance ? e.LUMINANCE : e.RGBA;
                    if (i.repeat && (n = e.REPEAT, a = e.REPEAT), e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, !!i.flipY), i.width) {
                        var h = i.width ? i.width : 512, l = i.height ? i.height : 2, u = i.border ? i.border : 0;
                        e.texImage2D(e.TEXTURE_2D, 0, o, h, l, u, o, e.UNSIGNED_BYTE, null)
                    } else e.texImage2D(e.TEXTURE_2D, 0, o, e.RGBA, e.UNSIGNED_BYTE, t.value.baseTexture.source);
                    e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, r), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, s), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, n), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, a)
                }
                e.uniform1i(t.uniformLocation, this.textureCount), t._init = !0, this.textureCount++
            }
        }, e.PixiShader.prototype.syncUniforms = function () {
            this.textureCount = 1;
            var t, i = this.gl;
            for (var r in this.uniforms)t = this.uniforms[r], 1 === t.glValueLength ? t.glMatrix === !0 ? t.glFunc.call(i, t.uniformLocation, t.transpose, t.value) : t.glFunc.call(i, t.uniformLocation, t.value) : 2 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y) : 3 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z) : 4 === t.glValueLength ? t.glFunc.call(i, t.uniformLocation, t.value.x, t.value.y, t.value.z, t.value.w) : "sampler2D" === t.type && (t._init ? (i.activeTexture(i["TEXTURE" + this.textureCount]), i.bindTexture(i.TEXTURE_2D, t.value.baseTexture._glTextures[i.id] || e.createWebGLTexture(t.value.baseTexture, i)), i.uniform1i(t.uniformLocation, this.textureCount), this.textureCount++) : this.initSampler2D(t))
        }, e.PixiShader.prototype.destroy = function () {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.PixiShader.defaultVertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute vec2 aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;", "   vColor = vec4(color * aColor.x, aColor.x);", "}"], e.PixiFastShader = function (t) {
            this.gl = t, this.program = null, this.fragmentSrc = ["precision lowp float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aPositionCoord;", "attribute vec2 aScale;", "attribute float aRotation;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform mat3 uMatrix;", "varying vec2 vTextureCoord;", "varying float vColor;", "const vec2 center = vec2(-1.0, 1.0);", "void main(void) {", "   vec2 v;", "   vec2 sv = aVertexPosition * aScale;", "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);", "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);", "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;", "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"], this.textureCount = 0, this.init()
        }, e.PixiFastShader.prototype.init = function () {
            var t = this.gl, i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.dimensions = t.getUniformLocation(i, "dimensions"), this.uMatrix = t.getUniformLocation(i, "uMatrix"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aPositionCoord = t.getAttribLocation(i, "aPositionCoord"), this.aScale = t.getAttribLocation(i, "aScale"), this.aRotation = t.getAttribLocation(i, "aRotation"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.colorAttribute = t.getAttribLocation(i, "aColor"), -1 === this.colorAttribute && (this.colorAttribute = 2), this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute], this.program = i
        }, e.PixiFastShader.prototype.destroy = function () {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attributes = null
        }, e.StripShader = function () {
            this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying float vColor;", "uniform float alpha;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));", "   gl_FragColor = gl_FragColor * alpha;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec2 aTextureCoord;", "attribute float aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "varying vec2 vTextureCoord;", "uniform vec2 offsetVector;", "varying float vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);", "   vTextureCoord = aTextureCoord;", "   vColor = aColor;", "}"]
        }, e.StripShader.prototype.init = function () {
            var t = e.gl, i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.uSampler = t.getUniformLocation(i, "uSampler"), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.aTextureCoord = t.getAttribLocation(i, "aTextureCoord"), this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.PrimitiveShader = function (t) {
            this.gl = t, this.program = null, this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"], this.vertexSrc = ["attribute vec2 aVertexPosition;", "attribute vec4 aColor;", "uniform mat3 translationMatrix;", "uniform vec2 projectionVector;", "uniform vec2 offsetVector;", "uniform float alpha;", "uniform vec3 tint;", "varying vec4 vColor;", "void main(void) {", "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);", "   v -= offsetVector.xyx;", "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);", "   vColor = aColor * vec4(tint * alpha, alpha);", "}"], this.init()
        }, e.PrimitiveShader.prototype.init = function () {
            var t = this.gl, i = e.compileProgram(t, this.vertexSrc, this.fragmentSrc);
            t.useProgram(i), this.projectionVector = t.getUniformLocation(i, "projectionVector"), this.offsetVector = t.getUniformLocation(i, "offsetVector"), this.tintColor = t.getUniformLocation(i, "tint"), this.aVertexPosition = t.getAttribLocation(i, "aVertexPosition"), this.colorAttribute = t.getAttribLocation(i, "aColor"), this.attributes = [this.aVertexPosition, this.colorAttribute], this.translationMatrix = t.getUniformLocation(i, "translationMatrix"), this.alpha = t.getUniformLocation(i, "alpha"), this.program = i
        }, e.PrimitiveShader.prototype.destroy = function () {
            this.gl.deleteProgram(this.program), this.uniforms = null, this.gl = null, this.attribute = null
        }, e.WebGLGraphics = function () {
        }, e.WebGLGraphics.renderGraphics = function (t, i) {
            var r = i.gl, s = i.projection, n = i.offset, a = i.shaderManager.primitiveShader;
            t._webGL[r.id] || (t._webGL[r.id] = {points: [], indices: [], lastIndex: 0, buffer: r.createBuffer(), indexBuffer: r.createBuffer()});
            var o = t._webGL[r.id];
            t.dirty && (t.dirty = !1, t.clearDirty && (t.clearDirty = !1, o.lastIndex = 0, o.points = [], o.indices = []), e.WebGLGraphics.updateGraphics(t, r)), i.shaderManager.activatePrimitiveShader(), r.blendFunc(r.ONE, r.ONE_MINUS_SRC_ALPHA), r.uniformMatrix3fv(a.translationMatrix, !1, t.worldTransform.toArray(!0)), r.uniform2f(a.projectionVector, s.x, -s.y), r.uniform2f(a.offsetVector, -n.x, -n.y), r.uniform3fv(a.tintColor, e.hex2rgb(t.tint)), r.uniform1f(a.alpha, t.worldAlpha), r.bindBuffer(r.ARRAY_BUFFER, o.buffer), r.vertexAttribPointer(a.aVertexPosition, 2, r.FLOAT, !1, 24, 0), r.vertexAttribPointer(a.colorAttribute, 4, r.FLOAT, !1, 24, 8), r.bindBuffer(r.ELEMENT_ARRAY_BUFFER, o.indexBuffer), r.drawElements(r.TRIANGLE_STRIP, o.indices.length, r.UNSIGNED_SHORT, 0), i.shaderManager.deactivatePrimitiveShader()
        }, e.WebGLGraphics.updateGraphics = function (t, i) {
            for (var r = t._webGL[i.id], s = r.lastIndex; s < t.graphicsData.length; s++) {
                var n = t.graphicsData[s];
                n.type === e.Graphics.POLY ? (n.fill && n.points.length > 3 && e.WebGLGraphics.buildPoly(n, r), n.lineWidth > 0 && e.WebGLGraphics.buildLine(n, r)) : n.type === e.Graphics.RECT ? e.WebGLGraphics.buildRectangle(n, r) : (n.type === e.Graphics.CIRC || n.type === e.Graphics.ELIP) && e.WebGLGraphics.buildCircle(n, r)
            }
            r.lastIndex = t.graphicsData.length, r.glPoints = new Float32Array(r.points), i.bindBuffer(i.ARRAY_BUFFER, r.buffer), i.bufferData(i.ARRAY_BUFFER, r.glPoints, i.STATIC_DRAW), r.glIndicies = new Uint16Array(r.indices), i.bindBuffer(i.ELEMENT_ARRAY_BUFFER, r.indexBuffer), i.bufferData(i.ELEMENT_ARRAY_BUFFER, r.glIndicies, i.STATIC_DRAW)
        }, e.WebGLGraphics.buildRectangle = function (t, i) {
            var r = t.points, s = r[0], n = r[1], a = r[2], o = r[3];
            if (t.fill) {
                var h = e.hex2rgb(t.fillColor), l = t.fillAlpha, u = h[0] * l, c = h[1] * l, d = h[2] * l, p = i.points, m = i.indices, g = p.length / 6;
                p.push(s, n), p.push(u, c, d, l), p.push(s + a, n), p.push(u, c, d, l), p.push(s, n + o), p.push(u, c, d, l), p.push(s + a, n + o), p.push(u, c, d, l), m.push(g, g, g + 1, g + 2, g + 3, g + 3)
            }
            if (t.lineWidth) {
                var f = t.points;
                t.points = [s, n, s + a, n, s + a, n + o, s, n + o, s, n], e.WebGLGraphics.buildLine(t, i), t.points = f
            }
        }, e.WebGLGraphics.buildCircle = function (t, i) {
            var r = t.points, s = r[0], n = r[1], a = r[2], o = r[3], h = 40, l = 2 * Math.PI / h, u = 0;
            if (t.fill) {
                var c = e.hex2rgb(t.fillColor), d = t.fillAlpha, p = c[0] * d, m = c[1] * d, g = c[2] * d, f = i.points, v = i.indices, y = f.length / 6;
                for (v.push(y), u = 0; h + 1 > u; u++)f.push(s, n, p, m, g, d), f.push(s + Math.sin(l * u) * a, n + Math.cos(l * u) * o, p, m, g, d), v.push(y++, y++);
                v.push(y - 1)
            }
            if (t.lineWidth) {
                var x = t.points;
                for (t.points = [], u = 0; h + 1 > u; u++)t.points.push(s + Math.sin(l * u) * a, n + Math.cos(l * u) * o);
                e.WebGLGraphics.buildLine(t, i), t.points = x
            }
        }, e.WebGLGraphics.buildLine = function (t, i) {
            var r = 0, s = t.points;
            if (0 !== s.length) {
                if (t.lineWidth % 2)for (r = 0; r < s.length; r++)s[r] += .5;
                var n = new e.Point(s[0], s[1]), a = new e.Point(s[s.length - 2], s[s.length - 1]);
                if (n.x === a.x && n.y === a.y) {
                    s.pop(), s.pop(), a = new e.Point(s[s.length - 2], s[s.length - 1]);
                    var o = a.x + .5 * (n.x - a.x), h = a.y + .5 * (n.y - a.y);
                    s.unshift(o, h), s.push(o, h)
                }
                var l, u, c, d, p, m, g, f, v, y, x, b, T, w, S, C, A, E, M, L, R, _, P, F = i.points, I = i.indices, B = s.length / 2, D = s.length, O = F.length / 6, k = t.lineWidth / 2, G = e.hex2rgb(t.lineColor), j = t.lineAlpha, U = G[0] * j, N = G[1] * j, W = G[2] * j;
                for (c = s[0], d = s[1], p = s[2], m = s[3], v = -(d - m), y = c - p, P = Math.sqrt(v * v + y * y), v /= P, y /= P, v *= k, y *= k, F.push(c - v, d - y, U, N, W, j), F.push(c + v, d + y, U, N, W, j), r = 1; B - 1 > r; r++)c = s[2 * (r - 1)], d = s[2 * (r - 1) + 1], p = s[2 * r], m = s[2 * r + 1], g = s[2 * (r + 1)], f = s[2 * (r + 1) + 1], v = -(d - m), y = c - p, P = Math.sqrt(v * v + y * y), v /= P, y /= P, v *= k, y *= k, x = -(m - f), b = p - g, P = Math.sqrt(x * x + b * b), x /= P, b /= P, x *= k, b *= k, S = -y + d - (-y + m), C = -v + p - (-v + c), A = (-v + c) * (-y + m) - (-v + p) * (-y + d), E = -b + f - (-b + m), M = -x + p - (-x + g), L = (-x + g) * (-b + m) - (-x + p) * (-b + f), R = S * M - E * C, Math.abs(R) < .1 ? (R += 10.1, F.push(p - v, m - y, U, N, W, j), F.push(p + v, m + y, U, N, W, j)) : (l = (C * L - M * A) / R, u = (E * A - S * L) / R, _ = (l - p) * (l - p) + (u - m) + (u - m), _ > 19600 ? (T = v - x, w = y - b, P = Math.sqrt(T * T + w * w), T /= P, w /= P, T *= k, w *= k, F.push(p - T, m - w), F.push(U, N, W, j), F.push(p + T, m + w), F.push(U, N, W, j), F.push(p - T, m - w), F.push(U, N, W, j), D++) : (F.push(l, u), F.push(U, N, W, j), F.push(p - (l - p), m - (u - m)), F.push(U, N, W, j)));
                for (c = s[2 * (B - 2)], d = s[2 * (B - 2) + 1], p = s[2 * (B - 1)], m = s[2 * (B - 1) + 1], v = -(d - m), y = c - p, P = Math.sqrt(v * v + y * y), v /= P, y /= P, v *= k, y *= k, F.push(p - v, m - y), F.push(U, N, W, j), F.push(p + v, m + y), F.push(U, N, W, j), I.push(O), r = 0; D > r; r++)I.push(O++);
                I.push(O - 1)
            }
        }, e.WebGLGraphics.buildPoly = function (t, i) {
            var r = t.points;
            if (!(r.length < 6)) {
                var s = i.points, n = i.indices, a = r.length / 2, o = e.hex2rgb(t.fillColor), h = t.fillAlpha, l = o[0] * h, u = o[1] * h, c = o[2] * h, d = e.PolyK.Triangulate(r), p = s.length / 6, m = 0;
                for (m = 0; m < d.length; m += 3)n.push(d[m] + p), n.push(d[m] + p), n.push(d[m + 1] + p), n.push(d[m + 2] + p), n.push(d[m + 2] + p);
                for (m = 0; a > m; m++)s.push(r[2 * m], r[2 * m + 1], l, u, c, h)
            }
        }, e.glContexts = [], e.WebGLRenderer = function (t, i, r, s, n) {
            e.defaultRenderer || (e.defaultRenderer = this), this.type = e.WEBGL_RENDERER, this.transparent = !!s, this.width = t || 800, this.height = i || 600, this.view = r || document.createElement("canvas"), this.view.width = this.width, this.view.height = this.height, this.contextLost = this.handleContextLost.bind(this), this.contextRestoredLost = this.handleContextRestored.bind(this), this.view.addEventListener("webglcontextlost", this.contextLost, !1), this.view.addEventListener("webglcontextrestored", this.contextRestoredLost, !1), this.options = {alpha: this.transparent, antialias: !!n, premultipliedAlpha: !!s, stencil: !0};
            try {
                this.gl = this.view.getContext("experimental-webgl", this.options)
            } catch (a) {
                try {
                    this.gl = this.view.getContext("webgl", this.options)
                } catch (o) {
                    throw new Error(" This browser does not support webGL. Try using the canvas renderer" + this)
                }
            }
            var h = this.gl;
            this.glContextId = h.id = e.WebGLRenderer.glContextId++, e.glContexts[this.glContextId] = h, e.blendModesWebGL || (e.blendModesWebGL = [], e.blendModesWebGL[e.blendModes.NORMAL] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.ADD] = [h.SRC_ALPHA, h.DST_ALPHA], e.blendModesWebGL[e.blendModes.MULTIPLY] = [h.DST_COLOR, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.SCREEN] = [h.SRC_ALPHA, h.ONE], e.blendModesWebGL[e.blendModes.OVERLAY] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.DARKEN] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.LIGHTEN] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.COLOR_DODGE] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.COLOR_BURN] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.HARD_LIGHT] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.SOFT_LIGHT] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.DIFFERENCE] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.EXCLUSION] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.HUE] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.SATURATION] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.COLOR] = [h.ONE, h.ONE_MINUS_SRC_ALPHA], e.blendModesWebGL[e.blendModes.LUMINOSITY] = [h.ONE, h.ONE_MINUS_SRC_ALPHA]), this.projection = new e.Point, this.projection.x = this.width / 2, this.projection.y = -this.height / 2, this.offset = new e.Point(0, 0), this.resize(this.width, this.height), this.contextLost = !1, this.shaderManager = new e.WebGLShaderManager(h), this.spriteBatch = new e.WebGLSpriteBatch(h), this.maskManager = new e.WebGLMaskManager(h), this.filterManager = new e.WebGLFilterManager(h, this.transparent), this.renderSession = {}, this.renderSession.gl = this.gl, this.renderSession.drawCount = 0, this.renderSession.shaderManager = this.shaderManager, this.renderSession.maskManager = this.maskManager, this.renderSession.filterManager = this.filterManager, this.renderSession.spriteBatch = this.spriteBatch, h.useProgram(this.shaderManager.defaultShader.program), h.disable(h.DEPTH_TEST), h.disable(h.CULL_FACE), h.enable(h.BLEND), h.colorMask(!0, !0, !0, this.transparent)
        }, e.WebGLRenderer.prototype.constructor = e.WebGLRenderer, e.WebGLRenderer.prototype.render = function (t) {
            if (!this.contextLost) {
                this.__stage !== t && (t.interactive && t.interactionManager.removeEvents(), this.__stage = t), e.WebGLRenderer.updateTextures(), t.updateTransform();
                var i = this.gl;
                i.viewport(0, 0, this.width, this.height), i.bindFramebuffer(i.FRAMEBUFFER, null), this.transparent ? i.clearColor(0, 0, 0, 0) : i.clearColor(t.backgroundColorSplit[0], t.backgroundColorSplit[1], t.backgroundColorSplit[2], 1), i.clear(i.COLOR_BUFFER_BIT), this.renderDisplayObject(t, this.projection), t.interactive ? t._interactiveEventsAdded || (t._interactiveEventsAdded = !0, t.interactionManager.setTarget(this)) : t._interactiveEventsAdded && (t._interactiveEventsAdded = !1, t.interactionManager.setTarget(this))
            }
        }, e.WebGLRenderer.prototype.renderDisplayObject = function (t, e, i) {
            this.renderSession.drawCount = 0, this.renderSession.currentBlendMode = 9999, this.renderSession.projection = e, this.renderSession.offset = this.offset, this.spriteBatch.begin(this.renderSession), this.filterManager.begin(this.renderSession, i), t._renderWebGL(this.renderSession), this.spriteBatch.end()
        }, e.WebGLRenderer.updateTextures = function () {
            var t = 0;
            for (t = 0; t < e.Texture.frameUpdates.length; t++)e.WebGLRenderer.updateTextureFrame(e.Texture.frameUpdates[t]);
            for (t = 0; t < e.texturesToDestroy.length; t++)e.WebGLRenderer.destroyTexture(e.texturesToDestroy[t]);
            e.texturesToUpdate.length = 0, e.texturesToDestroy.length = 0, e.Texture.frameUpdates.length = 0
        }, e.WebGLRenderer.destroyTexture = function (t) {
            for (var i = t._glTextures.length - 1; i >= 0; i--) {
                var r = t._glTextures[i], s = e.glContexts[i];
                s && r && s.deleteTexture(r)
            }
            t._glTextures.length = 0
        }, e.WebGLRenderer.updateTextureFrame = function (t) {
            t.updateFrame = !1, t._updateWebGLuvs()
        }, e.WebGLRenderer.prototype.resize = function (t, e) {
            this.width = t, this.height = e, this.view.width = t, this.view.height = e, this.gl.viewport(0, 0, this.width, this.height), this.projection.x = this.width / 2, this.projection.y = -this.height / 2
        }, e.createWebGLTexture = function (t, i) {
            return t.hasLoaded && (t._glTextures[i.id] = i.createTexture(), i.bindTexture(i.TEXTURE_2D, t._glTextures[i.id]), i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !0), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, i.RGBA, i.UNSIGNED_BYTE, t.source), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), t._powerOf2 ? (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.REPEAT), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.REPEAT)) : (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.CLAMP_TO_EDGE)), i.bindTexture(i.TEXTURE_2D, null)), t._glTextures[i.id]
        }, e.updateWebGLTexture = function (t, i) {
            t._glTextures[i.id] && (i.bindTexture(i.TEXTURE_2D, t._glTextures[i.id]), i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !0), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, i.RGBA, i.UNSIGNED_BYTE, t.source), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MIN_FILTER, t.scaleMode === e.scaleModes.LINEAR ? i.LINEAR : i.NEAREST), t._powerOf2 ? (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.REPEAT), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.REPEAT)) : (i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_S, i.CLAMP_TO_EDGE), i.texParameteri(i.TEXTURE_2D, i.TEXTURE_WRAP_T, i.CLAMP_TO_EDGE)), i.bindTexture(i.TEXTURE_2D, null))
        }, e.WebGLRenderer.prototype.handleContextLost = function (t) {
            t.preventDefault(), this.contextLost = !0
        }, e.WebGLRenderer.prototype.handleContextRestored = function () {
            try {
                this.gl = this.view.getContext("experimental-webgl", this.options)
            } catch (t) {
                try {
                    this.gl = this.view.getContext("webgl", this.options)
                } catch (i) {
                    throw new Error(" This browser does not support webGL. Try using the canvas renderer" + this)
                }
            }
            var r = this.gl;
            r.id = e.WebGLRenderer.glContextId++, this.shaderManager.setContext(r), this.spriteBatch.setContext(r), this.maskManager.setContext(r), this.filterManager.setContext(r), this.renderSession.gl = this.gl, r.disable(r.DEPTH_TEST), r.disable(r.CULL_FACE), r.enable(r.BLEND), r.colorMask(!0, !0, !0, this.transparent), this.gl.viewport(0, 0, this.width, this.height);
            for (var s in e.TextureCache) {
                var n = e.TextureCache[s].baseTexture;
                n._glTextures = []
            }
            this.contextLost = !1
        }, e.WebGLRenderer.prototype.destroy = function () {
            this.view.removeEventListener("webglcontextlost", this.contextLost), this.view.removeEventListener("webglcontextrestored", this.contextRestoredLost), e.glContexts[this.glContextId] = null, this.projection = null, this.offset = null, this.shaderManager.destroy(), this.spriteBatch.destroy(), this.maskManager.destroy(), this.filterManager.destroy(), this.shaderManager = null, this.spriteBatch = null, this.maskManager = null, this.filterManager = null, this.gl = null, this.renderSession = null
        }, e.WebGLRenderer.glContextId = 0, e.WebGLMaskManager = function (t) {
            this.maskStack = [], this.maskPosition = 0, this.setContext(t)
        }, e.WebGLMaskManager.prototype.setContext = function (t) {
            this.gl = t
        }, e.WebGLMaskManager.prototype.pushMask = function (t, i) {
            var r = this.gl;
            0 === this.maskStack.length && (r.enable(r.STENCIL_TEST), r.stencilFunc(r.ALWAYS, 1, 1)), this.maskStack.push(t), r.colorMask(!1, !1, !1, !0), r.stencilOp(r.KEEP, r.KEEP, r.INCR), e.WebGLGraphics.renderGraphics(t, i), r.colorMask(!0, !0, !0, !0), r.stencilFunc(r.NOTEQUAL, 0, this.maskStack.length), r.stencilOp(r.KEEP, r.KEEP, r.KEEP)
        }, e.WebGLMaskManager.prototype.popMask = function (t) {
            var i = this.gl, r = this.maskStack.pop();
            r && (i.colorMask(!1, !1, !1, !1), i.stencilOp(i.KEEP, i.KEEP, i.DECR), e.WebGLGraphics.renderGraphics(r, t), i.colorMask(!0, !0, !0, !0), i.stencilFunc(i.NOTEQUAL, 0, this.maskStack.length), i.stencilOp(i.KEEP, i.KEEP, i.KEEP)), 0 === this.maskStack.length && i.disable(i.STENCIL_TEST)
        }, e.WebGLMaskManager.prototype.destroy = function () {
            this.maskStack = null, this.gl = null
        }, e.WebGLShaderManager = function (t) {
            this.maxAttibs = 10, this.attribState = [], this.tempAttribState = [];
            for (var e = 0; e < this.maxAttibs; e++)this.attribState[e] = !1;
            this.setContext(t)
        }, e.WebGLShaderManager.prototype.setContext = function (t) {
            this.gl = t, this.primitiveShader = new e.PrimitiveShader(t), this.defaultShader = new e.PixiShader(t), this.fastShader = new e.PixiFastShader(t), this.activateShader(this.defaultShader)
        }, e.WebGLShaderManager.prototype.setAttribs = function (t) {
            var e;
            for (e = 0; e < this.tempAttribState.length; e++)this.tempAttribState[e] = !1;
            for (e = 0; e < t.length; e++) {
                var i = t[e];
                this.tempAttribState[i] = !0
            }
            var r = this.gl;
            for (e = 0; e < this.attribState.length; e++)this.attribState[e] !== this.tempAttribState[e] && (this.attribState[e] = this.tempAttribState[e], this.tempAttribState[e] ? r.enableVertexAttribArray(e) : r.disableVertexAttribArray(e))
        }, e.WebGLShaderManager.prototype.activateShader = function (t) {
            this.currentShader = t, this.gl.useProgram(t.program), this.setAttribs(t.attributes)
        }, e.WebGLShaderManager.prototype.activatePrimitiveShader = function () {
            var t = this.gl;
            t.useProgram(this.primitiveShader.program), this.setAttribs(this.primitiveShader.attributes)
        }, e.WebGLShaderManager.prototype.deactivatePrimitiveShader = function () {
            var t = this.gl;
            t.useProgram(this.defaultShader.program), this.setAttribs(this.defaultShader.attributes)
        }, e.WebGLShaderManager.prototype.destroy = function () {
            this.attribState = null, this.tempAttribState = null, this.primitiveShader.destroy(), this.defaultShader.destroy(), this.fastShader.destroy(), this.gl = null
        }, e.WebGLSpriteBatch = function (t) {
            this.vertSize = 6, this.size = 1e4;
            var e = 4 * this.size * this.vertSize, i = 6 * this.size;
            this.vertices = new Float32Array(e), this.indices = new Uint16Array(i), this.lastIndexCount = 0;
            for (var r = 0, s = 0; i > r; r += 6, s += 4)this.indices[r + 0] = s + 0, this.indices[r + 1] = s + 1, this.indices[r + 2] = s + 2, this.indices[r + 3] = s + 0, this.indices[r + 4] = s + 2, this.indices[r + 5] = s + 3;
            this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.setContext(t)
        }, e.WebGLSpriteBatch.prototype.setContext = function (t) {
            this.gl = t, this.vertexBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW), this.currentBlendMode = 99999
        }, e.WebGLSpriteBatch.prototype.begin = function (t) {
            this.renderSession = t, this.shader = this.renderSession.shaderManager.defaultShader, this.start()
        }, e.WebGLSpriteBatch.prototype.end = function () {
            this.flush()
        }, e.WebGLSpriteBatch.prototype.render = function (t) {
            (t.texture.baseTexture !== this.currentBaseTexture || this.currentBatchSize >= this.size) && (this.flush(), this.currentBaseTexture = t.texture.baseTexture), t.blendMode !== this.currentBlendMode && this.setBlendMode(t.blendMode);
            var e = t._uvs || t.texture._uvs;
            if (e) {
                var i, r, s, n, a = t.worldAlpha, o = t.tint, h = this.vertices, l = t.texture.frame.width, u = t.texture.frame.height, c = t.anchor.x, d = t.anchor.y;
                if (t.texture.trim) {
                    var p = t.texture.trim;
                    r = p.x - c * p.width, i = r + l, n = p.y - d * p.height, s = n + u
                } else i = l * (1 - c), r = l * -c, s = u * (1 - d), n = u * -d;
                var m = 4 * this.currentBatchSize * this.vertSize, g = t.worldTransform, f = g.a, v = g.c, y = g.b, x = g.d, b = g.tx, T = g.ty;
                h[m++] = f * r + y * n + b, h[m++] = x * n + v * r + T, h[m++] = e.x0, h[m++] = e.y0, h[m++] = a, h[m++] = o, h[m++] = f * i + y * n + b, h[m++] = x * n + v * i + T, h[m++] = e.x1, h[m++] = e.y1, h[m++] = a, h[m++] = o, h[m++] = f * i + y * s + b, h[m++] = x * s + v * i + T, h[m++] = e.x2, h[m++] = e.y2, h[m++] = a, h[m++] = o, h[m++] = f * r + y * s + b, h[m++] = x * s + v * r + T, h[m++] = e.x3, h[m++] = e.y3, h[m++] = a, h[m++] = o, this.currentBatchSize++
            }
        }, e.WebGLSpriteBatch.prototype.renderTilingSprite = function (t) {
            var e = t.tilingTexture;
            (e.baseTexture !== this.currentBaseTexture || this.currentBatchSize >= this.size) && (this.flush(), this.currentBaseTexture = e.baseTexture), t.blendMode !== this.currentBlendMode && this.setBlendMode(t.blendMode), t._uvs || (t._uvs = new Float32Array(8));
            var i = t._uvs;
            t.tilePosition.x %= e.baseTexture.width, t.tilePosition.y %= e.baseTexture.height;
            var r = t.tilePosition.x / e.baseTexture.width, s = t.tilePosition.y / e.baseTexture.height, n = t.width / e.baseTexture.width / (t.tileScale.x * t.tileScaleOffset.x), a = t.height / e.baseTexture.height / (t.tileScale.y * t.tileScaleOffset.y);
            i.x0 = 0 - r, i.y0 = 0 - s, i.x1 = 1 * n - r, i.y1 = 0 - s, i.x2 = 1 * n - r, i.y2 = 1 * a - s, i.x3 = 0 - r, i.y3 = 1 * a - s;
            var o = t.worldAlpha, h = t.tint, l = this.vertices, u = t.width, c = t.height, d = t.anchor.x, p = t.anchor.y, m = u * (1 - d), g = u * -d, f = c * (1 - p), v = c * -p, y = 4 * this.currentBatchSize * this.vertSize, x = t.worldTransform, b = x.a, T = x.c, w = x.b, S = x.d, C = x.tx, A = x.ty;
            l[y++] = b * g + w * v + C, l[y++] = S * v + T * g + A, l[y++] = i.x0, l[y++] = i.y0, l[y++] = o, l[y++] = h, l[y++] = b * m + w * v + C, l[y++] = S * v + T * m + A, l[y++] = i.x1, l[y++] = i.y1, l[y++] = o, l[y++] = h, l[y++] = b * m + w * f + C, l[y++] = S * f + T * m + A, l[y++] = i.x2, l[y++] = i.y2, l[y++] = o, l[y++] = h, l[y++] = b * g + w * f + C, l[y++] = S * f + T * g + A, l[y++] = i.x3, l[y++] = i.y3, l[y++] = o, l[y++] = h, this.currentBatchSize++
        }, e.WebGLSpriteBatch.prototype.flush = function () {
            if (0 !== this.currentBatchSize) {
                var t = this.gl;
                if (t.bindTexture(t.TEXTURE_2D, this.currentBaseTexture._glTextures[t.id] || e.createWebGLTexture(this.currentBaseTexture, t)), this.currentBatchSize > .5 * this.size)t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices); else {
                    var i = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                    t.bufferSubData(t.ARRAY_BUFFER, 0, i)
                }
                t.drawElements(t.TRIANGLES, 6 * this.currentBatchSize, t.UNSIGNED_SHORT, 0), this.currentBatchSize = 0, this.renderSession.drawCount++
            }
        }, e.WebGLSpriteBatch.prototype.stop = function () {
            this.flush()
        }, e.WebGLSpriteBatch.prototype.start = function () {
            var t = this.gl;
            t.activeTexture(t.TEXTURE0), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
            var i = this.renderSession.projection;
            t.uniform2f(this.shader.projectionVector, i.x, i.y);
            var r = 4 * this.vertSize;
            t.vertexAttribPointer(this.shader.aVertexPosition, 2, t.FLOAT, !1, r, 0), t.vertexAttribPointer(this.shader.aTextureCoord, 2, t.FLOAT, !1, r, 8), t.vertexAttribPointer(this.shader.colorAttribute, 2, t.FLOAT, !1, r, 16), this.currentBlendMode !== e.blendModes.NORMAL && this.setBlendMode(e.blendModes.NORMAL)
        }, e.WebGLSpriteBatch.prototype.setBlendMode = function (t) {
            this.flush(), this.currentBlendMode = t;
            var i = e.blendModesWebGL[this.currentBlendMode];
            this.gl.blendFunc(i[0], i[1])
        }, e.WebGLSpriteBatch.prototype.destroy = function () {
            this.vertices = null, this.indices = null, this.gl.deleteBuffer(this.vertexBuffer), this.gl.deleteBuffer(this.indexBuffer), this.currentBaseTexture = null, this.gl = null
        }, e.WebGLFastSpriteBatch = function (t) {
            this.vertSize = 10, this.maxSize = 6e3, this.size = this.maxSize;
            var e = 4 * this.size * this.vertSize, i = 6 * this.maxSize;
            this.vertices = new Float32Array(e), this.indices = new Uint16Array(i), this.vertexBuffer = null, this.indexBuffer = null, this.lastIndexCount = 0;
            for (var r = 0, s = 0; i > r; r += 6, s += 4)this.indices[r + 0] = s + 0, this.indices[r + 1] = s + 1, this.indices[r + 2] = s + 2, this.indices[r + 3] = s + 0, this.indices[r + 4] = s + 2, this.indices[r + 5] = s + 3;
            this.drawing = !1, this.currentBatchSize = 0, this.currentBaseTexture = null, this.currentBlendMode = 0, this.renderSession = null, this.shader = null, this.matrix = null, this.setContext(t)
        }, e.WebGLFastSpriteBatch.prototype.setContext = function (t) {
            this.gl = t, this.vertexBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, this.indices, t.STATIC_DRAW), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertices, t.DYNAMIC_DRAW), this.currentBlendMode = 99999
        }, e.WebGLFastSpriteBatch.prototype.begin = function (t, e) {
            this.renderSession = e, this.shader = this.renderSession.shaderManager.fastShader, this.matrix = t.worldTransform.toArray(!0), this.start()
        }, e.WebGLFastSpriteBatch.prototype.end = function () {
            this.flush()
        }, e.WebGLFastSpriteBatch.prototype.render = function (t) {
            var e = t.children, i = e[0];
            if (i.texture._uvs) {
                this.currentBaseTexture = i.texture.baseTexture, i.blendMode !== this.currentBlendMode && this.setBlendMode(i.blendMode);
                for (var r = 0, s = e.length; s > r; r++)this.renderSprite(e[r]);
                this.flush()
            }
        }, e.WebGLFastSpriteBatch.prototype.renderSprite = function (t) {
            if (t.texture.baseTexture === this.currentBaseTexture || (this.flush(), this.currentBaseTexture = t.texture.baseTexture, t.texture._uvs)) {
                var e, i, r, s, n, a, o, h, l = this.vertices;
                if (e = t.texture._uvs, i = t.texture.frame.width, r = t.texture.frame.height, t.texture.trim) {
                    var u = t.texture.trim;
                    n = u.x - t.anchor.x * u.width, s = n + t.texture.frame.width, o = u.y - t.anchor.y * u.height, a = o + t.texture.frame.height
                } else s = t.texture.frame.width * (1 - t.anchor.x), n = t.texture.frame.width * -t.anchor.x, a = t.texture.frame.height * (1 - t.anchor.y), o = t.texture.frame.height * -t.anchor.y;
                h = 4 * this.currentBatchSize * this.vertSize, l[h++] = n, l[h++] = o, l[h++] = t.position.x, l[h++] = t.position.y, l[h++] = t.scale.x, l[h++] = t.scale.y, l[h++] = t.rotation, l[h++] = e.x0, l[h++] = e.y1, l[h++] = t.alpha, l[h++] = s, l[h++] = o, l[h++] = t.position.x, l[h++] = t.position.y, l[h++] = t.scale.x, l[h++] = t.scale.y, l[h++] = t.rotation, l[h++] = e.x1, l[h++] = e.y1, l[h++] = t.alpha, l[h++] = s, l[h++] = a, l[h++] = t.position.x, l[h++] = t.position.y, l[h++] = t.scale.x, l[h++] = t.scale.y, l[h++] = t.rotation, l[h++] = e.x2, l[h++] = e.y2, l[h++] = t.alpha, l[h++] = n, l[h++] = a, l[h++] = t.position.x, l[h++] = t.position.y, l[h++] = t.scale.x, l[h++] = t.scale.y, l[h++] = t.rotation, l[h++] = e.x3, l[h++] = e.y3, l[h++] = t.alpha, this.currentBatchSize++, this.currentBatchSize >= this.size && this.flush()
            }
        }, e.WebGLFastSpriteBatch.prototype.flush = function () {
            if (0 !== this.currentBatchSize) {
                var t = this.gl;
                if (this.currentBaseTexture._glTextures[t.id] || e.createWebGLTexture(this.currentBaseTexture, t), t.bindTexture(t.TEXTURE_2D, this.currentBaseTexture._glTextures[t.id]), this.currentBatchSize > .5 * this.size)t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertices); else {
                    var i = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                    t.bufferSubData(t.ARRAY_BUFFER, 0, i)
                }
                t.drawElements(t.TRIANGLES, 6 * this.currentBatchSize, t.UNSIGNED_SHORT, 0), this.currentBatchSize = 0, this.renderSession.drawCount++
            }
        }, e.WebGLFastSpriteBatch.prototype.stop = function () {
            this.flush()
        }, e.WebGLFastSpriteBatch.prototype.start = function () {
            var t = this.gl;
            t.activeTexture(t.TEXTURE0), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
            var i = this.renderSession.projection;
            t.uniform2f(this.shader.projectionVector, i.x, i.y), t.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix);
            var r = 4 * this.vertSize;
            t.vertexAttribPointer(this.shader.aVertexPosition, 2, t.FLOAT, !1, r, 0), t.vertexAttribPointer(this.shader.aPositionCoord, 2, t.FLOAT, !1, r, 8), t.vertexAttribPointer(this.shader.aScale, 2, t.FLOAT, !1, r, 16), t.vertexAttribPointer(this.shader.aRotation, 1, t.FLOAT, !1, r, 24), t.vertexAttribPointer(this.shader.aTextureCoord, 2, t.FLOAT, !1, r, 28), t.vertexAttribPointer(this.shader.colorAttribute, 1, t.FLOAT, !1, r, 36), this.currentBlendMode !== e.blendModes.NORMAL && this.setBlendMode(e.blendModes.NORMAL)
        }, e.WebGLFastSpriteBatch.prototype.setBlendMode = function (t) {
            this.flush(), this.currentBlendMode = t;
            var i = e.blendModesWebGL[this.currentBlendMode];
            this.gl.blendFunc(i[0], i[1])
        }, e.WebGLFilterManager = function (t, e) {
            this.transparent = e, this.filterStack = [], this.offsetX = 0, this.offsetY = 0, this.setContext(t)
        }, e.WebGLFilterManager.prototype.setContext = function (t) {
            this.gl = t, this.texturePool = [], this.initShaderBuffers()
        }, e.WebGLFilterManager.prototype.begin = function (t, e) {
            this.renderSession = t, this.defaultShader = t.shaderManager.defaultShader;
            var i = this.renderSession.projection;
            this.width = 2 * i.x, this.height = 2 * -i.y, this.buffer = e
        }, e.WebGLFilterManager.prototype.pushFilter = function (t) {
            var i = this.gl, r = this.renderSession.projection, s = this.renderSession.offset;
            this.filterStack.push(t);
            var n = t.filterPasses[0];
            this.offsetX += t.target.filterArea.x, this.offsetY += t.target.filterArea.y;
            var a = this.texturePool.pop();
            a ? a.resize(this.width, this.height) : a = new e.FilterTexture(this.gl, this.width, this.height), i.bindTexture(i.TEXTURE_2D, a.texture), t.target.filterArea = t.target.getBounds();
            var o = t.target.filterArea, h = n.padding;
            o.x -= h, o.y -= h, o.width += 2 * h, o.height += 2 * h, o.x < 0 && (o.x = 0), o.width > this.width && (o.width = this.width), o.y < 0 && (o.y = 0), o.height > this.height && (o.height = this.height), i.bindFramebuffer(i.FRAMEBUFFER, a.frameBuffer), i.viewport(0, 0, o.width, o.height), r.x = o.width / 2, r.y = -o.height / 2, s.x = -o.x, s.y = -o.y, i.uniform2f(this.defaultShader.projectionVector, o.width / 2, -o.height / 2), i.uniform2f(this.defaultShader.offsetVector, -o.x, -o.y), i.colorMask(!0, !0, !0, !0), i.clearColor(0, 0, 0, 0), i.clear(i.COLOR_BUFFER_BIT), t._glFilterTexture = a
        }, e.WebGLFilterManager.prototype.popFilter = function () {
            var t = this.gl, i = this.filterStack.pop(), r = i.target.filterArea, s = i._glFilterTexture, n = this.renderSession.projection, a = this.renderSession.offset;
            if (i.filterPasses.length > 1) {
                t.viewport(0, 0, r.width, r.height), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = 0, this.vertexArray[1] = r.height, this.vertexArray[2] = r.width, this.vertexArray[3] = r.height, this.vertexArray[4] = 0, this.vertexArray[5] = 0, this.vertexArray[6] = r.width, this.vertexArray[7] = 0, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = r.width / this.width, this.uvArray[5] = r.height / this.height, this.uvArray[6] = r.width / this.width, this.uvArray[7] = r.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray);
                var o = s, h = this.texturePool.pop();
                h || (h = new e.FilterTexture(this.gl, this.width, this.height)), t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer), t.clear(t.COLOR_BUFFER_BIT), t.disable(t.BLEND);
                for (var l = 0; l < i.filterPasses.length - 1; l++) {
                    var u = i.filterPasses[l];
                    t.bindFramebuffer(t.FRAMEBUFFER, h.frameBuffer), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, o.texture), this.applyFilterPass(u, r, r.width, r.height);
                    var c = o;
                    o = h, h = c
                }
                t.enable(t.BLEND), s = o, this.texturePool.push(h)
            }
            var d = i.filterPasses[i.filterPasses.length - 1];
            this.offsetX -= r.x, this.offsetY -= r.y;
            var p = this.width, m = this.height, g = 0, f = 0, v = this.buffer;
            if (0 === this.filterStack.length)t.colorMask(!0, !0, !0, this.transparent); else {
                var y = this.filterStack[this.filterStack.length - 1];
                r = y.target.filterArea, p = r.width, m = r.height, g = r.x, f = r.y, v = y._glFilterTexture.frameBuffer
            }
            n.x = p / 2, n.y = -m / 2, a.x = g, a.y = f, r = i.target.filterArea;
            var x = r.x - g, b = r.y - f;
            t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), this.vertexArray[0] = x, this.vertexArray[1] = b + r.height, this.vertexArray[2] = x + r.width, this.vertexArray[3] = b + r.height, this.vertexArray[4] = x, this.vertexArray[5] = b, this.vertexArray[6] = x + r.width, this.vertexArray[7] = b, t.bufferSubData(t.ARRAY_BUFFER, 0, this.vertexArray), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), this.uvArray[2] = r.width / this.width, this.uvArray[5] = r.height / this.height, this.uvArray[6] = r.width / this.width, this.uvArray[7] = r.height / this.height, t.bufferSubData(t.ARRAY_BUFFER, 0, this.uvArray), t.viewport(0, 0, p, m), t.bindFramebuffer(t.FRAMEBUFFER, v), t.activeTexture(t.TEXTURE0), t.bindTexture(t.TEXTURE_2D, s.texture), this.applyFilterPass(d, r, p, m), t.useProgram(this.defaultShader.program), t.uniform2f(this.defaultShader.projectionVector, p / 2, -m / 2), t.uniform2f(this.defaultShader.offsetVector, -g, -f), this.texturePool.push(s), i._glFilterTexture = null
        }, e.WebGLFilterManager.prototype.applyFilterPass = function (t, i, r, s) {
            var n = this.gl, a = t.shaders[n.id];
            a || (a = new e.PixiShader(n), a.fragmentSrc = t.fragmentSrc, a.uniforms = t.uniforms, a.init(), t.shaders[n.id] = a), n.useProgram(a.program), n.uniform2f(a.projectionVector, r / 2, -s / 2), n.uniform2f(a.offsetVector, 0, 0), t.uniforms.dimensions && (t.uniforms.dimensions.value[0] = this.width, t.uniforms.dimensions.value[1] = this.height, t.uniforms.dimensions.value[2] = this.vertexArray[0], t.uniforms.dimensions.value[3] = this.vertexArray[5]), a.syncUniforms(), n.bindBuffer(n.ARRAY_BUFFER, this.vertexBuffer), n.vertexAttribPointer(a.aVertexPosition, 2, n.FLOAT, !1, 0, 0), n.bindBuffer(n.ARRAY_BUFFER, this.uvBuffer), n.vertexAttribPointer(a.aTextureCoord, 2, n.FLOAT, !1, 0, 0), n.bindBuffer(n.ARRAY_BUFFER, this.colorBuffer), n.vertexAttribPointer(a.colorAttribute, 2, n.FLOAT, !1, 0, 0), n.bindBuffer(n.ELEMENT_ARRAY_BUFFER, this.indexBuffer), n.drawElements(n.TRIANGLES, 6, n.UNSIGNED_SHORT, 0), this.renderSession.drawCount++
        }, e.WebGLFilterManager.prototype.initShaderBuffers = function () {
            var t = this.gl;
            this.vertexBuffer = t.createBuffer(), this.uvBuffer = t.createBuffer(), this.colorBuffer = t.createBuffer(), this.indexBuffer = t.createBuffer(), this.vertexArray = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), t.bindBuffer(t.ARRAY_BUFFER, this.vertexBuffer), t.bufferData(t.ARRAY_BUFFER, this.vertexArray, t.STATIC_DRAW), this.uvArray = new Float32Array([0, 0, 1, 0, 0, 1, 1, 1]), t.bindBuffer(t.ARRAY_BUFFER, this.uvBuffer), t.bufferData(t.ARRAY_BUFFER, this.uvArray, t.STATIC_DRAW), this.colorArray = new Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215]), t.bindBuffer(t.ARRAY_BUFFER, this.colorBuffer), t.bufferData(t.ARRAY_BUFFER, this.colorArray, t.STATIC_DRAW), t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, this.indexBuffer), t.bufferData(t.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), t.STATIC_DRAW)
        }, e.WebGLFilterManager.prototype.destroy = function () {
            var t = this.gl;
            this.filterStack = null, this.offsetX = 0, this.offsetY = 0;
            for (var e = 0; e < this.texturePool.length; e++)this.texturePool.destroy();
            this.texturePool = null, t.deleteBuffer(this.vertexBuffer), t.deleteBuffer(this.uvBuffer), t.deleteBuffer(this.colorBuffer), t.deleteBuffer(this.indexBuffer)
        }, e.FilterTexture = function (t, e, i) {
            this.gl = t, this.frameBuffer = t.createFramebuffer(), this.texture = t.createTexture(), t.bindTexture(t.TEXTURE_2D, this.texture), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.LINEAR), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE), t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE), t.bindFramebuffer(t.FRAMEBUFFER, this.framebuffer), t.bindFramebuffer(t.FRAMEBUFFER, this.frameBuffer), t.framebufferTexture2D(t.FRAMEBUFFER, t.COLOR_ATTACHMENT0, t.TEXTURE_2D, this.texture, 0), this.resize(e, i)
        }, e.FilterTexture.prototype.clear = function () {
            var t = this.gl;
            t.clearColor(0, 0, 0, 0), t.clear(t.COLOR_BUFFER_BIT)
        }, e.FilterTexture.prototype.resize = function (t, e) {
            if (this.width !== t || this.height !== e) {
                this.width = t, this.height = e;
                var i = this.gl;
                i.bindTexture(i.TEXTURE_2D, this.texture), i.texImage2D(i.TEXTURE_2D, 0, i.RGBA, t, e, 0, i.RGBA, i.UNSIGNED_BYTE, null)
            }
        }, e.FilterTexture.prototype.destroy = function () {
            var t = this.gl;
            t.deleteFramebuffer(this.frameBuffer), t.deleteTexture(this.texture), this.frameBuffer = null, this.texture = null
        }, e.CanvasMaskManager = function () {
        }, e.CanvasMaskManager.prototype.pushMask = function (t, i) {
            i.save();
            var r = t.alpha, s = t.worldTransform;
            i.setTransform(s.a, s.c, s.b, s.d, s.tx, s.ty), e.CanvasGraphics.renderGraphicsMask(t, i), i.clip(), t.worldAlpha = r
        }, e.CanvasMaskManager.prototype.popMask = function (t) {
            t.restore()
        }, e.CanvasTinter = function () {
        }, e.CanvasTinter.getTintedTexture = function (t, i) {
            var r = t.texture;
            i = e.CanvasTinter.roundColor(i);
            var s = "#" + ("00000" + (0 | i).toString(16)).substr(-6);
            if (r.tintCache = r.tintCache || {}, r.tintCache[s])return r.tintCache[s];
            var n = e.CanvasTinter.canvas || document.createElement("canvas");
            if (e.CanvasTinter.tintMethod(r, i, n), e.CanvasTinter.convertTintToImage) {
                var a = new Image;
                a.src = n.toDataURL(), r.tintCache[s] = a
            } else r.tintCache[s] = n, e.CanvasTinter.canvas = null;
            return n
        }, e.CanvasTinter.tintWithMultiply = function (t, e, i) {
            var r = i.getContext("2d"), s = t.frame;
            i.width = s.width, i.height = s.height, r.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), r.fillRect(0, 0, s.width, s.height), r.globalCompositeOperation = "multiply", r.drawImage(t.baseTexture.source, s.x, s.y, s.width, s.height, 0, 0, s.width, s.height), r.globalCompositeOperation = "destination-atop", r.drawImage(t.baseTexture.source, s.x, s.y, s.width, s.height, 0, 0, s.width, s.height)
        }, e.CanvasTinter.tintWithOverlay = function (t, e, i) {
            var r = i.getContext("2d"), s = t.frame;
            i.width = s.width, i.height = s.height, r.globalCompositeOperation = "copy", r.fillStyle = "#" + ("00000" + (0 | e).toString(16)).substr(-6), r.fillRect(0, 0, s.width, s.height), r.globalCompositeOperation = "destination-atop", r.drawImage(t.baseTexture.source, s.x, s.y, s.width, s.height, 0, 0, s.width, s.height)
        }, e.CanvasTinter.tintWithPerPixel = function (t, i, r) {
            var s = r.getContext("2d"), n = t.frame;
            r.width = n.width, r.height = n.height, s.globalCompositeOperation = "copy", s.drawImage(t.baseTexture.source, n.x, n.y, n.width, n.height, 0, 0, n.width, n.height);
            for (var a = e.hex2rgb(i), o = a[0], h = a[1], l = a[2], u = s.getImageData(0, 0, n.width, n.height), c = u.data, d = 0; d < c.length; d += 4)c[d + 0] *= o, c[d + 1] *= h, c[d + 2] *= l;
            s.putImageData(u, 0, 0)
        }, e.CanvasTinter.roundColor = function (t) {
            var i = e.CanvasTinter.cacheStepsPerColorChannel, r = e.hex2rgb(t);
            return r[0] = Math.min(255, r[0] / i * i), r[1] = Math.min(255, r[1] / i * i), r[2] = Math.min(255, r[2] / i * i), e.rgb2hex(r)
        }, e.CanvasTinter.cacheStepsPerColorChannel = 8, e.CanvasTinter.convertTintToImage = !1, e.CanvasTinter.canUseMultiply = e.canUseNewCanvasBlendModes(), e.CanvasTinter.tintMethod = e.CanvasTinter.canUseMultiply ? e.CanvasTinter.tintWithMultiply : e.CanvasTinter.tintWithPerPixel, e.CanvasRenderer = function (t, i, r, s) {
            e.defaultRenderer = e.defaultRenderer || this, this.type = e.CANVAS_RENDERER, this.clearBeforeRender = !0, this.roundPixels = !1, this.transparent = !!s, e.blendModesCanvas || (e.blendModesCanvas = [], e.canUseNewCanvasBlendModes() ? (e.blendModesCanvas[e.blendModes.NORMAL] = "source-over", e.blendModesCanvas[e.blendModes.ADD] = "lighter", e.blendModesCanvas[e.blendModes.MULTIPLY] = "multiply", e.blendModesCanvas[e.blendModes.SCREEN] = "screen", e.blendModesCanvas[e.blendModes.OVERLAY] = "overlay", e.blendModesCanvas[e.blendModes.DARKEN] = "darken", e.blendModesCanvas[e.blendModes.LIGHTEN] = "lighten", e.blendModesCanvas[e.blendModes.COLOR_DODGE] = "color-dodge", e.blendModesCanvas[e.blendModes.COLOR_BURN] = "color-burn", e.blendModesCanvas[e.blendModes.HARD_LIGHT] = "hard-light", e.blendModesCanvas[e.blendModes.SOFT_LIGHT] = "soft-light", e.blendModesCanvas[e.blendModes.DIFFERENCE] = "difference", e.blendModesCanvas[e.blendModes.EXCLUSION] = "exclusion", e.blendModesCanvas[e.blendModes.HUE] = "hue", e.blendModesCanvas[e.blendModes.SATURATION] = "saturation", e.blendModesCanvas[e.blendModes.COLOR] = "color", e.blendModesCanvas[e.blendModes.LUMINOSITY] = "luminosity") : (e.blendModesCanvas[e.blendModes.NORMAL] = "source-over", e.blendModesCanvas[e.blendModes.ADD] = "lighter", e.blendModesCanvas[e.blendModes.MULTIPLY] = "source-over", e.blendModesCanvas[e.blendModes.SCREEN] = "source-over", e.blendModesCanvas[e.blendModes.OVERLAY] = "source-over", e.blendModesCanvas[e.blendModes.DARKEN] = "source-over", e.blendModesCanvas[e.blendModes.LIGHTEN] = "source-over", e.blendModesCanvas[e.blendModes.COLOR_DODGE] = "source-over", e.blendModesCanvas[e.blendModes.COLOR_BURN] = "source-over", e.blendModesCanvas[e.blendModes.HARD_LIGHT] = "source-over", e.blendModesCanvas[e.blendModes.SOFT_LIGHT] = "source-over", e.blendModesCanvas[e.blendModes.DIFFERENCE] = "source-over", e.blendModesCanvas[e.blendModes.EXCLUSION] = "source-over", e.blendModesCanvas[e.blendModes.HUE] = "source-over", e.blendModesCanvas[e.blendModes.SATURATION] = "source-over", e.blendModesCanvas[e.blendModes.COLOR] = "source-over", e.blendModesCanvas[e.blendModes.LUMINOSITY] = "source-over")), this.width = t || 800, this.height = i || 600, this.view = r || document.createElement("canvas"), this.context = this.view.getContext("2d", {alpha: this.transparent}), this.refresh = !0, this.view.width = this.width, this.view.height = this.height, this.count = 0, this.maskManager = new e.CanvasMaskManager, this.renderSession = {context: this.context, maskManager: this.maskManager, scaleMode: null, smoothProperty: null}, "imageSmoothingEnabled"in this.context ? this.renderSession.smoothProperty = "imageSmoothingEnabled" : "webkitImageSmoothingEnabled"in this.context ? this.renderSession.smoothProperty = "webkitImageSmoothingEnabled" : "mozImageSmoothingEnabled"in this.context ? this.renderSession.smoothProperty = "mozImageSmoothingEnabled" : "oImageSmoothingEnabled"in this.context && (this.renderSession.smoothProperty = "oImageSmoothingEnabled")
        }, e.CanvasRenderer.prototype.constructor = e.CanvasRenderer, e.CanvasRenderer.prototype.render = function (t) {
            e.texturesToUpdate.length = 0, e.texturesToDestroy.length = 0, t.updateTransform(), this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.globalAlpha = 1, !this.transparent && this.clearBeforeRender ? (this.context.fillStyle = t.backgroundColorString, this.context.fillRect(0, 0, this.width, this.height)) : this.transparent && this.clearBeforeRender && this.context.clearRect(0, 0, this.width, this.height), this.renderDisplayObject(t), t.interactive && (t._interactiveEventsAdded || (t._interactiveEventsAdded = !0, t.interactionManager.setTarget(this))), e.Texture.frameUpdates.length > 0 && (e.Texture.frameUpdates.length = 0)
        }, e.CanvasRenderer.prototype.resize = function (t, e) {
            this.width = t, this.height = e, this.view.width = t, this.view.height = e
        }, e.CanvasRenderer.prototype.renderDisplayObject = function (t, e) {
            this.renderSession.context = e || this.context, t._renderCanvas(this.renderSession)
        }, e.CanvasRenderer.prototype.renderStripFlat = function (t) {
            var e = this.context, i = t.verticies, r = i.length / 2;
            this.count++, e.beginPath();
            for (var s = 1; r - 2 > s; s++) {
                var n = 2 * s, a = i[n], o = i[n + 2], h = i[n + 4], l = i[n + 1], u = i[n + 3], c = i[n + 5];
                e.moveTo(a, l), e.lineTo(o, u), e.lineTo(h, c)
            }
            e.fillStyle = "#FF0000", e.fill(), e.closePath()
        }, e.CanvasRenderer.prototype.renderStrip = function (t) {
            var e = this.context, i = t.verticies, r = t.uvs, s = i.length / 2;
            this.count++;
            for (var n = 1; s - 2 > n; n++) {
                var a = 2 * n, o = i[a], h = i[a + 2], l = i[a + 4], u = i[a + 1], c = i[a + 3], d = i[a + 5], p = r[a] * t.texture.width, m = r[a + 2] * t.texture.width, g = r[a + 4] * t.texture.width, f = r[a + 1] * t.texture.height, v = r[a + 3] * t.texture.height, y = r[a + 5] * t.texture.height;
                e.save(), e.beginPath(), e.moveTo(o, u), e.lineTo(h, c), e.lineTo(l, d), e.closePath(), e.clip();
                var x = p * v + f * g + m * y - v * g - f * m - p * y, b = o * v + f * l + h * y - v * l - f * h - o * y, T = p * h + o * g + m * l - h * g - o * m - p * l, w = p * v * l + f * h * g + o * m * y - o * v * g - f * m * l - p * h * y, S = u * v + f * d + c * y - v * d - f * c - u * y, C = p * c + u * g + m * d - c * g - u * m - p * d, A = p * v * d + f * c * g + u * m * y - u * v * g - f * m * d - p * c * y;
                e.transform(b / x, S / x, T / x, C / x, w / x, A / x), e.drawImage(t.texture.baseTexture.source, 0, 0), e.restore()
            }
        }, e.CanvasBuffer = function (t, e) {
            this.width = t, this.height = e, this.canvas = document.createElement("canvas"), this.context = this.canvas.getContext("2d"), this.canvas.width = t, this.canvas.height = e
        }, e.CanvasBuffer.prototype.clear = function () {
            this.context.clearRect(0, 0, this.width, this.height)
        }, e.CanvasBuffer.prototype.resize = function (t, e) {
            this.width = this.canvas.width = t, this.height = this.canvas.height = e
        }, e.CanvasGraphics = function () {
        }, e.CanvasGraphics.renderGraphics = function (t, i) {
            for (var r = t.worldAlpha, s = "", n = 0; n < t.graphicsData.length; n++) {
                var a = t.graphicsData[n], o = a.points;
                if (i.strokeStyle = s = "#" + ("00000" + (0 | a.lineColor).toString(16)).substr(-6), i.lineWidth = a.lineWidth, a.type === e.Graphics.POLY) {
                    i.beginPath(), i.moveTo(o[0], o[1]);
                    for (var h = 1; h < o.length / 2; h++)i.lineTo(o[2 * h], o[2 * h + 1]);
                    o[0] === o[o.length - 2] && o[1] === o[o.length - 1] && i.closePath(), a.fill && (i.globalAlpha = a.fillAlpha * r, i.fillStyle = s = "#" + ("00000" + (0 | a.fillColor).toString(16)).substr(-6), i.fill()), a.lineWidth && (i.globalAlpha = a.lineAlpha * r, i.stroke())
                } else if (a.type === e.Graphics.RECT)(a.fillColor || 0 === a.fillColor) && (i.globalAlpha = a.fillAlpha * r, i.fillStyle = s = "#" + ("00000" + (0 | a.fillColor).toString(16)).substr(-6), i.fillRect(o[0], o[1], o[2], o[3])), a.lineWidth && (i.globalAlpha = a.lineAlpha * r, i.strokeRect(o[0], o[1], o[2], o[3])); else if (a.type === e.Graphics.CIRC)i.beginPath(), i.arc(o[0], o[1], o[2], 0, 2 * Math.PI), i.closePath(), a.fill && (i.globalAlpha = a.fillAlpha * r, i.fillStyle = s = "#" + ("00000" + (0 | a.fillColor).toString(16)).substr(-6), i.fill()), a.lineWidth && (i.globalAlpha = a.lineAlpha * r, i.stroke()); else if (a.type === e.Graphics.ELIP) {
                    var l = a.points, u = 2 * l[2], c = 2 * l[3], d = l[0] - u / 2, p = l[1] - c / 2;
                    i.beginPath();
                    var m = .5522848, g = u / 2 * m, f = c / 2 * m, v = d + u, y = p + c, x = d + u / 2, b = p + c / 2;
                    i.moveTo(d, b), i.bezierCurveTo(d, b - f, x - g, p, x, p), i.bezierCurveTo(x + g, p, v, b - f, v, b), i.bezierCurveTo(v, b + f, x + g, y, x, y), i.bezierCurveTo(x - g, y, d, b + f, d, b), i.closePath(), a.fill && (i.globalAlpha = a.fillAlpha * r, i.fillStyle = s = "#" + ("00000" + (0 | a.fillColor).toString(16)).substr(-6), i.fill()), a.lineWidth && (i.globalAlpha = a.lineAlpha * r, i.stroke())
                }
            }
        }, e.CanvasGraphics.renderGraphicsMask = function (t, i) {
            var r = t.graphicsData.length;
            if (0 !== r) {
                r > 1 && (r = 1, window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));
                for (var s = 0; 1 > s; s++) {
                    var n = t.graphicsData[s], a = n.points;
                    if (n.type === e.Graphics.POLY) {
                        i.beginPath(), i.moveTo(a[0], a[1]);
                        for (var o = 1; o < a.length / 2; o++)i.lineTo(a[2 * o], a[2 * o + 1]);
                        a[0] === a[a.length - 2] && a[1] === a[a.length - 1] && i.closePath()
                    } else if (n.type === e.Graphics.RECT)i.beginPath(), i.rect(a[0], a[1], a[2], a[3]), i.closePath(); else if (n.type === e.Graphics.CIRC)i.beginPath(), i.arc(a[0], a[1], a[2], 0, 2 * Math.PI), i.closePath(); else if (n.type === e.Graphics.ELIP) {
                        var h = n.points, l = 2 * h[2], u = 2 * h[3], c = h[0] - l / 2, d = h[1] - u / 2;
                        i.beginPath();
                        var p = .5522848, m = l / 2 * p, g = u / 2 * p, f = c + l, v = d + u, y = c + l / 2, x = d + u / 2;
                        i.moveTo(c, x), i.bezierCurveTo(c, x - g, y - m, d, y, d), i.bezierCurveTo(y + m, d, f, x - g, f, x), i.bezierCurveTo(f, x + g, y + m, v, y, v), i.bezierCurveTo(y - m, v, c, x + g, c, x), i.closePath()
                    }
                }
            }
        }, e.Graphics = function () {
            e.DisplayObjectContainer.call(this), this.renderable = !0, this.fillAlpha = 1, this.lineWidth = 0, this.lineColor = "black", this.graphicsData = [], this.tint = 16777215, this.blendMode = e.blendModes.NORMAL, this.currentPath = {points: []}, this._webGL = [], this.isMask = !1, this.bounds = null, this.boundsPadding = 10
        }, e.Graphics.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Graphics.prototype.constructor = e.Graphics, Object.defineProperty(e.Graphics.prototype, "cacheAsBitmap", {get: function () {
            return this._cacheAsBitmap
        }, set: function (t) {
            this._cacheAsBitmap = t, this._cacheAsBitmap ? this._generateCachedSprite() : (this.destroyCachedSprite(), this.dirty = !0)
        }}), e.Graphics.prototype.lineStyle = function (t, i, r) {
            this.currentPath.points.length || this.graphicsData.pop(), this.lineWidth = t || 0, this.lineColor = i || 0, this.lineAlpha = arguments.length < 3 ? 1 : r, this.currentPath = {lineWidth: this.lineWidth, lineColor: this.lineColor, lineAlpha: this.lineAlpha, fillColor: this.fillColor, fillAlpha: this.fillAlpha, fill: this.filling, points: [], type: e.Graphics.POLY}, this.graphicsData.push(this.currentPath)
        }, e.Graphics.prototype.moveTo = function (t, i) {
            this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = this.currentPath = {lineWidth: this.lineWidth, lineColor: this.lineColor, lineAlpha: this.lineAlpha, fillColor: this.fillColor, fillAlpha: this.fillAlpha, fill: this.filling, points: [], type: e.Graphics.POLY}, this.currentPath.points.push(t, i), this.graphicsData.push(this.currentPath)
        }, e.Graphics.prototype.lineTo = function (t, e) {
            this.currentPath.points.push(t, e), this.dirty = !0
        }, e.Graphics.prototype.beginFill = function (t, e) {
            this.filling = !0, this.fillColor = t || 0, this.fillAlpha = arguments.length < 2 ? 1 : e
        }, e.Graphics.prototype.endFill = function () {
            this.filling = !1, this.fillColor = null, this.fillAlpha = 1
        }, e.Graphics.prototype.drawRect = function (t, i, r, s) {
            this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {lineWidth: this.lineWidth, lineColor: this.lineColor, lineAlpha: this.lineAlpha, fillColor: this.fillColor, fillAlpha: this.fillAlpha, fill: this.filling, points: [t, i, r, s], type: e.Graphics.RECT}, this.graphicsData.push(this.currentPath), this.dirty = !0
        }, e.Graphics.prototype.drawCircle = function (t, i, r) {
            this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {lineWidth: this.lineWidth, lineColor: this.lineColor, lineAlpha: this.lineAlpha, fillColor: this.fillColor, fillAlpha: this.fillAlpha, fill: this.filling, points: [t, i, r, r], type: e.Graphics.CIRC}, this.graphicsData.push(this.currentPath), this.dirty = !0
        }, e.Graphics.prototype.drawEllipse = function (t, i, r, s) {
            this.currentPath.points.length || this.graphicsData.pop(), this.currentPath = {lineWidth: this.lineWidth, lineColor: this.lineColor, lineAlpha: this.lineAlpha, fillColor: this.fillColor, fillAlpha: this.fillAlpha, fill: this.filling, points: [t, i, r, s], type: e.Graphics.ELIP}, this.graphicsData.push(this.currentPath), this.dirty = !0
        }, e.Graphics.prototype.clear = function () {
            this.lineWidth = 0, this.filling = !1, this.dirty = !0, this.clearDirty = !0, this.graphicsData = [], this.bounds = null
        }, e.Graphics.prototype.generateTexture = function () {
            var t = this.getBounds(), i = new e.CanvasBuffer(t.width, t.height), r = e.Texture.fromCanvas(i.canvas);
            return i.context.translate(-t.x, -t.y), e.CanvasGraphics.renderGraphics(this, i.context), r
        }, e.Graphics.prototype._renderWebGL = function (t) {
            if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
                if (this._cacheAsBitmap)return this.dirty && (this._generateCachedSprite(), e.updateWebGLTexture(this._cachedSprite.texture.baseTexture, t.gl), this.dirty = !1), void e.Sprite.prototype._renderWebGL.call(this._cachedSprite, t);
                if (t.spriteBatch.stop(), this._mask && t.maskManager.pushMask(this.mask, t), this._filters && t.filterManager.pushFilter(this._filterBlock), this.blendMode !== t.spriteBatch.currentBlendMode) {
                    t.spriteBatch.currentBlendMode = this.blendMode;
                    var i = e.blendModesWebGL[t.spriteBatch.currentBlendMode];
                    t.spriteBatch.gl.blendFunc(i[0], i[1])
                }
                if (e.WebGLGraphics.renderGraphics(this, t), this.children.length) {
                    t.spriteBatch.start();
                    for (var r = 0, s = this.children.length; s > r; r++)this.children[r]._renderWebGL(t);
                    t.spriteBatch.stop()
                }
                this._filters && t.filterManager.popFilter(), this._mask && t.maskManager.popMask(t), t.drawCount++, t.spriteBatch.start()
            }
        }, e.Graphics.prototype._renderCanvas = function (t) {
            if (this.visible !== !1 && 0 !== this.alpha && this.isMask !== !0) {
                var i = t.context, r = this.worldTransform;
                this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, i.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]), i.setTransform(r.a, r.c, r.b, r.d, r.tx, r.ty), e.CanvasGraphics.renderGraphics(this, i);
                for (var s = 0, n = this.children.length; n > s; s++)this.children[s]._renderCanvas(t)
            }
        }, e.Graphics.prototype.getBounds = function (t) {
            this.bounds || this.updateBounds();
            var e = this.bounds.x, i = this.bounds.width + this.bounds.x, r = this.bounds.y, s = this.bounds.height + this.bounds.y, n = t || this.worldTransform, a = n.a, o = n.c, h = n.b, l = n.d, u = n.tx, c = n.ty, d = a * i + h * s + u, p = l * s + o * i + c, m = a * e + h * s + u, g = l * s + o * e + c, f = a * e + h * r + u, v = l * r + o * e + c, y = a * i + h * r + u, x = l * r + o * i + c, b = -1 / 0, T = -1 / 0, w = 1 / 0, S = 1 / 0;
            w = w > d ? d : w, w = w > m ? m : w, w = w > f ? f : w, w = w > y ? y : w, S = S > p ? p : S, S = S > g ? g : S, S = S > v ? v : S, S = S > x ? x : S, b = d > b ? d : b, b = m > b ? m : b, b = f > b ? f : b, b = y > b ? y : b, T = p > T ? p : T, T = g > T ? g : T, T = v > T ? v : T, T = x > T ? x : T;
            var C = this._bounds;
            return C.x = w, C.width = b - w, C.y = S, C.height = T - S, C
        }, e.Graphics.prototype.updateBounds = function () {
            for (var t, i, r, s, n, a = 1 / 0, o = -1 / 0, h = 1 / 0, l = -1 / 0, u = 0; u < this.graphicsData.length; u++) {
                var c = this.graphicsData[u], d = c.type, p = c.lineWidth;
                if (t = c.points, d === e.Graphics.RECT)i = t[0] - p / 2, r = t[1] - p / 2, s = t[2] + p, n = t[3] + p, a = a > i ? i : a, o = i + s > o ? i + s : o, h = h > r ? i : h, l = r + n > l ? r + n : l; else if (d === e.Graphics.CIRC || d === e.Graphics.ELIP)i = t[0], r = t[1], s = t[2] + p / 2, n = t[3] + p / 2, a = a > i - s ? i - s : a, o = i + s > o ? i + s : o, h = h > r - n ? r - n : h, l = r + n > l ? r + n : l; else for (var m = 0; m < t.length; m += 2)i = t[m], r = t[m + 1], a = a > i - p ? i - p : a, o = i + p > o ? i + p : o, h = h > r - p ? r - p : h, l = r + p > l ? r + p : l
            }
            var g = this.boundsPadding;
            this.bounds = new e.Rectangle(a - g, h - g, o - a + 2 * g, l - h + 2 * g)
        }, e.Graphics.prototype._generateCachedSprite = function () {
            var t = this.getLocalBounds();
            if (this._cachedSprite)this._cachedSprite.buffer.resize(t.width, t.height); else {
                var i = new e.CanvasBuffer(t.width, t.height), r = e.Texture.fromCanvas(i.canvas);
                this._cachedSprite = new e.Sprite(r), this._cachedSprite.buffer = i, this._cachedSprite.worldTransform = this.worldTransform
            }
            this._cachedSprite.anchor.x = -(t.x / t.width), this._cachedSprite.anchor.y = -(t.y / t.height), this._cachedSprite.buffer.context.translate(-t.x, -t.y), e.CanvasGraphics.renderGraphics(this, this._cachedSprite.buffer.context)
        }, e.Graphics.prototype.destroyCachedSprite = function () {
            this._cachedSprite.texture.destroy(!0), this._cachedSprite = null
        }, e.Graphics.POLY = 0, e.Graphics.RECT = 1, e.Graphics.CIRC = 2, e.Graphics.ELIP = 3, e.Strip = function (t, i, r) {
            e.DisplayObjectContainer.call(this), this.texture = t, this.blendMode = e.blendModes.NORMAL;
            try {
                this.uvs = new Float32Array([0, 1, 1, 1, 1, 0, 0, 1]), this.verticies = new Float32Array([0, 0, 0, 0, 0, 0, 0, 0, 0]), this.colors = new Float32Array([1, 1, 1, 1]), this.indices = new Uint16Array([0, 1, 2, 3])
            } catch (s) {
                this.uvs = [0, 1, 1, 1, 1, 0, 0, 1], this.verticies = [0, 0, 0, 0, 0, 0, 0, 0, 0], this.colors = [1, 1, 1, 1], this.indices = [0, 1, 2, 3]
            }
            this.width = i, this.height = r, t.baseTexture.hasLoaded ? (this.width = this.texture.frame.width, this.height = this.texture.frame.height, this.updateFrame = !0) : (this.onTextureUpdateBind = this.onTextureUpdate.bind(this), this.texture.addEventListener("update", this.onTextureUpdateBind)), this.renderable = !0
        }, e.Strip.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Strip.prototype.constructor = e.Strip, e.Strip.prototype.setTexture = function (t) {
            this.texture = t, this.width = t.frame.width, this.height = t.frame.height, this.updateFrame = !0
        }, e.Strip.prototype.onTextureUpdate = function () {
            this.updateFrame = !0
        }, e.Rope = function (t, i) {
            e.Strip.call(this, t), this.points = i;
            try {
                this.verticies = new Float32Array(4 * i.length), this.uvs = new Float32Array(4 * i.length), this.colors = new Float32Array(2 * i.length), this.indices = new Uint16Array(2 * i.length)
            } catch (r) {
                this.verticies = new Array(4 * i.length), this.uvs = new Array(4 * i.length), this.colors = new Array(2 * i.length), this.indices = new Array(2 * i.length)
            }
            this.refresh()
        }, e.Rope.prototype = Object.create(e.Strip.prototype), e.Rope.prototype.constructor = e.Rope, e.Rope.prototype.refresh = function () {
            var t = this.points;
            if (!(t.length < 1)) {
                var e = this.uvs, i = t[0], r = this.indices, s = this.colors;
                this.count -= .2, e[0] = 0, e[1] = 1, e[2] = 0, e[3] = 1, s[0] = 1, s[1] = 1, r[0] = 0, r[1] = 1;
                for (var n, a, o, h = t.length, l = 1; h > l; l++)n = t[l], a = 4 * l, o = l / (h - 1), l % 2 ? (e[a] = o, e[a + 1] = 0, e[a + 2] = o, e[a + 3] = 1) : (e[a] = o, e[a + 1] = 0, e[a + 2] = o, e[a + 3] = 1), a = 2 * l, s[a] = 1, s[a + 1] = 1, a = 2 * l, r[a] = a, r[a + 1] = a + 1, i = n
            }
        }, e.Rope.prototype.updateTransform = function () {
            var t = this.points;
            if (!(t.length < 1)) {
                var i, r = t[0], s = {x: 0, y: 0};
                this.count -= .2;
                var n = this.verticies;
                n[0] = r.x + s.x, n[1] = r.y + s.y, n[2] = r.x - s.x, n[3] = r.y - s.y;
                for (var a, o, h, l, u, c = t.length, d = 1; c > d; d++)a = t[d], o = 4 * d, i = d < t.length - 1 ? t[d + 1] : a, s.y = -(i.x - r.x), s.x = i.y - r.y, h = 10 * (1 - d / (c - 1)), h > 1 && (h = 1), l = Math.sqrt(s.x * s.x + s.y * s.y), u = this.texture.height / 2, s.x /= l, s.y /= l, s.x *= u, s.y *= u, n[o] = a.x + s.x, n[o + 1] = a.y + s.y, n[o + 2] = a.x - s.x, n[o + 3] = a.y - s.y, r = a;
                e.DisplayObjectContainer.prototype.updateTransform.call(this)
            }
        }, e.Rope.prototype.setTexture = function (t) {
            this.texture = t, this.updateFrame = !0
        }, e.TilingSprite = function (t, i, r) {
            e.Sprite.call(this, t), this.width = i || 100, this.height = r || 100, this.tileScale = new e.Point(1, 1), this.tileScaleOffset = new e.Point(1, 1), this.tilePosition = new e.Point(0, 0), this.renderable = !0, this.tint = 16777215, this.blendMode = e.blendModes.NORMAL
        }, e.TilingSprite.prototype = Object.create(e.Sprite.prototype), e.TilingSprite.prototype.constructor = e.TilingSprite, Object.defineProperty(e.TilingSprite.prototype, "width", {get: function () {
            return this._width
        }, set: function (t) {
            this._width = t
        }}), Object.defineProperty(e.TilingSprite.prototype, "height", {get: function () {
            return this._height
        }, set: function (t) {
            this._height = t
        }}), e.TilingSprite.prototype.onTextureUpdate = function () {
            this.updateFrame = !0
        }, e.TilingSprite.prototype._renderWebGL = function (t) {
            if (this.visible !== !1 && 0 !== this.alpha) {
                var e, i;
                if (this.mask || this.filters) {
                    for (this.mask && (t.spriteBatch.stop(), t.maskManager.pushMask(this.mask, t), t.spriteBatch.start()), this.filters && (t.spriteBatch.flush(), t.filterManager.pushFilter(this._filterBlock)), this.tilingTexture ? t.spriteBatch.renderTilingSprite(this) : this.generateTilingTexture(!0), e = 0, i = this.children.length; i > e; e++)this.children[e]._renderWebGL(t);
                    t.spriteBatch.stop(), this.filters && t.filterManager.popFilter(), this.mask && t.maskManager.popMask(t), t.spriteBatch.start()
                } else for (this.tilingTexture ? t.spriteBatch.renderTilingSprite(this) : this.generateTilingTexture(!0), e = 0, i = this.children.length; i > e; e++)this.children[e]._renderWebGL(t)
            }
        }, e.TilingSprite.prototype._renderCanvas = function (t) {
            if (this.visible !== !1 && 0 !== this.alpha) {
                var i = t.context;
                this._mask && t.maskManager.pushMask(this._mask, i), i.globalAlpha = this.worldAlpha;
                var r = this.worldTransform;
                i.setTransform(r.a, r.c, r.b, r.d, r.tx, r.ty), this.__tilePattern || (this.generateTilingTexture(!1), this.tilingTexture && (this.__tilePattern = i.createPattern(this.tilingTexture.baseTexture.source, "repeat"))), this.blendMode !== t.currentBlendMode && (t.currentBlendMode = this.blendMode, i.globalCompositeOperation = e.blendModesCanvas[t.currentBlendMode]), i.beginPath();
                var s = this.tilePosition, n = this.tileScale;
                s.x %= this.tilingTexture.baseTexture.width, s.y %= this.tilingTexture.baseTexture.height, i.scale(n.x, n.y), i.translate(s.x, s.y), i.fillStyle = this.__tilePattern, i.fillRect(-s.x, -s.y, this.width / n.x, this.height / n.y), i.scale(1 / n.x, 1 / n.y), i.translate(-s.x, -s.y), i.closePath(), this._mask && t.maskManager.popMask(t.context)
            }
        }, e.TilingSprite.prototype.getBounds = function () {
            var t = this._width, e = this._height, i = t * (1 - this.anchor.x), r = t * -this.anchor.x, s = e * (1 - this.anchor.y), n = e * -this.anchor.y, a = this.worldTransform, o = a.a, h = a.c, l = a.b, u = a.d, c = a.tx, d = a.ty, p = o * r + l * n + c, m = u * n + h * r + d, g = o * i + l * n + c, f = u * n + h * i + d, v = o * i + l * s + c, y = u * s + h * i + d, x = o * r + l * s + c, b = u * s + h * r + d, T = -1 / 0, w = -1 / 0, S = 1 / 0, C = 1 / 0;
            S = S > p ? p : S, S = S > g ? g : S, S = S > v ? v : S, S = S > x ? x : S, C = C > m ? m : C, C = C > f ? f : C, C = C > y ? y : C, C = C > b ? b : C, T = p > T ? p : T, T = g > T ? g : T, T = v > T ? v : T, T = x > T ? x : T, w = m > w ? m : w, w = f > w ? f : w, w = y > w ? y : w, w = b > w ? b : w;
            var A = this._bounds;
            return A.x = S, A.width = T - S, A.y = C, A.height = w - C, this._currentBounds = A, A
        }, e.TilingSprite.prototype.generateTilingTexture = function (t) {
            var i = this.texture;
            if (i.baseTexture.hasLoaded) {
                var r, s, n = i.baseTexture, a = i.frame, o = a.width !== n.width || a.height !== n.height;
                this.tilingTexture = i;
                var h = !1;
                if (t ? (r = e.getNextPowerOfTwo(i.frame.width), s = e.getNextPowerOfTwo(i.frame.height), a.width !== r && a.height !== s && (h = !0)) : o && (r = a.width, s = a.height, h = !0), h) {
                    var l = new e.CanvasBuffer(r, s);
                    l.context.drawImage(i.baseTexture.source, a.x, a.y, a.width, a.height, 0, 0, r, s), this.tilingTexture = e.Texture.fromCanvas(l.canvas), this.tileScaleOffset.x = a.width / r, this.tileScaleOffset.y = a.height / s
                }
                this.tilingTexture.baseTexture._powerOf2 = !0
            }
        };
        var o = {};
        o.BoneData = function (t, e) {
            this.name = t, this.parent = e
        }, o.BoneData.prototype = {length: 0, x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1}, o.SlotData = function (t, e) {
            this.name = t, this.boneData = e
        }, o.SlotData.prototype = {r: 1, g: 1, b: 1, a: 1, attachmentName: null}, o.Bone = function (t, e) {
            this.data = t, this.parent = e, this.setToSetupPose()
        }, o.Bone.yDown = !1, o.Bone.prototype = {x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1, m00: 0, m01: 0, worldX: 0, m10: 0, m11: 0, worldY: 0, worldRotation: 0, worldScaleX: 1, worldScaleY: 1, updateWorldTransform: function (t, e) {
            var i = this.parent;
            null != i ? (this.worldX = this.x * i.m00 + this.y * i.m01 + i.worldX, this.worldY = this.x * i.m10 + this.y * i.m11 + i.worldY, this.worldScaleX = i.worldScaleX * this.scaleX, this.worldScaleY = i.worldScaleY * this.scaleY, this.worldRotation = i.worldRotation + this.rotation) : (this.worldX = this.x, this.worldY = this.y, this.worldScaleX = this.scaleX, this.worldScaleY = this.scaleY, this.worldRotation = this.rotation);
            var r = this.worldRotation * Math.PI / 180, s = Math.cos(r), n = Math.sin(r);
            this.m00 = s * this.worldScaleX, this.m10 = n * this.worldScaleX, this.m01 = -n * this.worldScaleY, this.m11 = s * this.worldScaleY, t && (this.m00 = -this.m00, this.m01 = -this.m01), e && (this.m10 = -this.m10, this.m11 = -this.m11), o.Bone.yDown && (this.m10 = -this.m10, this.m11 = -this.m11)
        }, setToSetupPose: function () {
            var t = this.data;
            this.x = t.x, this.y = t.y, this.rotation = t.rotation, this.scaleX = t.scaleX, this.scaleY = t.scaleY
        }}, o.Slot = function (t, e, i) {
            this.data = t, this.skeleton = e, this.bone = i, this.setToSetupPose()
        }, o.Slot.prototype = {r: 1, g: 1, b: 1, a: 1, _attachmentTime: 0, attachment: null, setAttachment: function (t) {
            this.attachment = t, this._attachmentTime = this.skeleton.time
        }, setAttachmentTime: function (t) {
            this._attachmentTime = this.skeleton.time - t
        }, getAttachmentTime: function () {
            return this.skeleton.time - this._attachmentTime
        }, setToSetupPose: function () {
            var t = this.data;
            this.r = t.r, this.g = t.g, this.b = t.b, this.a = t.a;
            for (var e = this.skeleton.data.slots, i = 0, r = e.length; r > i; i++)if (e[i] == t) {
                this.setAttachment(t.attachmentName ? this.skeleton.getAttachmentBySlotIndex(i, t.attachmentName) : null);
                break
            }
        }}, o.Skin = function (t) {
            this.name = t, this.attachments = {}
        }, o.Skin.prototype = {addAttachment: function (t, e, i) {
            this.attachments[t + ":" + e] = i
        }, getAttachment: function (t, e) {
            return this.attachments[t + ":" + e]
        }, _attachAll: function (t, e) {
            for (var i in e.attachments) {
                var r = i.indexOf(":"), s = parseInt(i.substring(0, r), 10), n = i.substring(r + 1), a = t.slots[s];
                if (a.attachment && a.attachment.name == n) {
                    var o = this.getAttachment(s, n);
                    o && a.setAttachment(o)
                }
            }
        }}, o.Animation = function (t, e, i) {
            this.name = t, this.timelines = e, this.duration = i
        }, o.Animation.prototype = {apply: function (t, e, i) {
            i && this.duration && (e %= this.duration);
            for (var r = this.timelines, s = 0, n = r.length; n > s; s++)r[s].apply(t, e, 1)
        }, mix: function (t, e, i, r) {
            i && this.duration && (e %= this.duration);
            for (var s = this.timelines, n = 0, a = s.length; a > n; n++)s[n].apply(t, e, r)
        }}, o.binarySearch = function (t, e, i) {
            var r = 0, s = Math.floor(t.length / i) - 2;
            if (!s)return i;
            for (var n = s >>> 1; ;) {
                if (t[(n + 1) * i] <= e ? r = n + 1 : s = n, r == s)return(r + 1) * i;
                n = r + s >>> 1
            }
        }, o.linearSearch = function (t, e, i) {
            for (var r = 0, s = t.length - i; s >= r; r += i)if (t[r] > e)return r;
            return-1
        }, o.Curves = function (t) {
            this.curves = [], this.curves.length = 6 * (t - 1)
        }, o.Curves.prototype = {setLinear: function (t) {
            this.curves[6 * t] = 0
        }, setStepped: function (t) {
            this.curves[6 * t] = -1
        }, setCurve: function (t, e, i, r, s) {
            var n = .1, a = n * n, o = a * n, h = 3 * n, l = 3 * a, u = 6 * a, c = 6 * o, d = 2 * -e + r, p = 2 * -i + s, m = 3 * (e - r) + 1, g = 3 * (i - s) + 1, f = 6 * t, v = this.curves;
            v[f] = e * h + d * l + m * o, v[f + 1] = i * h + p * l + g * o, v[f + 2] = d * u + m * c, v[f + 3] = p * u + g * c, v[f + 4] = m * c, v[f + 5] = g * c
        }, getCurvePercent: function (t, e) {
            e = 0 > e ? 0 : e > 1 ? 1 : e;
            var i = 6 * t, r = this.curves, s = r[i];
            if (!s)return e;
            if (-1 == s)return 0;
            for (var n = r[i + 1], a = r[i + 2], o = r[i + 3], h = r[i + 4], l = r[i + 5], u = s, c = n, d = 8; ;) {
                if (u >= e) {
                    var p = u - s, m = c - n;
                    return m + (c - m) * (e - p) / (u - p)
                }
                if (!d)break;
                d--, s += a, n += o, a += h, o += l, u += s, c += n
            }
            return c + (1 - c) * (e - u) / (1 - u)
        }}, o.RotateTimeline = function (t) {
            this.curves = new o.Curves(t), this.frames = [], this.frames.length = 2 * t
        }, o.RotateTimeline.prototype = {boneIndex: 0, getFrameCount: function () {
            return this.frames.length / 2
        }, setFrame: function (t, e, i) {
            t *= 2, this.frames[t] = e, this.frames[t + 1] = i
        }, apply: function (t, e, i) {
            var r, s = this.frames;
            if (!(e < s[0])) {
                var n = t.bones[this.boneIndex];
                if (e >= s[s.length - 2]) {
                    for (r = n.data.rotation + s[s.length - 1] - n.rotation; r > 180;)r -= 360;
                    for (; -180 > r;)r += 360;
                    return void(n.rotation += r * i)
                }
                var a = o.binarySearch(s, e, 2), h = s[a - 1], l = s[a], u = 1 - (e - l) / (s[a - 2] - l);
                for (u = this.curves.getCurvePercent(a / 2 - 1, u), r = s[a + 1] - h; r > 180;)r -= 360;
                for (; -180 > r;)r += 360;
                for (r = n.data.rotation + (h + r * u) - n.rotation; r > 180;)r -= 360;
                for (; -180 > r;)r += 360;
                n.rotation += r * i
            }
        }}, o.TranslateTimeline = function (t) {
            this.curves = new o.Curves(t), this.frames = [], this.frames.length = 3 * t
        }, o.TranslateTimeline.prototype = {boneIndex: 0, getFrameCount: function () {
            return this.frames.length / 3
        }, setFrame: function (t, e, i, r) {
            t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = r
        }, apply: function (t, e, i) {
            var r = this.frames;
            if (!(e < r[0])) {
                var s = t.bones[this.boneIndex];
                if (e >= r[r.length - 3])return s.x += (s.data.x + r[r.length - 2] - s.x) * i, void(s.y += (s.data.y + r[r.length - 1] - s.y) * i);
                var n = o.binarySearch(r, e, 3), a = r[n - 2], h = r[n - 1], l = r[n], u = 1 - (e - l) / (r[n + -3] - l);
                u = this.curves.getCurvePercent(n / 3 - 1, u), s.x += (s.data.x + a + (r[n + 1] - a) * u - s.x) * i, s.y += (s.data.y + h + (r[n + 2] - h) * u - s.y) * i
            }
        }}, o.ScaleTimeline = function (t) {
            this.curves = new o.Curves(t), this.frames = [], this.frames.length = 3 * t
        }, o.ScaleTimeline.prototype = {boneIndex: 0, getFrameCount: function () {
            return this.frames.length / 3
        }, setFrame: function (t, e, i, r) {
            t *= 3, this.frames[t] = e, this.frames[t + 1] = i, this.frames[t + 2] = r
        }, apply: function (t, e, i) {
            var r = this.frames;
            if (!(e < r[0])) {
                var s = t.bones[this.boneIndex];
                if (e >= r[r.length - 3])return s.scaleX += (s.data.scaleX - 1 + r[r.length - 2] - s.scaleX) * i, void(s.scaleY += (s.data.scaleY - 1 + r[r.length - 1] - s.scaleY) * i);
                var n = o.binarySearch(r, e, 3), a = r[n - 2], h = r[n - 1], l = r[n], u = 1 - (e - l) / (r[n + -3] - l);
                u = this.curves.getCurvePercent(n / 3 - 1, u), s.scaleX += (s.data.scaleX - 1 + a + (r[n + 1] - a) * u - s.scaleX) * i, s.scaleY += (s.data.scaleY - 1 + h + (r[n + 2] - h) * u - s.scaleY) * i
            }
        }}, o.ColorTimeline = function (t) {
            this.curves = new o.Curves(t), this.frames = [], this.frames.length = 5 * t
        }, o.ColorTimeline.prototype = {slotIndex: 0, getFrameCount: function () {
            return this.frames.length / 2
        }, setFrame: function (t, e) {
            t *= 5, this.frames[t] = e, this.frames[t + 1] = r, this.frames[t + 2] = g, this.frames[t + 3] = b, this.frames[t + 4] = a
        }, apply: function (t, e, i) {
            var r = this.frames;
            if (!(e < r[0])) {
                var s = t.slots[this.slotIndex];
                if (e >= r[r.length - 5]) {
                    var n = r.length - 1;
                    return s.r = r[n - 3], s.g = r[n - 2], s.b = r[n - 1], void(s.a = r[n])
                }
                var a = o.binarySearch(r, e, 5), h = r[a - 4], l = r[a - 3], u = r[a - 2], c = r[a - 1], d = r[a], p = 1 - (e - d) / (r[a - 5] - d);
                p = this.curves.getCurvePercent(a / 5 - 1, p);
                var m = h + (r[a + 1] - h) * p, g = l + (r[a + 2] - l) * p, f = u + (r[a + 3] - u) * p, v = c + (r[a + 4] - c) * p;
                1 > i ? (s.r += (m - s.r) * i, s.g += (g - s.g) * i, s.b += (f - s.b) * i, s.a += (v - s.a) * i) : (s.r = m, s.g = g, s.b = f, s.a = v)
            }
        }}, o.AttachmentTimeline = function (t) {
            this.curves = new o.Curves(t), this.frames = [], this.frames.length = t, this.attachmentNames = [], this.attachmentNames.length = t
        }, o.AttachmentTimeline.prototype = {slotIndex: 0, getFrameCount: function () {
            return this.frames.length
        }, setFrame: function (t, e, i) {
            this.frames[t] = e, this.attachmentNames[t] = i
        }, apply: function (t, e) {
            var i = this.frames;
            if (!(e < i[0])) {
                var r;
                r = e >= i[i.length - 1] ? i.length - 1 : o.binarySearch(i, e, 1) - 1;
                var s = this.attachmentNames[r];
                t.slots[this.slotIndex].setAttachment(s ? t.getAttachmentBySlotIndex(this.slotIndex, s) : null)
            }
        }}, o.SkeletonData = function () {
            this.bones = [], this.slots = [], this.skins = [], this.animations = []
        }, o.SkeletonData.prototype = {defaultSkin: null, findBone: function (t) {
            for (var e = this.bones, i = 0, r = e.length; r > i; i++)if (e[i].name == t)return e[i];
            return null
        }, findBoneIndex: function (t) {
            for (var e = this.bones, i = 0, r = e.length; r > i; i++)if (e[i].name == t)return i;
            return-1
        }, findSlot: function (t) {
            for (var e = this.slots, i = 0, r = e.length; r > i; i++)if (e[i].name == t)return slot[i];
            return null
        }, findSlotIndex: function (t) {
            for (var e = this.slots, i = 0, r = e.length; r > i; i++)if (e[i].name == t)return i;
            return-1
        }, findSkin: function (t) {
            for (var e = this.skins, i = 0, r = e.length; r > i; i++)if (e[i].name == t)return e[i];
            return null
        }, findAnimation: function (t) {
            for (var e = this.animations, i = 0, r = e.length; r > i; i++)if (e[i].name == t)return e[i];
            return null
        }}, o.Skeleton = function (t) {
            this.data = t, this.bones = [];
            for (var e = 0, i = t.bones.length; i > e; e++) {
                var r = t.bones[e], s = r.parent ? this.bones[t.bones.indexOf(r.parent)] : null;
                this.bones.push(new o.Bone(r, s))
            }
            for (this.slots = [], this.drawOrder = [], e = 0, i = t.slots.length; i > e; e++) {
                var n = t.slots[e], a = this.bones[t.bones.indexOf(n.boneData)], h = new o.Slot(n, this, a);
                this.slots.push(h), this.drawOrder.push(h)
            }
        }, o.Skeleton.prototype = {x: 0, y: 0, skin: null, r: 1, g: 1, b: 1, a: 1, time: 0, flipX: !1, flipY: !1, updateWorldTransform: function () {
            for (var t = this.flipX, e = this.flipY, i = this.bones, r = 0, s = i.length; s > r; r++)i[r].updateWorldTransform(t, e)
        }, setToSetupPose: function () {
            this.setBonesToSetupPose(), this.setSlotsToSetupPose()
        }, setBonesToSetupPose: function () {
            for (var t = this.bones, e = 0, i = t.length; i > e; e++)t[e].setToSetupPose()
        }, setSlotsToSetupPose: function () {
            for (var t = this.slots, e = 0, i = t.length; i > e; e++)t[e].setToSetupPose(e)
        }, getRootBone: function () {
            return this.bones.length ? this.bones[0] : null
        }, findBone: function (t) {
            for (var e = this.bones, i = 0, r = e.length; r > i; i++)if (e[i].data.name == t)return e[i];
            return null
        }, findBoneIndex: function (t) {
            for (var e = this.bones, i = 0, r = e.length; r > i; i++)if (e[i].data.name == t)return i;
            return-1
        }, findSlot: function (t) {
            for (var e = this.slots, i = 0, r = e.length; r > i; i++)if (e[i].data.name == t)return e[i];
            return null
        }, findSlotIndex: function (t) {
            for (var e = this.slots, i = 0, r = e.length; r > i; i++)if (e[i].data.name == t)return i;
            return-1
        }, setSkinByName: function (t) {
            var e = this.data.findSkin(t);
            if (!e)throw"Skin not found: " + t;
            this.setSkin(e)
        }, setSkin: function (t) {
            this.skin && t && t._attachAll(this, this.skin), this.skin = t
        }, getAttachmentBySlotName: function (t, e) {
            return this.getAttachmentBySlotIndex(this.data.findSlotIndex(t), e)
        }, getAttachmentBySlotIndex: function (t, e) {
            if (this.skin) {
                var i = this.skin.getAttachment(t, e);
                if (i)return i
            }
            return this.data.defaultSkin ? this.data.defaultSkin.getAttachment(t, e) : null
        }, setAttachment: function (t, e) {
            for (var i = this.slots, r = 0, s = i.size; s > r; r++) {
                var n = i[r];
                if (n.data.name == t) {
                    var a = null;
                    if (e && (a = this.getAttachment(r, e), null == a))throw"Attachment not found: " + e + ", for slot: " + t;
                    return void n.setAttachment(a)
                }
            }
            throw"Slot not found: " + t
        }, update: function (t) {
            time += t
        }}, o.AttachmentType = {region: 0}, o.RegionAttachment = function () {
            this.offset = [], this.offset.length = 8, this.uvs = [], this.uvs.length = 8
        }, o.RegionAttachment.prototype = {x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1, width: 0, height: 0, rendererObject: null, regionOffsetX: 0, regionOffsetY: 0, regionWidth: 0, regionHeight: 0, regionOriginalWidth: 0, regionOriginalHeight: 0, setUVs: function (t, e, i, r, s) {
            var n = this.uvs;
            s ? (n[2] = t, n[3] = r, n[4] = t, n[5] = e, n[6] = i, n[7] = e, n[0] = i, n[1] = r) : (n[0] = t, n[1] = r, n[2] = t, n[3] = e, n[4] = i, n[5] = e, n[6] = i, n[7] = r)
        }, updateOffset: function () {
            var t = this.width / this.regionOriginalWidth * this.scaleX, e = this.height / this.regionOriginalHeight * this.scaleY, i = -this.width / 2 * this.scaleX + this.regionOffsetX * t, r = -this.height / 2 * this.scaleY + this.regionOffsetY * e, s = i + this.regionWidth * t, n = r + this.regionHeight * e, a = this.rotation * Math.PI / 180, o = Math.cos(a), h = Math.sin(a), l = i * o + this.x, u = i * h, c = r * o + this.y, d = r * h, p = s * o + this.x, m = s * h, g = n * o + this.y, f = n * h, v = this.offset;
            v[0] = l - d, v[1] = c + u, v[2] = l - f, v[3] = g + u, v[4] = p - f, v[5] = g + m, v[6] = p - d, v[7] = c + m
        }, computeVertices: function (t, e, i, r) {
            t += i.worldX, e += i.worldY;
            var s = i.m00, n = i.m01, a = i.m10, o = i.m11, h = this.offset;
            r[0] = h[0] * s + h[1] * n + t, r[1] = h[0] * a + h[1] * o + e, r[2] = h[2] * s + h[3] * n + t, r[3] = h[2] * a + h[3] * o + e, r[4] = h[4] * s + h[5] * n + t, r[5] = h[4] * a + h[5] * o + e, r[6] = h[6] * s + h[7] * n + t, r[7] = h[6] * a + h[7] * o + e
        }}, o.AnimationStateData = function (t) {
            this.skeletonData = t, this.animationToMixTime = {}
        }, o.AnimationStateData.prototype = {defaultMix: 0, setMixByName: function (t, e, i) {
            var r = this.skeletonData.findAnimation(t);
            if (!r)throw"Animation not found: " + t;
            var s = this.skeletonData.findAnimation(e);
            if (!s)throw"Animation not found: " + e;
            this.setMix(r, s, i)
        }, setMix: function (t, e, i) {
            this.animationToMixTime[t.name + ":" + e.name] = i
        }, getMix: function (t, e) {
            var i = this.animationToMixTime[t.name + ":" + e.name];
            return i ? i : this.defaultMix
        }}, o.AnimationState = function (t) {
            this.data = t, this.queue = []
        }, o.AnimationState.prototype = {current: null, previous: null, currentTime: 0, previousTime: 0, currentLoop: !1, previousLoop: !1, mixTime: 0, mixDuration: 0, update: function (t) {
            if (this.currentTime += t, this.previousTime += t, this.mixTime += t, this.queue.length > 0) {
                var e = this.queue[0];
                this.currentTime >= e.delay && (this._setAnimation(e.animation, e.loop), this.queue.shift())
            }
        }, apply: function (t) {
            if (this.current)if (this.previous) {
                this.previous.apply(t, this.previousTime, this.previousLoop);
                var e = this.mixTime / this.mixDuration;
                e >= 1 && (e = 1, this.previous = null), this.current.mix(t, this.currentTime, this.currentLoop, e)
            } else this.current.apply(t, this.currentTime, this.currentLoop)
        }, clearAnimation: function () {
            this.previous = null, this.current = null, this.queue.length = 0
        }, _setAnimation: function (t, e) {
            this.previous = null, t && this.current && (this.mixDuration = this.data.getMix(this.current, t), this.mixDuration > 0 && (this.mixTime = 0, this.previous = this.current, this.previousTime = this.currentTime, this.previousLoop = this.currentLoop)), this.current = t, this.currentLoop = e, this.currentTime = 0
        }, setAnimationByName: function (t, e) {
            var i = this.data.skeletonData.findAnimation(t);
            if (!i)throw"Animation not found: " + t;
            this.setAnimation(i, e)
        }, setAnimation: function (t, e) {
            this.queue.length = 0, this._setAnimation(t, e)
        }, addAnimationByName: function (t, e, i) {
            var r = this.data.skeletonData.findAnimation(t);
            if (!r)throw"Animation not found: " + t;
            this.addAnimation(r, e, i)
        }, addAnimation: function (t, e, i) {
            var r = {};
            if (r.animation = t, r.loop = e, !i || 0 >= i) {
                var s = this.queue.length ? this.queue[this.queue.length - 1].animation : this.current;
                i = null != s ? s.duration - this.data.getMix(s, t) + (i || 0) : 0
            }
            r.delay = i, this.queue.push(r)
        }, isComplete: function () {
            return!this.current || this.currentTime >= this.current.duration
        }}, o.SkeletonJson = function (t) {
            this.attachmentLoader = t
        }, o.SkeletonJson.prototype = {scale: 1, readSkeletonData: function (t) {
            for (var e, i = new o.SkeletonData, r = t.bones, s = 0, n = r.length; n > s; s++) {
                var a = r[s], h = null;
                if (a.parent && (h = i.findBone(a.parent), !h))throw"Parent bone not found: " + a.parent;
                e = new o.BoneData(a.name, h), e.length = (a.length || 0) * this.scale, e.x = (a.x || 0) * this.scale, e.y = (a.y || 0) * this.scale, e.rotation = a.rotation || 0, e.scaleX = a.scaleX || 1, e.scaleY = a.scaleY || 1, i.bones.push(e)
            }
            var l = t.slots;
            for (s = 0, n = l.length; n > s; s++) {
                var u = l[s];
                if (e = i.findBone(u.bone), !e)throw"Slot bone not found: " + u.bone;
                var c = new o.SlotData(u.name, e), d = u.color;
                d && (c.r = o.SkeletonJson.toColor(d, 0), c.g = o.SkeletonJson.toColor(d, 1), c.b = o.SkeletonJson.toColor(d, 2), c.a = o.SkeletonJson.toColor(d, 3)), c.attachmentName = u.attachment, i.slots.push(c)
            }
            var p = t.skins;
            for (var m in p)if (p.hasOwnProperty(m)) {
                var g = p[m], f = new o.Skin(m);
                for (var v in g)if (g.hasOwnProperty(v)) {
                    var y = i.findSlotIndex(v), x = g[v];
                    for (var b in x)if (x.hasOwnProperty(b)) {
                        var T = this.readAttachment(f, b, x[b]);
                        null != T && f.addAttachment(y, b, T)
                    }
                }
                i.skins.push(f), "default" == f.name && (i.defaultSkin = f)
            }
            var w = t.animations;
            for (var S in w)w.hasOwnProperty(S) && this.readAnimation(S, w[S], i);
            return i
        }, readAttachment: function (t, e, i) {
            e = i.name || e;
            var r = o.AttachmentType[i.type || "region"];
            if (r == o.AttachmentType.region) {
                var s = new o.RegionAttachment;
                return s.x = (i.x || 0) * this.scale, s.y = (i.y || 0) * this.scale, s.scaleX = i.scaleX || 1, s.scaleY = i.scaleY || 1, s.rotation = i.rotation || 0, s.width = (i.width || 32) * this.scale, s.height = (i.height || 32) * this.scale, s.updateOffset(), s.rendererObject = {}, s.rendererObject.name = e, s.rendererObject.scale = {}, s.rendererObject.scale.x = s.scaleX, s.rendererObject.scale.y = s.scaleY, s.rendererObject.rotation = -s.rotation * Math.PI / 180, s
            }
            throw"Unknown attachment type: " + r
        }, readAnimation: function (t, e, i) {
            var r, s, n, a, h, l, u, c = [], d = 0, p = e.bones;
            for (var m in p)if (p.hasOwnProperty(m)) {
                var g = i.findBoneIndex(m);
                if (-1 == g)throw"Bone not found: " + m;
                var f = p[m];
                for (n in f)if (f.hasOwnProperty(n))if (h = f[n], "rotate" == n) {
                    for (s = new o.RotateTimeline(h.length), s.boneIndex = g, r = 0, l = 0, u = h.length; u > l; l++)a = h[l], s.setFrame(r, a.time, a.angle), o.SkeletonJson.readCurve(s, r, a), r++;
                    c.push(s), d = Math.max(d, s.frames[2 * s.getFrameCount() - 2])
                } else {
                    if ("translate" != n && "scale" != n)throw"Invalid timeline type for a bone: " + n + " (" + m + ")";
                    var v = 1;
                    for ("scale" == n ? s = new o.ScaleTimeline(h.length) : (s = new o.TranslateTimeline(h.length), v = this.scale), s.boneIndex = g, r = 0, l = 0, u = h.length; u > l; l++) {
                        a = h[l];
                        var y = (a.x || 0) * v, x = (a.y || 0) * v;
                        s.setFrame(r, a.time, y, x), o.SkeletonJson.readCurve(s, r, a), r++
                    }
                    c.push(s), d = Math.max(d, s.frames[3 * s.getFrameCount() - 3])
                }
            }
            var b = e.slots;
            for (var T in b)if (b.hasOwnProperty(T)) {
                var w = b[T], S = i.findSlotIndex(T);
                for (n in w)if (w.hasOwnProperty(n))if (h = w[n], "color" == n) {
                    for (s = new o.ColorTimeline(h.length), s.slotIndex = S, r = 0, l = 0, u = h.length; u > l; l++) {
                        a = h[l];
                        var C = a.color, A = o.SkeletonJson.toColor(C, 0), E = o.SkeletonJson.toColor(C, 1), M = o.SkeletonJson.toColor(C, 2), L = o.SkeletonJson.toColor(C, 3);
                        s.setFrame(r, a.time, A, E, M, L), o.SkeletonJson.readCurve(s, r, a), r++
                    }
                    c.push(s), d = Math.max(d, s.frames[5 * s.getFrameCount() - 5])
                } else {
                    if ("attachment" != n)throw"Invalid timeline type for a slot: " + n + " (" + T + ")";
                    for (s = new o.AttachmentTimeline(h.length), s.slotIndex = S, r = 0, l = 0, u = h.length; u > l; l++)a = h[l], s.setFrame(r++, a.time, a.name);
                    c.push(s), d = Math.max(d, s.frames[s.getFrameCount() - 1])
                }
            }
            i.animations.push(new o.Animation(t, c, d))
        }}, o.SkeletonJson.readCurve = function (t, e, i) {
            var r = i.curve;
            r && ("stepped" == r ? t.curves.setStepped(e) : r instanceof Array && t.curves.setCurve(e, r[0], r[1], r[2], r[3]))
        }, o.SkeletonJson.toColor = function (t, e) {
            if (8 != t.length)throw"Color hexidecimal length must be 8, recieved: " + t;
            return parseInt(t.substring(2 * e, 2), 16) / 255
        }, o.Atlas = function (t, e) {
            this.textureLoader = e, this.pages = [], this.regions = [];
            var i = new o.AtlasReader(t), r = [];
            r.length = 4;
            for (var s = null; ;) {
                var n = i.readLine();
                if (null == n)break;
                if (n = i.trim(n), n.length)if (s) {
                    var a = new o.AtlasRegion;
                    a.name = n, a.page = s, a.rotate = "true" == i.readValue(), i.readTuple(r);
                    var h = parseInt(r[0], 10), l = parseInt(r[1], 10);
                    i.readTuple(r);
                    var u = parseInt(r[0], 10), c = parseInt(r[1], 10);
                    a.u = h / s.width, a.v = l / s.height, a.rotate ? (a.u2 = (h + c) / s.width, a.v2 = (l + u) / s.height) : (a.u2 = (h + u) / s.width, a.v2 = (l + c) / s.height), a.x = h, a.y = l, a.width = Math.abs(u), a.height = Math.abs(c), 4 == i.readTuple(r) && (a.splits = [parseInt(r[0], 10), parseInt(r[1], 10), parseInt(r[2], 10), parseInt(r[3], 10)], 4 == i.readTuple(r) && (a.pads = [parseInt(r[0], 10), parseInt(r[1], 10), parseInt(r[2], 10), parseInt(r[3], 10)], i.readTuple(r))), a.originalWidth = parseInt(r[0], 10), a.originalHeight = parseInt(r[1], 10), i.readTuple(r), a.offsetX = parseInt(r[0], 10), a.offsetY = parseInt(r[1], 10), a.index = parseInt(i.readValue(), 10), this.regions.push(a)
                } else {
                    s = new o.AtlasPage, s.name = n, s.format = o.Atlas.Format[i.readValue()], i.readTuple(r), s.minFilter = o.Atlas.TextureFilter[r[0]], s.magFilter = o.Atlas.TextureFilter[r[1]];
                    var d = i.readValue();
                    s.uWrap = o.Atlas.TextureWrap.clampToEdge, s.vWrap = o.Atlas.TextureWrap.clampToEdge, "x" == d ? s.uWrap = o.Atlas.TextureWrap.repeat : "y" == d ? s.vWrap = o.Atlas.TextureWrap.repeat : "xy" == d && (s.uWrap = s.vWrap = o.Atlas.TextureWrap.repeat), e.load(s, n), this.pages.push(s)
                } else s = null
            }
        }, o.Atlas.prototype = {findRegion: function (t) {
            for (var e = this.regions, i = 0, r = e.length; r > i; i++)if (e[i].name == t)return e[i];
            return null
        }, dispose: function () {
            for (var t = this.pages, e = 0, i = t.length; i > e; e++)this.textureLoader.unload(t[e].rendererObject)
        }, updateUVs: function (t) {
            for (var e = this.regions, i = 0, r = e.length; r > i; i++) {
                var s = e[i];
                s.page == t && (s.u = s.x / t.width, s.v = s.y / t.height, s.rotate ? (s.u2 = (s.x + s.height) / t.width, s.v2 = (s.y + s.width) / t.height) : (s.u2 = (s.x + s.width) / t.width, s.v2 = (s.y + s.height) / t.height))
            }
        }}, o.Atlas.Format = {alpha: 0, intensity: 1, luminanceAlpha: 2, rgb565: 3, rgba4444: 4, rgb888: 5, rgba8888: 6}, o.Atlas.TextureFilter = {nearest: 0, linear: 1, mipMap: 2, mipMapNearestNearest: 3, mipMapLinearNearest: 4, mipMapNearestLinear: 5, mipMapLinearLinear: 6}, o.Atlas.TextureWrap = {mirroredRepeat: 0, clampToEdge: 1, repeat: 2}, o.AtlasPage = function () {
        }, o.AtlasPage.prototype = {name: null, format: null, minFilter: null, magFilter: null, uWrap: null, vWrap: null, rendererObject: null, width: 0, height: 0}, o.AtlasRegion = function () {
        }, o.AtlasRegion.prototype = {page: null, name: null, x: 0, y: 0, width: 0, height: 0, u: 0, v: 0, u2: 0, v2: 0, offsetX: 0, offsetY: 0, originalWidth: 0, originalHeight: 0, index: 0, rotate: !1, splits: null, pads: null}, o.AtlasReader = function (t) {
            this.lines = t.split(/\r\n|\r|\n/)
        }, o.AtlasReader.prototype = {index: 0, trim: function (t) {
            return t.replace(/^\s+|\s+$/g, "")
        }, readLine: function () {
            return this.index >= this.lines.length ? null : this.lines[this.index++]
        }, readValue: function () {
            var t = this.readLine(), e = t.indexOf(":");
            if (-1 == e)throw"Invalid line: " + t;
            return this.trim(t.substring(e + 1))
        }, readTuple: function (t) {
            var e = this.readLine(), i = e.indexOf(":");
            if (-1 == i)throw"Invalid line: " + e;
            for (var r = 0, s = i + 1; 3 > r; r++) {
                var n = e.indexOf(",", s);
                if (-1 == n) {
                    if (!r)throw"Invalid line: " + e;
                    break
                }
                t[r] = this.trim(e.substr(s, n - s)), s = n + 1
            }
            return t[r] = this.trim(e.substring(s)), r + 1
        }}, o.AtlasAttachmentLoader = function (t) {
            this.atlas = t
        }, o.AtlasAttachmentLoader.prototype = {newAttachment: function (t, e, i) {
            switch (e) {
                case o.AttachmentType.region:
                    var r = this.atlas.findRegion(i);
                    if (!r)throw"Region not found in atlas: " + i + " (" + e + ")";
                    var s = new o.RegionAttachment(i);
                    return s.rendererObject = r, s.setUVs(r.u, r.v, r.u2, r.v2, r.rotate), s.regionOffsetX = r.offsetX, s.regionOffsetY = r.offsetY, s.regionWidth = r.width, s.regionHeight = r.height, s.regionOriginalWidth = r.originalWidth, s.regionOriginalHeight = r.originalHeight, s
            }
            throw"Unknown attachment type: " + e
        }}, o.Bone.yDown = !0, e.AnimCache = {}, e.Spine = function (t) {
            if (e.DisplayObjectContainer.call(this), this.spineData = e.AnimCache[t], !this.spineData)throw new Error("Spine data must be preloaded using PIXI.SpineLoader or PIXI.AssetLoader: " + t);
            this.skeleton = new o.Skeleton(this.spineData), this.skeleton.updateWorldTransform(), this.stateData = new o.AnimationStateData(this.spineData), this.state = new o.AnimationState(this.stateData), this.slotContainers = [];
            for (var i = 0, r = this.skeleton.drawOrder.length; r > i; i++) {
                var s = this.skeleton.drawOrder[i], n = s.attachment, a = new e.DisplayObjectContainer;
                if (this.slotContainers.push(a), this.addChild(a), n instanceof o.RegionAttachment) {
                    var h = n.rendererObject.name, l = this.createSprite(s, n.rendererObject);
                    s.currentSprite = l, s.currentSpriteName = h, a.addChild(l)
                }
            }
        }, e.Spine.prototype = Object.create(e.DisplayObjectContainer.prototype), e.Spine.prototype.constructor = e.Spine, e.Spine.prototype.updateTransform = function () {
            this.lastTime = this.lastTime || Date.now();
            var t = .001 * (Date.now() - this.lastTime);
            this.lastTime = Date.now(), this.state.update(t), this.state.apply(this.skeleton), this.skeleton.updateWorldTransform();
            for (var i = this.skeleton.drawOrder, r = 0, s = i.length; s > r; r++) {
                var n = i[r], a = n.attachment, h = this.slotContainers[r];
                if (a instanceof o.RegionAttachment) {
                    if (a.rendererObject && (!n.currentSpriteName || n.currentSpriteName != a.name)) {
                        var l = a.rendererObject.name;
                        if (void 0 !== n.currentSprite && (n.currentSprite.visible = !1), n.sprites = n.sprites || {}, void 0 !== n.sprites[l])n.sprites[l].visible = !0; else {
                            var u = this.createSprite(n, a.rendererObject);
                            h.addChild(u)
                        }
                        n.currentSprite = n.sprites[l], n.currentSpriteName = l
                    }
                    h.visible = !0;
                    var c = n.bone;
                    h.position.x = c.worldX + a.x * c.m00 + a.y * c.m01, h.position.y = c.worldY + a.x * c.m10 + a.y * c.m11, h.scale.x = c.worldScaleX, h.scale.y = c.worldScaleY, h.rotation = -(n.bone.worldRotation * Math.PI / 180)
                } else h.visible = !1
            }
            e.DisplayObjectContainer.prototype.updateTransform.call(this)
        }, e.Spine.prototype.createSprite = function (t, i) {
            var r = e.TextureCache[i.name] ? i.name : i.name + ".png", s = new e.Sprite(e.Texture.fromFrame(r));
            return s.scale = i.scale, s.rotation = i.rotation, s.anchor.x = s.anchor.y = .5, t.sprites = t.sprites || {}, t.sprites[i.name] = s, s
        }, e.BaseTextureCache = {}, e.texturesToUpdate = [], e.texturesToDestroy = [], e.BaseTextureCacheIdGenerator = 0, e.BaseTexture = function (t, i) {
            if (e.EventTarget.call(this), this.width = 100, this.height = 100, this.scaleMode = i || e.scaleModes.DEFAULT, this.hasLoaded = !1, this.source = t, t) {
                if (this.source.complete || this.source.getContext)this.hasLoaded = !0, this.width = this.source.width, this.height = this.source.height, e.texturesToUpdate.push(this); else {
                    var r = this;
                    this.source.onload = function () {
                        r.hasLoaded = !0, r.width = r.source.width, r.height = r.source.height, e.texturesToUpdate.push(r), r.dispatchEvent({type: "loaded", content: r})
                    }
                }
                this.imageUrl = null, this._powerOf2 = !1, this.id = e.BaseTextureCacheIdGenerator++, this._glTextures = []
            }
        }, e.BaseTexture.prototype.constructor = e.BaseTexture, e.BaseTexture.prototype.destroy = function () {
            this.imageUrl && (delete e.BaseTextureCache[this.imageUrl], this.imageUrl = null, this.source.src = null), this.source = null, e.texturesToDestroy.push(this)
        }, e.BaseTexture.prototype.updateSourceImage = function (t) {
            this.hasLoaded = !1, this.source.src = null, this.source.src = t
        }, e.BaseTexture.fromImage = function (t, i, r) {
            var s = e.BaseTextureCache[t];
            if (i = !i, !s) {
                var n = new Image;
                i && (n.crossOrigin = ""), n.src = t, s = new e.BaseTexture(n, r), s.imageUrl = t, e.BaseTextureCache[t] = s
            }
            return s
        }, e.BaseTexture.fromCanvas = function (t, i) {
            t._pixiId || (t._pixiId = "canvas_" + e.TextureCacheIdGenerator++);
            var r = e.BaseTextureCache[t._pixiId];
            return r || (r = new e.BaseTexture(t, i), e.BaseTextureCache[t._pixiId] = r), r
        }, e.TextureCache = {}, e.FrameCache = {}, e.TextureCacheIdGenerator = 0, e.Texture = function (t, i) {
            if (e.EventTarget.call(this), i || (this.noFrame = !0, i = new e.Rectangle(0, 0, 1, 1)), t instanceof e.Texture && (t = t.baseTexture), this.baseTexture = t, this.frame = i, this.trim = null, this.scope = this, t.hasLoaded)this.noFrame && (i = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(i); else {
                var r = this;
                t.addEventListener("loaded", function () {
                    r.onBaseTextureLoaded()
                })
            }
        }, e.Texture.prototype.constructor = e.Texture, e.Texture.prototype.onBaseTextureLoaded = function () {
            var t = this.baseTexture;
            t.removeEventListener("loaded", this.onLoaded), this.noFrame && (this.frame = new e.Rectangle(0, 0, t.width, t.height)), this.setFrame(this.frame), this.scope.dispatchEvent({type: "update", content: this})
        }, e.Texture.prototype.destroy = function (t) {
            t && this.baseTexture.destroy()
        }, e.Texture.prototype.setFrame = function (t) {
            if (this.frame = t, this.width = t.width, this.height = t.height, t.x + t.width > this.baseTexture.width || t.y + t.height > this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
            this.updateFrame = !0, e.Texture.frameUpdates.push(this)
        }, e.Texture.prototype._updateWebGLuvs = function () {
            this._uvs || (this._uvs = new e.TextureUvs);
            var t = this.frame, i = this.baseTexture.width, r = this.baseTexture.height;
            this._uvs.x0 = t.x / i, this._uvs.y0 = t.y / r, this._uvs.x1 = (t.x + t.width) / i, this._uvs.y1 = t.y / r, this._uvs.x2 = (t.x + t.width) / i, this._uvs.y2 = (t.y + t.height) / r, this._uvs.x3 = t.x / i, this._uvs.y3 = (t.y + t.height) / r
        }, e.Texture.fromImage = function (t, i, r) {
            var s = e.TextureCache[t];
            return s || (s = new e.Texture(e.BaseTexture.fromImage(t, i, r)), e.TextureCache[t] = s), s
        }, e.Texture.fromFrame = function (t) {
            var i = e.TextureCache[t];
            if (!i)throw new Error('The frameId "' + t + '" does not exist in the texture cache ');
            return i
        }, e.Texture.fromCanvas = function (t, i) {
            var r = e.BaseTexture.fromCanvas(t, i);
            return new e.Texture(r)
        }, e.Texture.addTextureToCache = function (t, i) {
            e.TextureCache[i] = t
        }, e.Texture.removeTextureFromCache = function (t) {
            var i = e.TextureCache[t];
            return e.TextureCache[t] = null, i
        }, e.Texture.frameUpdates = [], e.TextureUvs = function () {
            this.x0 = 0, this.y0 = 0, this.x1 = 0, this.y1 = 0, this.x2 = 0, this.y2 = 0, this.x3 = 0, this.y4 = 0
        }, e.RenderTexture = function (t, i, r) {
            if (e.EventTarget.call(this), this.width = t || 100, this.height = i || 100, this.frame = new e.Rectangle(0, 0, this.width, this.height), this.baseTexture = new e.BaseTexture, this.baseTexture.width = this.width, this.baseTexture.height = this.height, this.baseTexture._glTextures = [], this.baseTexture.hasLoaded = !0, this.renderer = r || e.defaultRenderer, this.renderer.type === e.WEBGL_RENDERER) {
                var s = this.renderer.gl;
                this.textureBuffer = new e.FilterTexture(s, this.width, this.height), this.baseTexture._glTextures[s.id] = this.textureBuffer.texture, this.render = this.renderWebGL, this.projection = new e.Point(this.width / 2, -this.height / 2)
            } else this.render = this.renderCanvas, this.textureBuffer = new e.CanvasBuffer(this.width, this.height), this.baseTexture.source = this.textureBuffer.canvas;
            e.Texture.frameUpdates.push(this)
        }, e.RenderTexture.prototype = Object.create(e.Texture.prototype), e.RenderTexture.prototype.constructor = e.RenderTexture, e.RenderTexture.prototype.resize = function (t, i) {
            if (this.width = t, this.height = i, this.frame.width = this.width, this.frame.height = this.height, this.renderer.type === e.WEBGL_RENDERER) {
                this.projection.x = this.width / 2, this.projection.y = -this.height / 2;
                var r = this.renderer.gl;
                r.bindTexture(r.TEXTURE_2D, this.baseTexture._glTextures[r.id]), r.texImage2D(r.TEXTURE_2D, 0, r.RGBA, this.width, this.height, 0, r.RGBA, r.UNSIGNED_BYTE, null)
            } else this.textureBuffer.resize(this.width, this.height);
            e.Texture.frameUpdates.push(this)
        }, e.RenderTexture.prototype.renderWebGL = function (t, i, r) {
            var s = this.renderer.gl;
            s.colorMask(!0, !0, !0, !0), s.viewport(0, 0, this.width, this.height), s.bindFramebuffer(s.FRAMEBUFFER, this.textureBuffer.frameBuffer), r && this.textureBuffer.clear();
            var n = t.children, a = t.worldTransform;
            t.worldTransform = e.RenderTexture.tempMatrix, t.worldTransform.d = -1, t.worldTransform.ty = -2 * this.projection.y, i && (t.worldTransform.tx = i.x, t.worldTransform.ty -= i.y);
            for (var o = 0, h = n.length; h > o; o++)n[o].updateTransform();
            e.WebGLRenderer.updateTextures(), this.renderer.renderDisplayObject(t, this.projection, this.textureBuffer.frameBuffer), t.worldTransform = a
        }, e.RenderTexture.prototype.renderCanvas = function (t, i, r) {
            var s = t.children;
            t.worldTransform = e.RenderTexture.tempMatrix, i && (t.worldTransform.tx = i.x, t.worldTransform.ty = i.y);
            for (var n = 0, a = s.length; a > n; n++)s[n].updateTransform();
            r && this.textureBuffer.clear();
            var o = this.textureBuffer.context;
            this.renderer.renderDisplayObject(t, o), o.setTransform(1, 0, 0, 1, 0, 0)
        }, e.RenderTexture.tempMatrix = new e.Matrix, e.AssetLoader = function (t, i) {
            e.EventTarget.call(this), this.assetURLs = t, this.crossorigin = i, this.loadersByType = {jpg: e.ImageLoader, jpeg: e.ImageLoader, png: e.ImageLoader, gif: e.ImageLoader, json: e.JsonLoader, atlas: e.AtlasLoader, anim: e.SpineLoader, xml: e.BitmapFontLoader, fnt: e.BitmapFontLoader}
        }, e.AssetLoader.prototype.constructor = e.AssetLoader, e.AssetLoader.prototype._getDataType = function (t) {
            var e = "data:", i = t.slice(0, e.length).toLowerCase();
            if (i === e) {
                var r = t.slice(e.length), s = r.indexOf(",");
                if (-1 === s)return null;
                var n = r.slice(0, s).split(";")[0];
                return n && "text/plain" !== n.toLowerCase() ? n.split("/").pop().toLowerCase() : "txt"
            }
            return null
        }, e.AssetLoader.prototype.load = function () {
            function t(t) {
                e.onAssetLoaded(t.loader)
            }

            var e = this;
            this.loadCount = this.assetURLs.length;
            for (var i = 0; i < this.assetURLs.length; i++) {
                var r = this.assetURLs[i], s = this._getDataType(r);
                s || (s = r.split("?").shift().split(".").pop().toLowerCase());
                var n = this.loadersByType[s];
                if (!n)throw new Error(s + " is an unsupported file type");
                var a = new n(r, this.crossorigin);
                a.addEventListener("loaded", t), a.load()
            }
        }, e.AssetLoader.prototype.onAssetLoaded = function (t) {
            this.loadCount--, this.dispatchEvent({type: "onProgress", content: this, loader: t}), this.onProgress && this.onProgress(t), this.loadCount || (this.dispatchEvent({type: "onComplete", content: this}), this.onComplete && this.onComplete())
        }, e.JsonLoader = function (t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.baseUrl = t.replace(/[^\/]*$/, ""), this.loaded = !1
        }, e.JsonLoader.prototype.constructor = e.JsonLoader, e.JsonLoader.prototype.load = function () {
            this.ajaxRequest = new e.AjaxRequest(this.crossorigin);
            var t = this;
            this.ajaxRequest.onreadystatechange = function () {
                t.onJSONLoaded()
            }, this.ajaxRequest.open("GET", this.url, !0), this.ajaxRequest.overrideMimeType && this.ajaxRequest.overrideMimeType("application/json"), this.ajaxRequest.send(null)
        }, e.JsonLoader.prototype.onJSONLoaded = function () {
            if (4 === this.ajaxRequest.readyState)if (200 === this.ajaxRequest.status || -1 === window.location.protocol.indexOf("http"))if (this.json = JSON.parse(this.ajaxRequest.responseText), this.json.frames) {
                var t = this, i = this.baseUrl + this.json.meta.image, r = new e.ImageLoader(i, this.crossorigin), s = this.json.frames;
                this.texture = r.texture.baseTexture, r.addEventListener("loaded", function () {
                    t.onLoaded()
                });
                for (var n in s) {
                    var a = s[n].frame;
                    if (a && (e.TextureCache[n] = new e.Texture(this.texture, {x: a.x, y: a.y, width: a.w, height: a.h}), s[n].trimmed)) {
                        var h = e.TextureCache[n], l = s[n].sourceSize, u = s[n].spriteSourceSize;
                        h.trim = new e.Rectangle(u.x, u.y, l.w, l.h)
                    }
                }
                r.load()
            } else if (this.json.bones) {
                var c = new o.SkeletonJson, d = c.readSkeletonData(this.json);
                e.AnimCache[this.url] = d, this.onLoaded()
            } else this.onLoaded(); else this.onError()
        }, e.JsonLoader.prototype.onLoaded = function () {
            this.loaded = !0, this.dispatchEvent({type: "loaded", content: this})
        }, e.JsonLoader.prototype.onError = function () {
            this.dispatchEvent({type: "error", content: this})
        }, e.AtlasLoader = function (t, i) {
            e.EventTarget.call(this), this.url = t, this.baseUrl = t.replace(/[^\/]*$/, ""), this.crossorigin = i, this.loaded = !1
        }, e.AtlasLoader.constructor = e.AtlasLoader, e.AtlasLoader.prototype.load = function () {
            this.ajaxRequest = new e.AjaxRequest, this.ajaxRequest.onreadystatechange = this.onAtlasLoaded.bind(this), this.ajaxRequest.open("GET", this.url, !0), this.ajaxRequest.overrideMimeType && this.ajaxRequest.overrideMimeType("application/json"), this.ajaxRequest.send(null)
        }, e.AtlasLoader.prototype.onAtlasLoaded = function () {
            if (4 === this.ajaxRequest.readyState)if (200 === this.ajaxRequest.status || -1 === window.location.href.indexOf("http")) {
                this.atlas = {meta: {image: []}, frames: []};
                var t = this.ajaxRequest.responseText.split(/\r?\n/), i = -3, r = 0, s = null, n = !1, a = 0, o = 0, h = this.onLoaded.bind(this);
                for (a = 0; a < t.length; a++)if (t[a] = t[a].replace(/^\s+|\s+$/g, ""), "" === t[a] && (n = a + 1), t[a].length > 0) {
                    if (n === a)this.atlas.meta.image.push(t[a]), r = this.atlas.meta.image.length - 1, this.atlas.frames.push({}), i = -3; else if (i > 0)if (i % 7 === 1)null != s && (this.atlas.frames[r][s.name] = s), s = {name: t[a], frame: {}}; else {
                        var l = t[a].split(" ");
                        if (i % 7 === 3)s.frame.x = Number(l[1].replace(",", "")), s.frame.y = Number(l[2]); else if (i % 7 === 4)s.frame.w = Number(l[1].replace(",", "")), s.frame.h = Number(l[2]); else if (i % 7 === 5) {
                            var u = {x: 0, y: 0, w: Number(l[1].replace(",", "")), h: Number(l[2])};
                            u.w > s.frame.w || u.h > s.frame.h ? (s.trimmed = !0, s.realSize = u) : s.trimmed = !1
                        }
                    }
                    i++
                }
                if (null != s && (this.atlas.frames[r][s.name] = s), this.atlas.meta.image.length > 0) {
                    for (this.images = [], o = 0; o < this.atlas.meta.image.length; o++) {
                        var c = this.baseUrl + this.atlas.meta.image[o], d = this.atlas.frames[o];
                        this.images.push(new e.ImageLoader(c, this.crossorigin));
                        for (a in d) {
                            var p = d[a].frame;
                            p && (e.TextureCache[a] = new e.Texture(this.images[o].texture.baseTexture, {x: p.x, y: p.y, width: p.w, height: p.h}), d[a].trimmed && (e.TextureCache[a].realSize = d[a].realSize, e.TextureCache[a].trim.x = 0, e.TextureCache[a].trim.y = 0))
                        }
                    }
                    for (this.currentImageId = 0, o = 0; o < this.images.length; o++)this.images[o].addEventListener("loaded", h);
                    this.images[this.currentImageId].load()
                } else this.onLoaded()
            } else this.onError()
        }, e.AtlasLoader.prototype.onLoaded = function () {
            this.images.length - 1 > this.currentImageId ? (this.currentImageId++, this.images[this.currentImageId].load()) : (this.loaded = !0, this.dispatchEvent({type: "loaded", content: this}))
        }, e.AtlasLoader.prototype.onError = function () {
            this.dispatchEvent({type: "error", content: this})
        }, e.SpriteSheetLoader = function (t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.baseUrl = t.replace(/[^\/]*$/, ""), this.texture = null, this.frames = {}
        }, e.SpriteSheetLoader.prototype.constructor = e.SpriteSheetLoader, e.SpriteSheetLoader.prototype.load = function () {
            var t = this, i = new e.JsonLoader(this.url, this.crossorigin);
            i.addEventListener("loaded", function (e) {
                t.json = e.content.json, t.onLoaded()
            }), i.load()
        }, e.SpriteSheetLoader.prototype.onLoaded = function () {
            this.dispatchEvent({type: "loaded", content: this})
        }, e.ImageLoader = function (t, i) {
            e.EventTarget.call(this), this.texture = e.Texture.fromImage(t, i), this.frames = []
        }, e.ImageLoader.prototype.constructor = e.ImageLoader, e.ImageLoader.prototype.load = function () {
            if (this.texture.baseTexture.hasLoaded)this.onLoaded(); else {
                var t = this;
                this.texture.baseTexture.addEventListener("loaded", function () {
                    t.onLoaded()
                })
            }
        }, e.ImageLoader.prototype.onLoaded = function () {
            this.dispatchEvent({type: "loaded", content: this})
        }, e.ImageLoader.prototype.loadFramedSpriteSheet = function (t, i, r) {
            this.frames = [];
            for (var s = Math.floor(this.texture.width / t), n = Math.floor(this.texture.height / i), a = 0, o = 0; n > o; o++)for (var h = 0; s > h; h++, a++) {
                var l = new e.Texture(this.texture, {x: h * t, y: o * i, width: t, height: i});
                this.frames.push(l), r && (e.TextureCache[r + "-" + a] = l)
            }
            if (this.texture.baseTexture.hasLoaded)this.onLoaded(); else {
                var u = this;
                this.texture.baseTexture.addEventListener("loaded", function () {
                    u.onLoaded()
                })
            }
        }, e.BitmapFontLoader = function (t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.baseUrl = t.replace(/[^\/]*$/, ""), this.texture = null
        }, e.BitmapFontLoader.prototype.constructor = e.BitmapFontLoader, e.BitmapFontLoader.prototype.load = function () {
            this.ajaxRequest = new e.AjaxRequest;
            var t = this;
            this.ajaxRequest.onreadystatechange = function () {
                t.onXMLLoaded()
            }, this.ajaxRequest.open("GET", this.url, !0), this.ajaxRequest.overrideMimeType && this.ajaxRequest.overrideMimeType("application/xml"), this.ajaxRequest.send(null)
        }, e.BitmapFontLoader.prototype.onXMLLoaded = function () {
            if (4 === this.ajaxRequest.readyState && (200 === this.ajaxRequest.status || -1 === window.location.protocol.indexOf("http"))) {
                var t = this.ajaxRequest.responseXML;
                if (!t || /MSIE 9/i.test(navigator.userAgent) || navigator.isCocoonJS)if ("function" == typeof window.DOMParser) {
                    var i = new DOMParser;
                    t = i.parseFromString(this.ajaxRequest.responseText, "text/xml")
                } else {
                    var r = document.createElement("div");
                    r.innerHTML = this.ajaxRequest.responseText, t = r
                }
                var s = this.baseUrl + t.getElementsByTagName("page")[0].getAttribute("file"), n = new e.ImageLoader(s, this.crossorigin);
                this.texture = n.texture.baseTexture;
                var a = {}, o = t.getElementsByTagName("info")[0], h = t.getElementsByTagName("common")[0];
                a.font = o.getAttribute("face"), a.size = parseInt(o.getAttribute("size"), 10), a.lineHeight = parseInt(h.getAttribute("lineHeight"), 10), a.chars = {};
                for (var l = t.getElementsByTagName("char"), u = 0; u < l.length; u++) {
                    var c = parseInt(l[u].getAttribute("id"), 10), d = new e.Rectangle(parseInt(l[u].getAttribute("x"), 10), parseInt(l[u].getAttribute("y"), 10), parseInt(l[u].getAttribute("width"), 10), parseInt(l[u].getAttribute("height"), 10));
                    a.chars[c] = {xOffset: parseInt(l[u].getAttribute("xoffset"), 10), yOffset: parseInt(l[u].getAttribute("yoffset"), 10), xAdvance: parseInt(l[u].getAttribute("xadvance"), 10), kerning: {}, texture: e.TextureCache[c] = new e.Texture(this.texture, d)}
                }
                var p = t.getElementsByTagName("kerning");
                for (u = 0; u < p.length; u++) {
                    var m = parseInt(p[u].getAttribute("first"), 10), g = parseInt(p[u].getAttribute("second"), 10), f = parseInt(p[u].getAttribute("amount"), 10);
                    a.chars[g].kerning[m] = f
                }
                e.BitmapText.fonts[a.font] = a;
                var v = this;
                n.addEventListener("loaded", function () {
                    v.onLoaded()
                }), n.load()
            }
        }, e.BitmapFontLoader.prototype.onLoaded = function () {
            this.dispatchEvent({type: "loaded", content: this})
        }, e.SpineLoader = function (t, i) {
            e.EventTarget.call(this), this.url = t, this.crossorigin = i, this.loaded = !1
        }, e.SpineLoader.prototype.constructor = e.SpineLoader, e.SpineLoader.prototype.load = function () {
            var t = this, i = new e.JsonLoader(this.url, this.crossorigin);
            i.addEventListener("loaded", function (e) {
                t.json = e.content.json, t.onLoaded()
            }), i.load()
        }, e.SpineLoader.prototype.onLoaded = function () {
            this.loaded = !0, this.dispatchEvent({type: "loaded", content: this})
        }, e.AbstractFilter = function (t, e) {
            this.passes = [this], this.shaders = [], this.dirty = !0, this.padding = 0, this.uniforms = e || {}, this.fragmentSrc = t || []
        }, e.AlphaMaskFilter = function (t) {
            e.AbstractFilter.call(this), this.passes = [this], t.baseTexture._powerOf2 = !0, this.uniforms = {mask: {type: "sampler2D", value: t}, mapDimensions: {type: "2f", value: {x: 1, y: 5112}}, dimensions: {type: "4fv", value: [0, 0, 0, 0]}}, t.baseTexture.hasLoaded ? (this.uniforms.mask.value.x = t.width, this.uniforms.mask.value.y = t.height) : (this.boundLoadedFunction = this.onTextureLoaded.bind(this), t.baseTexture.on("loaded", this.boundLoadedFunction)), this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D mask;", "uniform sampler2D uSampler;", "uniform vec2 offset;", "uniform vec4 dimensions;", "uniform vec2 mapDimensions;", "void main(void) {", "   vec2 mapCords = vTextureCoord.xy;", "   mapCords += (dimensions.zw + offset)/ dimensions.xy ;", "   mapCords.y *= -1.0;", "   mapCords.y += 1.0;", "   mapCords *= dimensions.xy / mapDimensions;", "   vec4 original =  texture2D(uSampler, vTextureCoord);", "   float maskAlpha =  texture2D(mask, mapCords).r;", "   original *= maskAlpha;", "   gl_FragColor =  original;", "}"]
        }, e.AlphaMaskFilter.prototype = Object.create(e.AbstractFilter.prototype), e.AlphaMaskFilter.prototype.constructor = e.AlphaMaskFilter, e.AlphaMaskFilter.prototype.onTextureLoaded = function () {
            this.uniforms.mapDimensions.value.x = this.uniforms.mask.value.width, this.uniforms.mapDimensions.value.y = this.uniforms.mask.value.height, this.uniforms.mask.value.baseTexture.off("loaded", this.boundLoadedFunction)
        }, Object.defineProperty(e.AlphaMaskFilter.prototype, "map", {get: function () {
            return this.uniforms.mask.value
        }, set: function (t) {
            this.uniforms.mask.value = t
        }}), e.ColorMatrixFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {matrix: {type: "mat4", value: [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float invert;", "uniform mat4 matrix;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord) * matrix;", "}"]
        }, e.ColorMatrixFilter.prototype = Object.create(e.AbstractFilter.prototype), e.ColorMatrixFilter.prototype.constructor = e.ColorMatrixFilter, Object.defineProperty(e.ColorMatrixFilter.prototype, "matrix", {get: function () {
            return this.uniforms.matrix.value
        }, set: function (t) {
            this.uniforms.matrix.value = t
        }}), e.GrayFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {gray: {type: "1f", value: 1}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "uniform float gray;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord);", "   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);", "}"]
        }, e.GrayFilter.prototype = Object.create(e.AbstractFilter.prototype), e.GrayFilter.prototype.constructor = e.GrayFilter, Object.defineProperty(e.GrayFilter.prototype, "gray", {get: function () {
            return this.uniforms.gray.value
        }, set: function (t) {
            this.uniforms.gray.value = t
        }}), e.DisplacementFilter = function (t) {
            e.AbstractFilter.call(this), this.passes = [this], t.baseTexture._powerOf2 = !0, this.uniforms = {displacementMap: {type: "sampler2D", value: t}, scale: {type: "2f", value: {x: 30, y: 30}}, offset: {type: "2f", value: {x: 0, y: 0}}, mapDimensions: {type: "2f", value: {x: 1, y: 5112}}, dimensions: {type: "4fv", value: [0, 0, 0, 0]}}, t.baseTexture.hasLoaded ? (this.uniforms.mapDimensions.value.x = t.width, this.uniforms.mapDimensions.value.y = t.height) : (this.boundLoadedFunction = this.onTextureLoaded.bind(this), t.baseTexture.on("loaded", this.boundLoadedFunction)), this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D displacementMap;", "uniform sampler2D uSampler;", "uniform vec2 scale;", "uniform vec2 offset;", "uniform vec4 dimensions;", "uniform vec2 mapDimensions;", "void main(void) {", "   vec2 mapCords = vTextureCoord.xy;", "   mapCords += (dimensions.zw + offset)/ dimensions.xy ;", "   mapCords.y *= -1.0;", "   mapCords.y += 1.0;", "   vec2 matSample = texture2D(displacementMap, mapCords).xy;", "   matSample -= 0.5;", "   matSample *= scale;", "   matSample /= mapDimensions;", "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + matSample.x, vTextureCoord.y + matSample.y));", "   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb, 1.0);", "   vec2 cord = vTextureCoord;", "}"]
        }, e.DisplacementFilter.prototype = Object.create(e.AbstractFilter.prototype), e.DisplacementFilter.prototype.constructor = e.DisplacementFilter, e.DisplacementFilter.prototype.onTextureLoaded = function () {
            this.uniforms.mapDimensions.value.x = this.uniforms.displacementMap.value.width, this.uniforms.mapDimensions.value.y = this.uniforms.displacementMap.value.height, this.uniforms.displacementMap.value.baseTexture.off("loaded", this.boundLoadedFunction)
        }, Object.defineProperty(e.DisplacementFilter.prototype, "map", {get: function () {
            return this.uniforms.displacementMap.value
        }, set: function (t) {
            this.uniforms.displacementMap.value = t
        }}), Object.defineProperty(e.DisplacementFilter.prototype, "scale", {get: function () {
            return this.uniforms.scale.value
        }, set: function (t) {
            this.uniforms.scale.value = t
        }}), Object.defineProperty(e.DisplacementFilter.prototype, "offset", {get: function () {
            return this.uniforms.offset.value
        }, set: function (t) {
            this.uniforms.offset.value = t
        }}), e.PixelateFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {invert: {type: "1f", value: 0}, dimensions: {type: "4fv", value: new Float32Array([1e4, 100, 10, 10])}, pixelSize: {type: "2f", value: {x: 10, y: 10}}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec2 testDim;", "uniform vec4 dimensions;", "uniform vec2 pixelSize;", "uniform sampler2D uSampler;", "void main(void) {", "   vec2 coord = vTextureCoord;", "   vec2 size = dimensions.xy/pixelSize;", "   vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;", "   gl_FragColor = texture2D(uSampler, color);", "}"]
        }, e.PixelateFilter.prototype = Object.create(e.AbstractFilter.prototype), e.PixelateFilter.prototype.constructor = e.PixelateFilter, Object.defineProperty(e.PixelateFilter.prototype, "size", {get: function () {
            return this.uniforms.pixelSize.value
        }, set: function (t) {
            this.dirty = !0, this.uniforms.pixelSize.value = t
        }}), e.BlurXFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {blur: {type: "1f", value: 1 / 512}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float blur;", "uniform sampler2D uSampler;", "void main(void) {", "   vec4 sum = vec4(0.0);", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - 4.0*blur, vTextureCoord.y)) * 0.05;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - 3.0*blur, vTextureCoord.y)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - 2.0*blur, vTextureCoord.y)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x - blur, vTextureCoord.y)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + blur, vTextureCoord.y)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + 2.0*blur, vTextureCoord.y)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + 3.0*blur, vTextureCoord.y)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x + 4.0*blur, vTextureCoord.y)) * 0.05;", "   gl_FragColor = sum;", "}"]
        }, e.BlurXFilter.prototype = Object.create(e.AbstractFilter.prototype), e.BlurXFilter.prototype.constructor = e.BlurXFilter, Object.defineProperty(e.BlurXFilter.prototype, "blur", {get: function () {
            return this.uniforms.blur.value / (1 / 7e3)
        }, set: function (t) {
            this.dirty = !0, this.uniforms.blur.value = 1 / 7e3 * t
        }}), e.BlurYFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {blur: {type: "1f", value: 1 / 512}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float blur;", "uniform sampler2D uSampler;", "void main(void) {", "   vec4 sum = vec4(0.0);", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 4.0*blur)) * 0.05;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 3.0*blur)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - 2.0*blur)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - blur)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * 0.16;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + blur)) * 0.15;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 2.0*blur)) * 0.12;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 3.0*blur)) * 0.09;", "   sum += texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + 4.0*blur)) * 0.05;", "   gl_FragColor = sum;", "}"]
        }, e.BlurYFilter.prototype = Object.create(e.AbstractFilter.prototype), e.BlurYFilter.prototype.constructor = e.BlurYFilter, Object.defineProperty(e.BlurYFilter.prototype, "blur", {get: function () {
            return this.uniforms.blur.value / (1 / 7e3)
        }, set: function (t) {
            this.uniforms.blur.value = 1 / 7e3 * t
        }}), e.BlurFilter = function () {
            this.blurXFilter = new e.BlurXFilter, this.blurYFilter = new e.BlurYFilter, this.passes = [this.blurXFilter, this.blurYFilter]
        }, Object.defineProperty(e.BlurFilter.prototype, "blur", {get: function () {
            return this.blurXFilter.blur
        }, set: function (t) {
            this.blurXFilter.blur = this.blurYFilter.blur = t
        }}), Object.defineProperty(e.BlurFilter.prototype, "blurX", {get: function () {
            return this.blurXFilter.blur
        }, set: function (t) {
            this.blurXFilter.blur = t
        }}), Object.defineProperty(e.BlurFilter.prototype, "blurY", {get: function () {
            return this.blurYFilter.blur
        }, set: function (t) {
            this.blurYFilter.blur = t
        }}), e.InvertFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {invert: {type: "1f", value: 1}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float invert;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord);", "   gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);", "}"]
        }, e.InvertFilter.prototype = Object.create(e.AbstractFilter.prototype), e.InvertFilter.prototype.constructor = e.InvertFilter, Object.defineProperty(e.InvertFilter.prototype, "invert", {get: function () {
            return this.uniforms.invert.value
        }, set: function (t) {
            this.uniforms.invert.value = t
        }}), e.SepiaFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {sepia: {type: "1f", value: 1}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float sepia;", "uniform sampler2D uSampler;", "const mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);", "void main(void) {", "   gl_FragColor = texture2D(uSampler, vTextureCoord);", "   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);", "}"]
        }, e.SepiaFilter.prototype = Object.create(e.AbstractFilter.prototype), e.SepiaFilter.prototype.constructor = e.SepiaFilter, Object.defineProperty(e.SepiaFilter.prototype, "sepia", {get: function () {
            return this.uniforms.sepia.value
        }, set: function (t) {
            this.uniforms.sepia.value = t
        }}), e.TwistFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {radius: {type: "1f", value: .5}, angle: {type: "1f", value: 5}, offset: {type: "2f", value: {x: .5, y: .5}}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec4 dimensions;", "uniform sampler2D uSampler;", "uniform float radius;", "uniform float angle;", "uniform vec2 offset;", "void main(void) {", "   vec2 coord = vTextureCoord - offset;", "   float distance = length(coord);", "   if (distance < radius) {", "       float ratio = (radius - distance) / radius;", "       float angleMod = ratio * ratio * angle;", "       float s = sin(angleMod);", "       float c = cos(angleMod);", "       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);", "   }", "   gl_FragColor = texture2D(uSampler, coord+offset);", "}"]
        }, e.TwistFilter.prototype = Object.create(e.AbstractFilter.prototype), e.TwistFilter.prototype.constructor = e.TwistFilter, Object.defineProperty(e.TwistFilter.prototype, "offset", {get: function () {
            return this.uniforms.offset.value
        }, set: function (t) {
            this.dirty = !0, this.uniforms.offset.value = t
        }}), Object.defineProperty(e.TwistFilter.prototype, "radius", {get: function () {
            return this.uniforms.radius.value
        }, set: function (t) {
            this.dirty = !0, this.uniforms.radius.value = t
        }}), Object.defineProperty(e.TwistFilter.prototype, "angle", {get: function () {
            return this.uniforms.angle.value
        }, set: function (t) {
            this.dirty = !0, this.uniforms.angle.value = t
        }}), e.ColorStepFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {step: {type: "1f", value: 5}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform sampler2D uSampler;", "uniform float step;", "void main(void) {", "   vec4 color = texture2D(uSampler, vTextureCoord);", "   color = floor(color * step) / step;", "   gl_FragColor = color;", "}"]
        }, e.ColorStepFilter.prototype = Object.create(e.AbstractFilter.prototype), e.ColorStepFilter.prototype.constructor = e.ColorStepFilter, Object.defineProperty(e.ColorStepFilter.prototype, "step", {get: function () {
            return this.uniforms.step.value
        }, set: function (t) {
            this.uniforms.step.value = t
        }}), e.DotScreenFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {scale: {type: "1f", value: 1}, angle: {type: "1f", value: 5}, dimensions: {type: "4fv", value: [0, 0, 0, 0]}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec4 dimensions;", "uniform sampler2D uSampler;", "uniform float angle;", "uniform float scale;", "float pattern() {", "   float s = sin(angle), c = cos(angle);", "   vec2 tex = vTextureCoord * dimensions.xy;", "   vec2 point = vec2(", "       c * tex.x - s * tex.y,", "       s * tex.x + c * tex.y", "   ) * scale;", "   return (sin(point.x) * sin(point.y)) * 4.0;", "}", "void main() {", "   vec4 color = texture2D(uSampler, vTextureCoord);", "   float average = (color.r + color.g + color.b) / 3.0;", "   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);", "}"]
        }, e.DotScreenFilter.prototype = Object.create(e.DotScreenFilter.prototype), e.DotScreenFilter.prototype.constructor = e.DotScreenFilter, Object.defineProperty(e.DotScreenFilter.prototype, "scale", {get: function () {
            return this.uniforms.scale.value
        }, set: function (t) {
            this.dirty = !0, this.uniforms.scale.value = t
        }}), Object.defineProperty(e.DotScreenFilter.prototype, "angle", {get: function () {
            return this.uniforms.angle.value
        }, set: function (t) {
            this.dirty = !0, this.uniforms.angle.value = t
        }}), e.CrossHatchFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {blur: {type: "1f", value: 1 / 512}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform float blur;", "uniform sampler2D uSampler;", "void main(void) {", "    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);", "    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);", "    if (lum < 1.00) {", "        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "    if (lum < 0.75) {", "        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "    if (lum < 0.50) {", "        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "    if (lum < 0.3) {", "        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0) {", "            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);", "        }", "    }", "}"]
        }, e.CrossHatchFilter.prototype = Object.create(e.AbstractFilter.prototype), e.CrossHatchFilter.prototype.constructor = e.BlurYFilter, Object.defineProperty(e.CrossHatchFilter.prototype, "blur", {get: function () {
            return this.uniforms.blur.value / (1 / 7e3)
        }, set: function (t) {
            this.uniforms.blur.value = 1 / 7e3 * t
        }}), e.RGBSplitFilter = function () {
            e.AbstractFilter.call(this), this.passes = [this], this.uniforms = {red: {type: "2f", value: {x: 20, y: 20}}, green: {type: "2f", value: {x: -20, y: 20}}, blue: {type: "2f", value: {x: 20, y: -20}}, dimensions: {type: "4fv", value: [0, 0, 0, 0]}}, this.fragmentSrc = ["precision mediump float;", "varying vec2 vTextureCoord;", "varying vec4 vColor;", "uniform vec2 red;", "uniform vec2 green;", "uniform vec2 blue;", "uniform vec4 dimensions;", "uniform sampler2D uSampler;", "void main(void) {", "   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;", "   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;", "   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;", "   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;", "}"]
        }, e.RGBSplitFilter.prototype = Object.create(e.AbstractFilter.prototype), e.RGBSplitFilter.prototype.constructor = e.RGBSplitFilter, Object.defineProperty(e.RGBSplitFilter.prototype, "angle", {get: function () {
            return this.uniforms.blur.value / (1 / 7e3)
        }, set: function (t) {
            this.uniforms.blur.value = 1 / 7e3 * t
        }}), "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = e), exports.PIXI = e) : "undefined" != typeof define && define.amd ? define(e) : t.PIXI = e
    }).call(this), PIXI.FlashClip = function (t) {
        var e = [];
        for (var i in PIXI.TextureCache)-1 != i.indexOf(t) && i.length == t.length + 4 && e.push(PIXI.Texture.fromFrame(i));
        if (0 == e.length)throw"FlashClip textures not found";
        PIXI.MovieClip.call(this, e)
    }, PIXI.FlashClip.prototype = Object.create(PIXI.MovieClip.prototype), PIXI.FlashClip.prototype.constructor = PIXI.FlashClip, PIXI.WindowsPhoneLoaders = {}, window.PIXI_WindowsPhone_fileLoaded = function (t, e) {
        PIXI.WindowsPhoneLoaders[t] && (PIXI.WindowsPhoneLoaders[t].ajaxRequest = {}, PIXI.WindowsPhoneLoaders[t].ajaxRequest.readyState = 4, PIXI.WindowsPhoneLoaders[t].ajaxRequest.status = 200, PIXI.WindowsPhoneLoaders[t].ajaxRequest.responseText = e, PIXI.WindowsPhoneLoaders[t].ajaxRequest.responseXML = "", PIXI.WindowsPhoneLoaders[t].onJSONLoaded && PIXI.WindowsPhoneLoaders[t].onJSONLoaded(), PIXI.WindowsPhoneLoaders[t].onXMLLoaded && PIXI.WindowsPhoneLoaders[t].onXMLLoaded())
    }, window.PIXI_WindowsPhone_fix = function () {
        return"undefined" != typeof window.external && "unknown" == typeof window.external.notify && /Windows Phone/i.test(navigator.userAgent) ? (PIXI.WindowsPhoneLoaders[this.url] = this, window.external.notify("GetResource?file=" + this.url + ";callback=PIXI_WindowsPhone_fileLoaded"), !0) : !1
    }, PIXI.extend = function (t) {
        function e() {
            this.init ? this.init.apply(this, arguments) : this.base.apply(this, arguments);
            for (i in r)"function" != typeof r[i] && (this[i] = game.copy(r[i]));
            for (i in t)"function" != typeof t[i] && (this[i] = game.copy(t[i]))
        }

        var i, r = this.prototype, s = this.prototype.base || this;
        e.prototype = Object.create(s.prototype);
        var n = function (t, e) {
            var i = r[t];
            return"init" !== t || i || (i = s), function () {
                var t = this.super;
                this.super = i;
                var r = e.apply(this, arguments);
                return this.super = t, r
            }
        };
        for (i in r)e.prototype[i] = "function" == typeof r[i] ? n(i, r[i]) : r[i];
        for (i in t)e.prototype[i] = "function" == typeof t[i] ? n(i, t[i]) : t[i];
        return e.prototype.constructor = e, e.prototype.base = s, e.extend = PIXI.extend, e
    };
    for (var t in PIXI)PIXI[t].prototype instanceof Object && (PIXI[t].extend = PIXI.extend);
    game.AssetLoader = PIXI.AssetLoader, game.Text = PIXI.Text, game.MovieClip = PIXI.MovieClip, game.FlashClip = PIXI.FlashClip, game.BitmapText = PIXI.BitmapText, game.Spine = PIXI.Spine, game.Graphics = PIXI.Graphics, game.HitRectangle = PIXI.Rectangle, game.HitCircle = PIXI.Circle, game.HitEllipse = PIXI.Ellipse, game.HitPolygon = PIXI.Polygon, game.TextureCache = PIXI.TextureCache
}), game.module("engine.sprite").require("engine.renderer").body(function () {
    game.Sprite = PIXI.Sprite.extend({init: function (t, e, i, r) {
        "number" != typeof t && (i = t), i = game.assets[i] || i;
        var s = i instanceof PIXI.Texture ? i : PIXI.Texture.fromFrame(this.path || i);
        this.super(s), game.merge(this, r), "number" == typeof t && (this.position.x = t), "number" == typeof e && (this.position.y = e), game.device.mobile && !this.tap && this.click && (this.tap = this.click), game.device.mobile && !this.touchmove && this.mousemove && (this.touchmove = this.mousemove), game.device.mobile && !this.touchstart && this.mousedown && (this.touchstart = this.mousedown), game.device.mobile && !this.touchend && this.mouseup && (this.touchend = this.mouseup), game.device.mobile && !this.touchendoutside && this.mouseupoutside && (this.touchendoutside = this.mouseupoutside)
    }, setTexture: function (t) {
        "string" == typeof t && (t = game.assets[t] || t, t = game.Texture.fromFrame(t)), this.super(t)
    }, remove: function () {
        this.parent && this.parent.removeChild(this)
    }}), game.Container = PIXI.DisplayObjectContainer.extend({remove: function () {
        this.parent && this.parent.removeChild(this)
    }, addChild: function (t) {
        this.super(t), game.debugDraw && t.interactive && game.debugDraw.addSprite(t)
    }}), game.Texture = PIXI.Texture.extend(), game.Texture.fromImage = function (t) {
        return t = game.assets[t] || t, PIXI.Texture.fromImage(t)
    }, game.Texture.fromCanvas = PIXI.Texture.fromCanvas, game.Texture.fromFrame = PIXI.Texture.fromFrame, game.TilingSprite = PIXI.TilingSprite.extend({speed: {x: 0, y: 0}, init: function (t, e, i, r, s, n) {
        var a = i instanceof PIXI.Texture ? i : PIXI.Texture.fromFrame(this.path || i);
        this.super(a, r || a.width, s || a.height), game.merge(this, n), this.position.x = t, this.position.y = e
    }, update: function () {
        this.tilePosition.x += this.speed.x * game.system.delta, this.tilePosition.y += this.speed.y * game.system.delta
    }}), game.Animation = PIXI.MovieClip.extend({init: function () {
        for (var t = Array.prototype.slice.call(arguments), e = [], i = 0; i < t.length; i++)e.push(game.Texture.fromImage(t[i]));
        this.super(e)
    }})
}), game.module("engine.debug").body(function () {
    "use strict";
    game.DebugDraw = game.Class.extend({container: null, init: function () {
        this.container = new game.Container
    }, reset: function () {
        for (var t = this.container.children.length - 1; t >= 0; t--)this.container.removeChild(this.container.children[t]);
        game.system.stage.addChild(this.container)
    }, addSprite: function (t) {
        var e = new game.Graphics;
        e.beginFill(game.DebugDraw.spriteColor), e.drawRect(-t.width * t.anchor.x, -t.height * t.anchor.y, t.width, t.height), e.target = t, e.alpha = game.DebugDraw.spriteAlpha, this.container.addChild(e)
    }, addBody: function (t) {
        var e = new game.Graphics;
        this.drawSprite(e, t), e.position.x = t.position.x, e.position.y = t.position.y, e.target = t, e.alpha = game.DebugDraw.shapeAlpha, this.container.addChild(e)
    }, drawSprite: function (t, e) {
        t.clear(), t.beginFill(game.DebugDraw.shapeColor), e.shape instanceof game.Rectangle && (t.drawRect(-e.shape.width / 2, -e.shape.height / 2, e.shape.width, e.shape.height), t.width = e.shape.width, t.height = e.shape.height), e.shape instanceof game.Circle && (t.drawCircle(0, 0, e.shape.radius), t.radius = e.shape.radius)
    }, update: function () {
        for (var t = this.container.children.length - 1; t >= 0; t--)this.container.children[t].rotation = this.container.children[t].target.rotation, game.modules["engine.physics"] && this.container.children[t].target instanceof game.Body ? ((this.container.children[t].width !== this.container.children[t].target.shape.width || this.container.children[t].height !== this.container.children[t].target.shape.height) && this.drawSprite(this.container.children[t], this.container.children[t].target), this.container.children[t].radius !== this.container.children[t].target.shape.radius && this.drawSprite(this.container.children[t], this.container.children[t].target), this.container.children[t].position.x = this.container.children[t].target.position.x + game.scene.stage.position.x, this.container.children[t].position.y = this.container.children[t].target.position.y + game.scene.stage.position.y, this.container.children[t].target.world || this.container.removeChild(this.container.children[t])) : (this.container.children[t].target.parent && this.container.children[t].target.updateTransform(), this.container.children[t].position.x = this.container.children[t].target.worldTransform[2], this.container.children[t].position.y = this.container.children[t].target.worldTransform[5], this.container.children[t].scale.x = this.container.children[t].target.scale.x, this.container.children[t].scale.y = this.container.children[t].target.scale.y, this.container.children[t].target.parent || this.container.removeChild(this.container.children[t]))
    }}), game.DebugDraw.spriteColor = 16711680, game.DebugDraw.spriteAlpha = .3, game.DebugDraw.shapeColor = 255, game.DebugDraw.shapeAlpha = .3, game.DebugDraw.enabled = document.location.href.match(/\?debugdraw/) ? !0 : !1, game.Debug = game.Class.extend({init: function () {
        var t = function () {
            var t, e = Date.now(), i = e, r = 0, s = 1 / 0, n = 0, a = 0, o = 1 / 0, h = 0, l = 0, u = 0, c = document.createElement("div");
            c.id = "stats", c.addEventListener("mousedown", function (t) {
                t.preventDefault(), y(++u % 2)
            }, !1), c.style.cssText = "width:80px;opacity:0.9;cursor:pointer";
            var d = document.createElement("div");
            d.id = "fps", d.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#002", c.appendChild(d);
            var p = document.createElement("div");
            p.id = "fpsText", p.style.cssText = "color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", p.innerHTML = "FPS", d.appendChild(p);
            var m = document.createElement("div");
            for (m.id = "fpsGraph", m.style.cssText = "position:relative;width:74px;height:30px;background-color:#0ff", d.appendChild(m); m.children.length < 74;)t = document.createElement("span"), t.style.cssText = "width:1px;height:30px;float:left;background-color:#113", m.appendChild(t);
            var g = document.createElement("div");
            g.id = "ms", g.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#020;display:none", c.appendChild(g);
            var f = document.createElement("div");
            f.id = "msText", f.style.cssText = "color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", f.innerHTML = "MS", g.appendChild(f);
            var v = document.createElement("div");
            for (v.id = "msGraph", v.style.cssText = "position:relative;width:74px;height:30px;background-color:#0f0", g.appendChild(v); v.children.length < 74;)t = document.createElement("span"), t.style.cssText = "width:1px;height:30px;float:left;background-color:#131", v.appendChild(t);
            var y = function (t) {
                switch (u = t) {
                    case 0:
                        d.style.display = "block", g.style.display = "none";
                        break;
                    case 1:
                        d.style.display = "none", g.style.display = "block"
                }
            }, x = function (t, e) {
                var i = t.appendChild(t.firstChild);
                i.style.height = e + "px"
            };
            return{REVISION: 11, domElement: c, setMode: y, begin: function () {
                e = Date.now()
            }, end: function () {
                var t = Date.now();
                return r = t - e, s = Math.min(s, r), n = Math.max(n, r), f.textContent = r + " MS (" + s + "-" + n + ")", x(v, Math.min(30, 30 - r / 200 * 30)), l++, t > i + 1e3 && (a = Math.round(1e3 * l / (t - i)), o = Math.min(o, a), h = Math.max(h, a), p.textContent = a + " FPS (" + o + "-" + h + ")", x(m, Math.min(30, 30 - a / 100 * 30)), i = t, l = 0), t
            }, update: function () {
                e = this.end()
            }}
        };
        this.stats = new t, document.body.appendChild(this.stats.domElement), this.stats.domElement.style.position = "absolute", game.device.mobile ? (this.setPosition = game.Debug.position.mobile, this.setPosition(), document.getElementById("fpsGraph").style.display = "none", document.getElementById("msGraph").style.display = "none") : (this.setPosition = game.Debug.position.desktop, this.setPosition()), document.getElementById("fps").style.backgroundColor = game.renderer.gl ? game.Debug.backgroundColor.webGL : game.Debug.backgroundColor.canvas
    }}), game.Debug.backgroundColor = {canvas: "#ff0000", webGL: "#0000ff"}, game.Debug.POSITION = {TOPLEFT: function () {
        this.stats.domElement.style.left = "0px", this.stats.domElement.style.top = "0px"
    }, BOTTOMLEFT: function () {
        this.stats.domElement.style.left = "0px", this.stats.domElement.style.bottom = "0px"
    }, TOPRIGHT: function () {
        this.stats.domElement.style.right = "0px", this.stats.domElement.style.top = "0px"
    }, BOTTOMRIGHT: function () {
        this.stats.domElement.style.right = "0px", this.stats.domElement.style.bottom = "0px"
    }}, game.Debug.position = {desktop: game.Debug.POSITION.TOPLEFT, mobile: game.Debug.POSITION.TOPLEFT}, game.Debug.enabled = document.location.href.match(/\?debug/) ? !0 : !1
}), game.module("engine.storage").body(function () {
    "use strict";
    game.Storage = game.Class.extend({id: null, init: function (t) {
        this.id = t
    }, set: function (t, e) {
        localStorage[this.id + "." + t] = e
    }, get: function (t) {
        return localStorage[this.id + "." + t]
    }, remove: function (t) {
        localStorage.removeItem(this.id + "." + t)
    }, reset: function () {
        for (var t in localStorage)-1 !== t.indexOf(this.id + ".") && localStorage.removeItem(t)
    }})
}), game.module("engine.tween").body(function () {
    void 0 === Date.now && (Date.now = function () {
        return(new Date).valueOf()
    }), game.TweenEngine = function () {
        var t = [];
        return{REVISION: "12", getAll: function () {
            return t
        }, removeAll: function () {
            t.length = 0
        }, add: function (e) {
            t.push(e)
        }, remove: function (e) {
            var i = t.indexOf(e);
            -1 !== i && t.splice(i, 1)
        }, update: function (e) {
            if (0 === t.length)return!1;
            var i = 0;
            for (e = void 0 !== e ? e : game.Timer.time; i < t.length;)t[i].update(e) ? i++ : t.splice(i, 1);
            return!0
        }}
    }(), game.Tween = function (t, e, i, r) {
        if (!t)throw"No object defined for tween";
        r = r || {};
        var s = t, n = {}, a = e || {}, o = {}, h = i || 1e3, l = 0, u = 0, c = !1, d = !1, p = !1, m = 0, g = !1, f = null, v = null, y = r.easing || game.Tween.Easing.Linear.None, x = r.interpolation || game.Tween.Interpolation.Linear, b = [], T = r.onStart || null, w = !1, S = r.onUpdate || null, C = r.onComplete || null;
        for (var A in t)n[A] = parseFloat(t[A], 10);
        this.to = function (t, e) {
            return void 0 !== e && (h = e), a = t, this
        }, this.start = function (t) {
            game.TweenEngine.add(this), d = !0, w = !1, f = void 0 !== t ? t : game.Timer.time, f += m, v = f;
            for (var e in a) {
                if (a[e]instanceof Array) {
                    if (0 === a[e].length)continue;
                    a[e] = [s[e]].concat(a[e])
                }
                n[e] = s[e], n[e]instanceof Array == !1 && (n[e] *= 1), o[e] = n[e] || 0
            }
            return this
        }, this.stop = function () {
            return d ? (game.TweenEngine.remove(this), d = !1, this.stopChainedTweens(), this) : this
        }, this.stopChainedTweens = function () {
            for (var t = 0, e = b.length; e > t; t++)b[t].stop()
        }, this.delay = function (t, e) {
            return m = t, g = !!e, this
        }, this.repeat = function (t) {
            return"undefined" == typeof t && (t = 1 / 0), l = t, this
        }, this.yoyo = function (t) {
            return"undefined" == typeof t && (t = !0), c = t, this
        }, this.easing = function (t) {
            return y = t, this
        }, this.interpolation = function (t) {
            return x = t, this
        }, this.chain = function () {
            return b = arguments, this
        }, this.onStart = function (t) {
            return T = t, this
        }, this.onUpdate = function (t) {
            return S = t, this
        }, this.onComplete = function (t) {
            return C = t, this
        }, this.isPlaying = function () {
            return d
        }, this.update = function (t) {
            var e;
            if (f > t)return!0;
            w === !1 && (null !== T && T.call(s), w = !0);
            var i = (t - f) / h;
            i = i > 1 ? 1 : i;
            var r = y(i);
            for (e in a) {
                var A = n[e] || 0, E = a[e];
                E instanceof Array ? s[e] = x(E, r) : ("string" == typeof E && (E = A + parseFloat(E, 10)), "number" == typeof E && (s[e] = A + (E - A) * r))
            }
            if (null !== S && S.call(s, r), 1 === i) {
                if (l > 0) {
                    isFinite(l) && l--, u += 1;
                    for (e in o) {
                        if ("string" == typeof a[e] && (o[e] = o[e] + parseFloat(a[e], 10)), c) {
                            var M = o[e];
                            o[e] = a[e], a[e] = M, p = !p
                        }
                        n[e] = o[e]
                    }
                    return g || (m = 0), f = v + u * (h + m), !0
                }
                d = !1, null !== C && C.call(s);
                for (var L = 0, R = b.length; R > L; L++)b[L].start(t);
                return!1
            }
            return!0
        }
    }, game.Tween.Easing = {Linear: {None: function (t) {
        return t
    }}, Quadratic: {In: function (t) {
        return t * t
    }, Out: function (t) {
        return t * (2 - t)
    }, InOut: function (t) {
        return(t *= 2) < 1 ? .5 * t * t : -.5 * (--t * (t - 2) - 1)
    }}, Cubic: {In: function (t) {
        return t * t * t
    }, Out: function (t) {
        return--t * t * t + 1
    }, InOut: function (t) {
        return(t *= 2) < 1 ? .5 * t * t * t : .5 * ((t -= 2) * t * t + 2)
    }}, Quartic: {In: function (t) {
        return t * t * t * t
    }, Out: function (t) {
        return 1 - --t * t * t * t
    }, InOut: function (t) {
        return(t *= 2) < 1 ? .5 * t * t * t * t : -.5 * ((t -= 2) * t * t * t - 2)
    }}, Quintic: {In: function (t) {
        return t * t * t * t * t
    }, Out: function (t) {
        return--t * t * t * t * t + 1
    }, InOut: function (t) {
        return(t *= 2) < 1 ? .5 * t * t * t * t * t : .5 * ((t -= 2) * t * t * t * t + 2)
    }}, Sinusoidal: {In: function (t) {
        return 1 - Math.cos(t * Math.PI / 2)
    }, Out: function (t) {
        return Math.sin(t * Math.PI / 2)
    }, InOut: function (t) {
        return.5 * (1 - Math.cos(Math.PI * t))
    }}, Exponential: {In: function (t) {
        return 0 === t ? 0 : Math.pow(1024, t - 1)
    }, Out: function (t) {
        return 1 === t ? 1 : 1 - Math.pow(2, -10 * t)
    }, InOut: function (t) {
        return 0 === t ? 0 : 1 === t ? 1 : (t *= 2) < 1 ? .5 * Math.pow(1024, t - 1) : .5 * (-Math.pow(2, -10 * (t - 1)) + 2)
    }}, Circular: {In: function (t) {
        return 1 - Math.sqrt(1 - t * t)
    }, Out: function (t) {
        return Math.sqrt(1 - --t * t)
    }, InOut: function (t) {
        return(t *= 2) < 1 ? -.5 * (Math.sqrt(1 - t * t) - 1) : .5 * (Math.sqrt(1 - (t -= 2) * t) + 1)
    }}, Elastic: {In: function (t) {
        var e, i = .1, r = .4;
        return 0 === t ? 0 : 1 === t ? 1 : (!i || 1 > i ? (i = 1, e = r / 4) : e = r * Math.asin(1 / i) / (2 * Math.PI), -(i * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / r)))
    }, Out: function (t) {
        var e, i = .1, r = .4;
        return 0 === t ? 0 : 1 === t ? 1 : (!i || 1 > i ? (i = 1, e = r / 4) : e = r * Math.asin(1 / i) / (2 * Math.PI), i * Math.pow(2, -10 * t) * Math.sin(2 * (t - e) * Math.PI / r) + 1)
    }, InOut: function (t) {
        var e, i = .1, r = .4;
        return 0 === t ? 0 : 1 === t ? 1 : (!i || 1 > i ? (i = 1, e = r / 4) : e = r * Math.asin(1 / i) / (2 * Math.PI), (t *= 2) < 1 ? -.5 * i * Math.pow(2, 10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / r) : i * Math.pow(2, -10 * (t -= 1)) * Math.sin(2 * (t - e) * Math.PI / r) * .5 + 1)
    }}, Back: {In: function (t) {
        var e = 1.70158;
        return t * t * ((e + 1) * t - e)
    }, Out: function (t) {
        var e = 1.70158;
        return--t * t * ((e + 1) * t + e) + 1
    }, InOut: function (t) {
        var e = 2.5949095;
        return(t *= 2) < 1 ? .5 * t * t * ((e + 1) * t - e) : .5 * ((t -= 2) * t * ((e + 1) * t + e) + 2)
    }}, Bounce: {In: function (t) {
        return 1 - game.Tween.Easing.Bounce.Out(1 - t)
    }, Out: function (t) {
        return 1 / 2.75 > t ? 7.5625 * t * t : 2 / 2.75 > t ? 7.5625 * (t -= 1.5 / 2.75) * t + .75 : 2.5 / 2.75 > t ? 7.5625 * (t -= 2.25 / 2.75) * t + .9375 : 7.5625 * (t -= 2.625 / 2.75) * t + .984375
    }, InOut: function (t) {
        return.5 > t ? .5 * game.Tween.Easing.Bounce.In(2 * t) : .5 * game.Tween.Easing.Bounce.Out(2 * t - 1) + .5
    }}}, game.Tween.Easing.getNamesList = function () {
        var t = [];
        for (var e in game.Tween.Easing)for (var i in game.Tween.Easing[e])t.push(e + "." + i);
        return t
    }, game.Tween.Easing.getByName = function (t) {
        t = t.split(".");
        var e = t[1];
        return t = t[0], game.Tween.Easing[t][e]
    }, game.Tween.Easing.getName = function (t) {
        for (var e in game.Tween.Easing)for (var i in game.Tween.Easing[e])if (t === game.Tween.Easing[e][i])return e + "." + i
    }, game.Tween.Interpolation = {Linear: function (t, e) {
        var i = t.length - 1, r = i * e, s = Math.floor(r), n = game.Tween.Interpolation.Utils.Linear;
        return 0 > e ? n(t[0], t[1], r) : e > 1 ? n(t[i], t[i - 1], i - r) : n(t[s], t[s + 1 > i ? i : s + 1], r - s)
    }, Bezier: function (t, e) {
        var i, r = 0, s = t.length - 1, n = Math.pow, a = game.Tween.Interpolation.Utils.Bernstein;
        for (i = 0; s >= i; i++)r += n(1 - e, s - i) * n(e, i) * t[i] * a(s, i);
        return r
    }, CatmullRom: function (t, e) {
        var i = t.length - 1, r = i * e, s = Math.floor(r), n = game.Tween.Interpolation.Utils.CatmullRom;
        return t[0] === t[i] ? (0 > e && (s = Math.floor(r = i * (1 + e))), n(t[(s - 1 + i) % i], t[s], t[(s + 1) % i], t[(s + 2) % i], r - s)) : 0 > e ? t[0] - (n(t[0], t[0], t[1], t[1], -r) - t[0]) : e > 1 ? t[i] - (n(t[i], t[i], t[i - 1], t[i - 1], r - i) - t[i]) : n(t[s ? s - 1 : 0], t[s], t[s + 1 > i ? i : s + 1], t[s + 2 > i ? i : s + 2], r - s)
    }, Utils: {Linear: function (t, e, i) {
        return(e - t) * i + t
    }, Bernstein: function (t, e) {
        var i = game.Tween.Interpolation.Utils.Factorial;
        return i(t) / i(e) / i(t - e)
    }, Factorial: function () {
        var t = [1];
        return function (e) {
            var i, r = 1;
            if (t[e])return t[e];
            for (i = e; i > 1; i--)r *= i;
            return t[e] = r
        }
    }(), CatmullRom: function (t, e, i, r, s) {
        var n = .5 * (i - t), a = .5 * (r - e), o = s * s, h = s * o;
        return(2 * e - 2 * i + n + a) * h + (-3 * e + 3 * i - 2 * n - a) * o + n * s + e
    }}}, game.TweenGroup = game.Class.extend({tweens: [], onComplete: null, complete: !1, init: function (t) {
        this.onComplete = t
    }, tween: function (t) {
        var e = new game.Tween(t);
        return e.onComplete(this.tweenComplete.bind(this)), this.tweens.push(e), e
    }, tweenComplete: function () {
        if (!this.complete) {
            for (var t = 0; t < this.tweens.length; t++)if (this.tweens[t].isPlaying())return;
            this.complete = !0, "function" == typeof this.onComplete && this.onComplete()
        }
    }, remove: function (t) {
        this.tweens.erase(t)
    }, start: function () {
        for (var t = 0; t < this.tweens.length; t++)this.tweens[t].start()
    }, pause: function () {
        for (var t = 0; t < this.tweens.length; t++)this.tweens[t].pause()
    }, resume: function () {
        for (var t = 0; t < this.tweens.length; t++)this.tweens[t].resume()
    }, stop: function (t, e) {
        if (!this.complete) {
            for (var i = 0; i < this.tweens.length; i++)this.tweens[i].stop(e);
            !this.complete && t && this.tweenComplete(), this.complete = !0
        }
    }})
}), game.module("engine.scene").body(function () {
    "use strict";
    game.Scene = game.Class.extend({backgroundColor: 0, objects: [], timers: [], emitters: [], stage: null, staticInit: function () {
        game.scene = this;
        for (var t = game.system.stage.children.length - 1; t >= 0; t--)game.system.stage.removeChild(game.system.stage.children[t]);
        game.system.stage.setBackgroundColor(this.clearColor || this.backgroundColor), game.system.stage.mousemove = game.system.stage.touchmove = this.mousemove.bind(this), game.system.stage.click = game.system.stage.tap = this.click.bind(this), game.system.stage.mousedown = game.system.stage.touchstart = this.mousedown.bind(this), game.system.stage.mouseup = game.system.stage.mouseupoutside = game.system.stage.touchend = game.system.stage.touchendoutside = this.mouseup.bind(this), game.system.stage.mouseout = this.mouseout.bind(this), this.stage = new game.Container, game.system.stage.addChild(this.stage), game.debugDraw && game.debugDraw.reset()
    }, update: function () {
        var t;
        for (this.world && this.world.update(), t = this.timers.length - 1; t >= 0; t--)this.timers[t].time() >= 0 && ("function" == typeof this.timers[t].callback && this.timers[t].callback(), this.timers[t].repeat ? this.timers[t].reset() : this.timers.splice(t, 1));
        for (t = this.emitters.length - 1; t >= 0; t--)this.emitters[t].update(), this.emitters[t]._remove && this.emitters.splice(t, 1);
        for (game.TweenEngine && game.TweenEngine.update(), t = this.objects.length - 1; t >= 0; t--)this.objects[t].update(), this.objects[t]._remove && this.objects.splice(t, 1)
    }, addObject: function (t) {
        this.objects.push(t)
    }, removeObject: function (t) {
        t._remove = !0
    }, addEmitter: function (t) {
        this.emitters.push(t)
    }, removeEmitter: function (t) {
        t._remove = !0
    }, addTimer: function (t, e, i) {
        var r = new game.Timer(t);
        return r.repeat = !!i, r.callback = e, this.timers.push(r), r
    }, removeTimer: function (t, e) {
        e || (t.callback = null), t.repeat = !1, t.set(0)
    }, click: function () {
    }, mousedown: function () {
    }, mouseup: function () {
    }, mousemove: function () {
    }, mouseout: function () {
    }, keydown: function () {
    }, keyup: function () {
    }, run: function () {
        this.update(), game.debugDraw && game.debugDraw.update(), this.render()
    }, render: function () {
        game.renderer.render(game.system.stage)
    }, pause: function () {
        game.audio.pauseAll()
    }, resume: function () {
        game.audio.resumeAll()
    }})
}), game.module("engine.pool").body(function () {
    "use strict";
    game.Pool = game.Class.extend({create: function (t) {
        return this[t] ? !1 : (this[t] = [], !0)
    }, get: function (t) {
        return this[t] && 0 !== this[t].length ? this[t].pop() : !1
    }, put: function (t, e) {
        return this[t] ? (this[t].push(e), !0) : !1
    }})
}), game.module("engine.analytics").body(function () {
    game.Analytics = game.Class.extend({init: function (t) {
        if (!t)throw"Analytics id not set.";
     /*   !function (t, e, i, r, s, n, a) {
            t.GoogleAnalyticsObject = s, t[s] = t[s] || function () {
                (t[s].q = t[s].q || []).push(arguments)
            }, t[s].l = 1 * new Date, n = e.createElement(i), a = e.getElementsByTagName(i)[0], n.async = 1, n.src = r, a.parentNode.insertBefore(n, a)
        }(window, document, "script", "//www.google-analytics.com/analytics.js", "ga"), ga("create", t, "auto"), ga("send", "pageview")*/
    }, event: function (t, e) {
        ga("send", "event", t, e)
    }})
}), game.module("game.main").require("engine.core", "engine.particle", "game.assets", "game.objects", "game.scenes").body(function () {
    game.System.idtkScale = "ScaleAspectFill", game.System.canvas = !1, game.start(SceneGame, 768, 1024)
}), game.module("engine.particle").require("engine.physics").body(function () {
    "use strict";
    game.Particle = game.Class.extend({position: null, velocity: null, sprite: null, accel: null, init: function () {
        this.position = new game.Vector, this.velocity = new game.Vector, this.accel = new game.Vector
    }, setVeloctity: function (t, e) {
        this.velocity.x = Math.cos(t) * e, this.velocity.y = Math.sin(t) * e
    }, setAccel: function (t, e) {
        this.accel.x = Math.cos(t) * e, this.accel.y = Math.sin(t) * e
    }}), game.Emitter = game.Class.extend({poolName: "emitter", particles: [], textures: [], container: null, position: null, positionVar: null, angle: 0, angleVar: Math.PI, speed: 100, speedVar: 0, life: 2, lifeVar: 0, duration: 0, durationTimer: 0, rate: .1, rateTimer: 0, count: 10, active: !0, velRotate: 0, velRotateVar: 0, rotate: 0, rotateVar: 0, startAlpha: 1, endAlpha: 0, startScale: 1, startScaleVar: 0, endScale: 1, endScaleVar: 0, target: null, targetForce: 0, accelAngle: Math.PI / 2, accelAngleVar: 0, accelSpeed: 0, accelSpeedVar: 0, spriteSettings: {anchor: {x: .5, y: .5}}, velocityLimit: null, init: function (t) {
        game.pool.create(this.poolName), this.position = new game.Vector, this.positionVar = new game.Vector, this.velocityLimit = new game.Vector, this.target = new game.Vector, game.merge(this, t)
    }, reset: function (t) {
        for (var e in this)"number" == typeof this[e] && (this[e] = game.Emitter.prototype[e]), this[e]instanceof game.Vector && t && this[e].set(0, 0)
    }, getVariance: function (t) {
        return Math.random() * t * (Math.random() > .5 ? -1 : 1)
    }, addParticle: function () {
        var t = game.pool.get(this.poolName);
        t || (t = new game.Particle), t.position.x = this.position.x + this.getVariance(this.positionVar.x), t.position.y = this.position.y + this.getVariance(this.positionVar.y);
        var e = this.getVariance(this.angleVar), i = this.angle + e, r = this.speed + this.getVariance(this.speedVar);
        t.setVeloctity(i, r), this.angleVar !== this.accelAngleVar && (e = this.getVariance(this.accelAngleVar)), i = this.accelAngle + e, r = this.accelSpeed + this.getVariance(this.accelSpeedVar), t.setAccel(i, r), t.life = this.life + this.getVariance(this.lifeVar), t.sprite ? (t.sprite.setTexture(game.TextureCache[this.textures.random()]), t.sprite.position.x = t.position.x, t.sprite.position.y = t.position.y) : t.sprite = new game.Sprite(t.position.x, t.position.y, this.textures.random(), this.spriteSettings), t.rotate = this.rotate + this.getVariance(this.rotateVar), t.velRotate = this.velRotate + this.getVariance(this.velRotateVar), this.startAlpha !== this.endAlpha ? (t.deltaAlpha = this.endAlpha - this.startAlpha, t.deltaAlpha /= t.life) : t.deltaAlpha = 0, t.sprite.alpha = this.startAlpha;
        var s = this.startScale + this.getVariance(this.startScaleVar);
        this.startScale !== this.endScale ? (t.deltaScale = this.endScale + this.getVariance(this.endScaleVar) - s, t.deltaScale /= t.life) : t.deltaScale = 0, t.sprite.scale.x = t.sprite.scale.y = s, this.container && this.container.addChild(t.sprite), this.particles.push(t)
    }, updateParticle: function (t) {
        return t.life > 0 && (t.life -= game.system.delta, t.life <= 0) ? this.removeParticle(t) : (this.targetForce > 0 && (t.accel.set(this.target.x - t.position.x, this.target.y - t.position.y), t.accel.normalize().multiply(this.targetForce)), t.velocity.multiplyAdd(t.accel, game.system.delta), (this.velocityLimit.x > 0 || this.velocityLimit.y > 0) && t.velocity.limit(this.velocityLimit), t.velRotate && t.velocity.rotate(t.velRotate * game.system.delta), t.position.multiplyAdd(t.velocity, game.scale * game.system.delta), t.deltaAlpha && (t.sprite.alpha = Math.max(0, t.sprite.alpha + t.deltaAlpha * game.system.delta)), t.deltaScale && (t.sprite.scale.x = t.sprite.scale.y += t.deltaScale * game.system.delta), t.sprite.rotation += t.rotate * game.system.delta, t.sprite.position.x = t.position.x, void(t.sprite.position.y = t.position.y))
    }, removeParticle: function (t) {
        t.sprite.parent && t.sprite.parent.removeChild(t.sprite), game.pool.put(this.poolName, t), this.particles.erase(t)
    }, emit: function (t) {
        t = t || 1;
        for (var e = 0; t > e; e++)this.addParticle()
    }, update: function () {
        this.durationTimer += game.system.delta, this.duration > 0 && (this.active = this.durationTimer < this.duration), this.rate && this.active && (this.rateTimer += game.system.delta, this.rateTimer >= this.rate && (this.rateTimer = 0, this.emit(this.count)));
        for (var t = this.particles.length - 1; t >= 0; t--)this.updateParticle(this.particles[t])
    }, remove: function () {
        this._remove = !0
    }})
}), game.module("engine.physics").body(function () {
    "use strict";
    game.World = game.Class.extend({gravity: null, solver: null, bodies: [], collisionGroups: [], init: function (t, e) {
        this.gravity = new game.Vector, this.gravity.x = "number" == typeof t ? t : 0, this.gravity.y = "number" == typeof e ? e : 980, this.solver = new game.CollisionSolver
    }, addBody: function (t) {
        t.world = this, this.bodies.push(t), "number" == typeof t.collisionGroup && (this.collisionGroups[t.collisionGroup] = this.collisionGroups[t.collisionGroup] || [], this.collisionGroups[t.collisionGroup].push(t)), game.debugDraw && t.shape && game.debugDraw.addBody(t)
    }, removeBody: function (t) {
        t.world && (t.world = null, this.removeBodyCollision(t), this.bodies.erase(t))
    }, removeBodyCollision: function (t) {
        this.collisionGroups[t.collisionGroup].erase(t)
    }, removeCollisionGroup: function (t) {
        this.collisionGroups.erase(this.collisionGroups[t])
    }, collide: function (t) {
        if (this.collisionGroups[t.collideAgainst]) {
            var e, i;
            for (e = this.collisionGroups[t.collideAgainst].length - 1; e >= 0; e--)i = this.collisionGroups[t.collideAgainst][e], t !== i && this.solver.solve(t, i)
        }
    }, update: function () {
        var t, e;
        for (t = this.bodies.length - 1; t >= 0; t--)this.bodies[t].update();
        for (t = this.collisionGroups.length - 1; t >= 0; t--)if (this.collisionGroups[t])for (e = this.collisionGroups[t].length - 1; e >= 0; e--)"number" == typeof this.collisionGroups[t][e].collideAgainst && this.collide(this.collisionGroups[t][e])
    }}), game.CollisionSolver = game.Class.extend({solve: function (t, e) {
        this.hitTest(t, e) && this.hitResponse(t, e)
    }, hitTest: function (t, e) {
        if (t.shape instanceof game.Rectangle && e.shape instanceof game.Rectangle)return!(t.position.y + t.shape.height / 2 <= e.position.y - e.shape.height / 2 || t.position.y - t.shape.height / 2 >= e.position.y + e.shape.height / 2 || t.position.x - t.shape.width / 2 >= e.position.x + e.shape.width / 2 || t.position.x + t.shape.width / 2 <= e.position.x - e.shape.width / 2);
        if (t.shape instanceof game.Circle && e.shape instanceof game.Circle)return t.shape.radius + e.shape.radius > t.position.distance(e.position);
        if (t.shape instanceof game.Rectangle && e.shape instanceof game.Circle || t.shape instanceof game.Circle && e.shape instanceof game.Rectangle) {
            var i = t.shape instanceof game.Rectangle ? t : e, r = t.shape instanceof game.Circle ? t : e, s = Math.max(i.position.x - i.shape.width / 2, Math.min(i.position.x + i.shape.width / 2, r.position.x)), n = Math.max(i.position.y - i.shape.height / 2, Math.min(i.position.y + i.shape.height / 2, r.position.y)), a = Math.pow(r.position.x - s, 2) + Math.pow(r.position.y - n, 2);
            return a < r.shape.radius * r.shape.radius
        }
        if (t.shape instanceof game.Line && e.shape instanceof game.Line) {
            var o = t.position.x - Math.sin(t.shape.rotation) * (t.shape.length / 2), h = t.position.y - Math.cos(t.shape.rotation) * (t.shape.length / 2), l = t.position.x + Math.sin(t.shape.rotation) * (t.shape.length / 2), u = t.position.y + Math.cos(t.shape.rotation) * (t.shape.length / 2), c = e.position.x - Math.sin(e.shape.rotation) * (e.shape.length / 2), d = e.position.y - Math.cos(e.shape.rotation) * (e.shape.length / 2), p = e.position.x + Math.sin(e.shape.rotation) * (e.shape.length / 2), m = e.position.y + Math.cos(e.shape.rotation) * (e.shape.length / 2), g = (m - d) * (l - o) - (p - c) * (u - h);
            if (0 !== g) {
                var f = (p - c) * (h - d) - (m - d) * (o - c), v = (l - o) * (h - d) - (u - h) * (o - c), y = f / g;
                if (g = v / g, y >= 0 && 1 >= y && g >= 0 && 1 >= g)return!0
            }
            return!1
        }
        if (t.shape instanceof game.Line && e.shape instanceof game.Circle || t.shape instanceof game.Circle && e.shape instanceof game.Line) {
            var x = t.shape instanceof game.Line ? t : e, r = t.shape instanceof game.Circle ? t : e, o = x.position.x - Math.sin(x.shape.rotation - x.rotation) * (x.shape.length / 2), h = x.position.y - Math.cos(x.shape.rotation - x.rotation) * (x.shape.length / 2), l = x.position.x + Math.sin(x.shape.rotation - x.rotation) * (x.shape.length / 2), u = x.position.y + Math.cos(x.shape.rotation - x.rotation) * (x.shape.length / 2), b = l - o, T = u - h, w = r.position.x, S = r.position.y, C = w - o, A = S - h, E = (b * C + T * A) / (x.shape.length * x.shape.length);
            if (0 > E) {
                var M = Math.sqrt(C * C + A * A);
                if (M < r.shape.radius)return!0
            } else if (E > 1) {
                var M = this.distance(w, S, l, u);
                if (M < r.shape.radius)return!0
            } else {
                var M = this.distance(C, A, b * E, T * E);
                if (M < r.shape.radius)return!0
            }
            return!1
        }
        return!1
    }, hitResponse: function (t, e) {
        if (t.shape instanceof game.Rectangle && e.shape instanceof game.Rectangle)t.last.y + t.shape.height / 2 <= e.last.y - e.shape.height / 2 ? t.collide(e) && (t.position.y = e.position.y - e.shape.height / 2 - t.shape.height / 2) : t.last.y - t.shape.height / 2 >= e.last.y + e.shape.height / 2 ? t.collide(e) && (t.position.y = e.position.y + e.shape.height / 2 + t.shape.height / 2) : t.last.x + t.shape.width / 2 <= e.last.x - e.shape.width / 2 ? t.collide(e) && (t.position.x = e.position.x - e.shape.width / 2 - t.shape.width / 2) : t.last.x - t.shape.width / 2 >= e.last.x + e.shape.width / 2 ? t.collide(e) && (t.position.x = e.position.x + e.shape.width / 2 + t.shape.width / 2) : t.collide(e); else if (t.shape instanceof game.Circle && e.shape instanceof game.Circle) {
            if (t.collide(e)) {
                var i = e.position.angle(t.position), r = t.shape.radius + e.shape.radius;
                t.position.x = e.position.x + Math.cos(i) * r, t.position.y = e.position.y + Math.sin(i) * r
            }
        } else if (t.shape instanceof game.Rectangle && e.shape instanceof game.Circle) {
            if (t.collide(e))return
        } else if (t.shape instanceof game.Circle && e.shape instanceof game.Rectangle) {
            if (t.collide(e))return
        } else if (t.shape instanceof game.Line && e.shape instanceof game.Line) {
            if (t.collide(e))return
        } else if (t.shape instanceof game.Circle && e.shape instanceof game.Line) {
            if (t.collide(e))return
        } else if (t.shape instanceof game.Line && e.shape instanceof game.Circle && t.collide(e))return
    }}), game.Body = game.Class.extend({world: null, shape: null, position: null, last: null, velocity: null, velocityLimit: null, mass: 0, collisionGroup: 0, collideAgainst: null, rotation: 0, init: function (t) {
        this.position = new game.Vector, this.velocity = new game.Vector, this.velocityLimit = new game.Vector(500, 500), this.last = new game.Vector, game.merge(this, t)
    }, addShape: function (t) {
        this.shape = t
    }, collide: function () {
        return!0
    }, update: function () {
        this.last.copy(this.position), this.mass > 0 && (this.velocity.x += this.world.gravity.x * this.mass * game.system.delta, this.velocity.y += this.world.gravity.y * this.mass * game.system.delta, this.velocity.limit(this.velocityLimit)), this.position.multiplyAdd(this.velocity, game.scale * game.system.delta)
    }}), game.Rectangle = game.Class.extend({width: 50, height: 50, init: function (t, e) {
        this.width = t || this.width * game.scale, this.height = e || this.height * game.scale
    }}), game.Circle = game.Class.extend({radius: 50, init: function (t) {
        this.radius = t || this.radius * game.scale
    }}), game.Line = game.Class.extend({length: 50, rotation: 0, init: function (t, e) {
        this.length = t || this.length * game.scale, this.rotation = e || this.rotation
    }}), game.Vector = game.Class.extend({value: null, init: function (t, e) {
        this.value = new Float32Array(2), this.x = t || 0, this.y = e || 0
    }, set: function (t, e) {
        return this.x = t, this.y = e, this
    }, clone: function () {
        return new game.Vector(this.x, this.y)
    }, copy: function (t) {
        return this.x = t.x, this.y = t.y, this
    }, add: function (t, e) {
        return this.x += t instanceof game.Vector ? t.x : t, this.y += t instanceof game.Vector ? t.y : e || t, this
    }, subtract: function (t, e) {
        return this.x -= t instanceof game.Vector ? t.x : t, this.y -= t instanceof game.Vector ? t.y : e || t, this
    }, multiply: function (t, e) {
        return this.x *= t instanceof game.Vector ? t.x : t, this.y *= t instanceof game.Vector ? t.y : e || t, this
    }, multiplyAdd: function (t, e) {
        return this.x += t instanceof game.Vector ? t.x * e : t * e, this.y += t instanceof game.Vector ? t.y * e : t * e, this
    }, divide: function (t, e) {
        return this.x /= t instanceof game.Vector ? t.x : t, this.y /= t instanceof game.Vector ? t.y : e || t, this
    }, distance: function (t) {
        var e = t.x - this.x, i = t.y - this.y;
        return Math.sqrt(e * e + i * i)
    }, length: function () {
        return Math.sqrt(this.dot())
    }, dot: function (t) {
        return t instanceof game.Vector ? this.x * t.x + this.y * t.y : this.x * this.x + this.y * this.y
    }, dotNormalized: function (t) {
        var e = this.length(), i = this.x / e, r = this.y / e;
        if (t instanceof game.Vector) {
            var s = t.length(), n = t.x / s, a = t.y / s;
            return i * n + r * a
        }
        return i * i + r * r
    }, rotate: function (t) {
        var e = Math.cos(t), i = Math.sin(t), r = this.x * e - this.y * i, s = this.y * e + this.x * i;
        return this.x = r, this.y = s, this
    }, normalize: function () {
        var t = this.length();
        return this.x /= t || 1, this.y /= t || 1, this
    }, limit: function (t) {
        return this.x = this.x.limit(-t.x, t.x), this.y = this.y.limit(-t.y, t.y), this
    }, angle: function (t) {
        return Math.atan2(t.y, t.x) - Math.atan2(this.y, this.x)
    }, round: function () {
        return this.x = Math.round(this.x), this.y = Math.round(this.y), this
    }}), Object.defineProperty(game.Vector.prototype, "x", {get: function () {
        return this.value[0]
    }, set: function (t) {
        this.value[0] = t
    }}), Object.defineProperty(game.Vector.prototype, "y", {get: function () {
        return this.value[1]
    }, set: function (t) {
        this.value[1] = t
    }})
}), game.module("game.assets").require("engine.audio").body(function () {
    game.addAsset("media/player1.png"), game.addAsset("media/player2.png"), game.addAsset("media/logo2.png"), game.addAsset("media/logo1.png"), game.addAsset("media/cloud4.png"), game.addAsset("media/cloud3.png"), game.addAsset("media/cloud2.png"), game.addAsset("media/cloud1.png"), game.addAsset("media/ground.png"), game.addAsset("media/bushes.png"), game.addAsset("media/parallax3.png"), game.addAsset("media/parallax2.png"), game.addAsset("media/parallax1.png"), game.addAsset("media/particle.png"), game.addAsset("media/particle2.png"), game.addAsset("media/bar.png"), game.addAsset("media/gameover.png"), game.addAsset("media/new.png"), game.addAsset("media/restart.png"), game.addAsset("media/madewithpanda.png"), game.addAsset("media/font.fnt"), game.addAudio("media/sound/explosion.m4a", "explosion"), game.addAudio("media/sound/jump.m4a", "jump"), game.addAudio("media/sound/score.m4a", "score"), game.addAudio("media/sound/highscore.m4a", "highscore"), game.addAudio("media/sound/music.m4a", "music")
}), game.module("game.objects").require("engine.sprite").body(function () {
    Player = game.Class.extend({jumpPower: -750, init: function () {
        var t = game.system.width / 2, e = 500;
        this.sprite = new game.MovieClip([game.Texture.fromImage("media/player1.png"), game.Texture.fromImage("media/player2.png")]), this.sprite.position.x = t, this.sprite.position.y = e, this.sprite.anchor.x = this.sprite.anchor.y = .5, this.sprite.animationSpeed = .1, this.sprite.play(), game.scene.stage.addChild(this.sprite), game.scene.addObject(this), this.body = new game.Body({position: {x: t, y: e}, velocityLimit: {x: 100, y: 1e3}, collideAgainst: 0, collisionGroup: 1}), this.body.collide = this.collide.bind(this);
        var i = new game.Rectangle(132, 36);
        this.body.addShape(i), game.scene.world.addBody(this.body), this.smokeEmitter = new game.Emitter({angle: Math.PI, angleVar: .1, endAlpha: 1, life: .4, lifeVar: .2, count: 2, speed: 400}), this.smokeEmitter.container = game.scene.stage, this.smokeEmitter.textures.push("media/particle.png"), game.scene.emitters.push(this.smokeEmitter), this.flyEmitter = new game.Emitter({life: 0, rate: 0, positionVar: {x: 50, y: 50}, targetForce: 200, speed: 100, velocityLimit: {x: 100, y: 100}, endAlpha: 1}), this.flyEmitter.container = game.scene.stage, this.flyEmitter.textures.push("media/particle2.png"), this.flyEmitter.position.x = this.sprite.position.x + 30, this.flyEmitter.position.y = this.sprite.position.y - 30, this.flyEmitter.emit(5), game.scene.emitters.push(this.flyEmitter)
    }, collide: function () {
        return game.scene.ended || (game.scene.gameOver(), this.body.velocity.y = -200, this.smokeEmitter.rate = 0), this.body.velocity.x = 0, !0
    }, update: function () {
        this.sprite.position.x = this.body.position.x, this.sprite.position.y = this.body.position.y, this.smokeEmitter.position.x = this.sprite.position.x - 60, this.smokeEmitter.position.y = this.sprite.position.y, this.flyEmitter.target.x = this.sprite.position.x + 30, this.flyEmitter.target.y = this.sprite.position.y - 30
    }, jump: function () {
        this.body.position.y < 0 || (this.body.velocity.y = this.jumpPower, game.audio.playSound("jump"))
    }}), Gap = game.Class.extend({groundTop: 800, width: 132, minY: 150, maxY: 550, height: 232, speed: -300, init: function () {
        var t = Math.round(game.Math.random(this.minY, this.maxY)), e = t - this.height / 2;
        this.topBody = new game.Body({position: {x: game.system.width + this.width / 2, y: e / 2}, velocity: {x: this.speed}});
        var i = new game.Rectangle(this.width, e);
        this.topBody.addShape(i), game.scene.world.addBody(this.topBody);
        var r = this.groundTop - e - this.height;
        this.bottomBody = new game.Body({position: {x: game.system.width + this.width / 2, y: e + this.height + r / 2}, velocity: {x: this.speed}});
        var s = new game.Rectangle(this.width, r);
        this.bottomBody.addShape(s), game.scene.world.addBody(this.bottomBody), this.goalBody = new game.Body({position: {x: game.system.width + this.width / 2 + this.width + game.scene.player.body.shape.width, y: e + this.height / 2}, velocity: {x: this.speed}, collisionGroup: 1, collideAgainst: 1}), this.goalBody.collide = function () {
            return game.scene.world.removeBody(this), game.scene.addScore(), !1
        };
        var n = new game.Rectangle(this.width, this.height + game.scene.player.body.shape.height);
        this.goalBody.addShape(n), game.scene.world.addBody(this.goalBody), this.topSprite = new game.Sprite(game.system.width + this.width / 2, e, "media/bar.png", {anchor: {x: .5, y: 0}, scale: {y: -1}}), game.scene.gapContainer.addChild(this.topSprite), this.bottomSprite = new game.Sprite(game.system.width + this.width / 2, e + this.height, "media/bar.png", {anchor: {x: .5, y: 0}}), game.scene.gapContainer.addChild(this.bottomSprite)
    }, update: function () {
        this.topSprite.position.x = this.bottomSprite.position.x = this.topBody.position.x, this.topSprite.position.x + this.width / 2 < 0 && (game.scene.world.removeBody(this.topBody), game.scene.world.removeBody(this.bottomBody), game.scene.world.removeBody(this.goalBody), game.scene.gapContainer.removeChild(this.topSprite), game.scene.gapContainer.removeChild(this.bottomSprite), game.scene.removeObject(this))
    }}), Cloud = game.Sprite.extend({update: function () {
        this.position.x += this.speed * game.scene.cloudSpeedFactor * game.system.delta, this.position.x + this.width < 0 && (this.position.x = game.system.width)
    }}), Logo = game.Class.extend({init: function () {
        var t, e;
        this.container = new game.Container, this.container.position.y = -150, t = new game.Tween(this.container.position).to({y: 200}, 1500).delay(100).easing(game.Tween.Easing.Back.Out).start(), e = new game.Sprite(game.system.width / 2, 0, "media/logo1.png", {anchor: {x: .5, y: .5}}), this.container.addChild(e), t = new game.Tween(e.position).to({y: -20}, 1e3).easing(game.Tween.Easing.Quadratic.InOut).repeat().yoyo().start(), e = new game.Sprite(game.system.width / 2, 80, "media/logo2.png", {anchor: {x: .5, y: .5}}), this.container.addChild(e), t = new game.Tween(e.position).to({y: 100}, 1e3).easing(game.Tween.Easing.Quadratic.InOut).repeat().yoyo().start(), game.scene.stage.addChild(this.container)
    }, remove: function () {
        new game.Tween(this.container).to({alpha: 0}, 1e3).onComplete(this.container.remove.bind(this)).start()
    }})
}), game.module("game.scenes").require("engine.scene").body(function () {
    SceneGame = game.Scene.extend({backgroundColor: 11721967, gapTime: 1500, gravity: 2e3, score: 0, cloudSpeedFactor: 1, init: function () {
        this.world = new game.World(0, this.gravity), this.addParallax(400, "media/parallax1.png", -50), this.addParallax(550, "media/parallax2.png", -100), this.addParallax(650, "media/parallax3.png", -200), this.addCloud(100, 100, "media/cloud1.png", -50), this.addCloud(300, 50, "media/cloud2.png", -30), this.logo = new Logo, this.addCloud(650, 100, "media/cloud3.png", -50), this.addCloud(700, 200, "media/cloud4.png", -40), this.addParallax(700, "media/bushes.png", -250), this.gapContainer = new game.Container, this.stage.addChild(this.gapContainer), this.addParallax(800, "media/ground.png", -300), this.player = new Player;
        var t = new game.Body({position: {x: game.system.width / 2, y: 850}}), e = new game.Rectangle(game.system.width, 100);
        t.addShape(e), this.world.addBody(t), this.scoreText = new game.BitmapText(this.score.toString(), {font: "Pixel"}), this.scoreText.position.x = game.system.width / 2 - this.scoreText.textWidth / 2, this.stage.addChild(this.scoreText);
        var i = new game.Sprite(game.system.width / 2, game.system.height - 48, "media/madewithpanda.png", {anchor: {x: .5, y: 0}});
        this.stage.addChild(i), game.audio.musicVolume = .2, game.audio.playMusic("music")
    }, spawnGap: function () {
        this.addObject(new Gap)
    }, addScore: function () {
        this.score++, this.scoreText.setText(this.score.toString()), game.audio.playSound("score")
    }, addCloud: function (t, e, i, r) {
        var s = new Cloud(t, e, i, {speed: r});
        this.addObject(s), this.stage.addChild(s)
    }, addParallax: function (t, e, i) {
        var r = new game.TilingSprite(0, t, e);
        r.speed.x = i, this.addObject(r), this.stage.addChild(r)
    }, mousedown: function () {
        this.ended || (0 === this.player.body.mass && (game.analytics.event("play"), this.player.body.mass = 1, this.logo.remove(), this.addTimer(this.gapTime, this.spawnGap.bind(this), !0)), this.player.jump())
    }, showScore: function () {
        var t = new game.Sprite(game.system.width / 2, game.system.height / 2, "media/gameover.png", {anchor: {x: .5, y: .5}}), e = parseInt(game.storage.get("highScore")) || 0;
        this.score > e && game.storage.set("highScore", this.score);
        var i = new game.BitmapText(e.toString(), {font: "Pixel"});
        i.position.x = 27, i.position.y = 43, t.addChild(i);
        var r = new game.BitmapText("0", {font: "Pixel"});
        if (r.position.x = i.position.x, r.position.y = -21, t.addChild(r), game.scene.stage.addChild(t), this.restartButton = new game.Sprite(game.system.width / 2, game.system.height / 2 + 250, "media/restart.png", {anchor: {x: .5, y: .5}, scale: {x: 0, y: 0}, interactive: !0, mousedown: function () {
            game.analytics.event("restart"), game.system.setScene(SceneGame)
        }}), this.score > 0) {
            var s = Math.min(100, 1 / this.score * 1e3), n = 0;
            this.addTimer(s, function () {
                if (n++, r.setText(n.toString()), n >= game.scene.score) {
                    if (this.repeat = !1, game.scene.score > e) {
                        game.audio.playSound("highscore");
                        var i = new game.Sprite(-208, 59, "media/new.png");
                        t.addChild(i)
                    }
                    game.scene.showRestartButton()
                }
            }, !0)
        } else this.showRestartButton()
    }, showRestartButton: function () {
        new game.Tween(this.restartButton.scale).to({x: 1, y: 1}, 200).easing(game.Tween.Easing.Back.Out).start();
        this.stage.addChild(this.restartButton)
    }, gameOver: function () {
        var t;
        for (this.cloudSpeedFactor = .2, this.ended = !0, this.timers.length = 0, t = 0; t < this.objects.length; t++)this.objects[t].speed && (this.objects[t].speed.x = 0);
        for (t = 0; t < this.world.bodies.length; t++)this.world.bodies[t].velocity.set(0, 0);
        this.addTimer(500, this.showScore.bind(this)), game.audio.stopMusic(), game.audio.playSound("explosion")
    }})
});